<!DOCTYPE html>
<html lang="en" dir="auto">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Hands-on: Data Manipulation Olympics - SQL / Data Manipulation Olympics - SQL / Foundations of Data Science</title>
        
            <meta name="google-site-verification" content="9mOXn2JL833-i7-aioCCEuIdG4_tb6qjwUozB5GJnPQ" />

<!-- JavaScript Error Monitoring, and performance tracking. -->
<script
  src="https://browser.sentry-cdn.com/7.52.1/bundle.tracing.min.js"
  integrity="sha384-muuFXKS3752PNA4rPm9Uq6BLvOfV4CXyr9MHDBPvozOJJUWLKkogEFWOIRoVps43"
  crossorigin="anonymous"
></script>
<script type="text/javascript">
if(localStorage.getItem('sentry-opt-out') !== 'opt-out' && navigator.doNotTrack !== "1") {
	console.log("Sentry: opt-in");
	Sentry.init({
		dsn: "https://45e0ec6e4373462b92969505df37cf40@sentry.galaxyproject.org/10",
		release: "galaxy-training-network@5297fe084ae5d03ac62a0ecb0faa55aed5766f4d",
		integrations: [new Sentry.BrowserTracing(), new Sentry.Replay()],
		sampleRate: 0.1,
		tracesSampleRate: 0.1,
		// Capture Replay for no sessions by default
		replaysSessionSampleRate: 0.01,
		// plus for 1% of sessions with an error
		replaysOnErrorSampleRate: 0.01,
		// PII OFF
		sendDefaultPii: false, // Off by default but just in case.
		environment: "production",
	});
}
</script>

<!-- Page view tracking -->
<script defer data-domain="training.galaxyproject.org" src="https://plausible.galaxyproject.eu/js/plausible.js"></script>
<script>
if(localStorage.getItem('plausible-opt-out') !== 'opt-out' && navigator.doNotTrack !== "1") {
	localStorage.removeItem("plausible_ignore")
	console.log("Plausible: opt-in");
	window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }
} else {
	// if they're opting-out, or DNT
	// we might get one page by accident but we won't get future ones.
	localStorage.setItem("plausible_ignore", "true")
}
</script>

        
        <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon">
        <link rel="alternate" type="application/atom+xml" href="/training-material/feed.xml">
        <link rel="canonical" href="https://training.galaxyproject.org/training-material/topics/data-science/tutorials/data-manipulation-olympics-sql/tutorial.html">
        <link rel="license" href="https://spdx.org/licenses/CC-BY-4.0">
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Regular-102a.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Bold-102a.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Italic-102a.woff2" as="font" type="font/woff2" crossorigin>
        
        <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" as="script" crossorigin>
        
        <link rel="preload" href="/training-material/assets/css/main.css?v=3" as="style">
        <link rel='preload' href='/training-material/assets/js/bundle.theme.f1f2de89.js' as='script'>
<link rel='preload' href='/training-material/assets/js/bundle.main.40d4e218.js' as='script'>
        <link rel="stylesheet" href="/training-material/assets/css/main.css?v=3">
        <link rel="manifest" href="/training-material/manifest.json">
        <meta name="theme-color" content="#2c3143"/>
	

        <meta name="DC.identifier" content="https://github.com/galaxyproject/training-material">
<meta name="DC.type" content="text">
<meta name="DC.title" content="Data Manipulation Olympics - SQL">
<meta name="DC.publisher" content="Galaxy Training Network">
<meta name="DC.date" content="2024-05-07 14:56:05 +0000">
<meta name="DC.creator" content="Saskia Hiltemann">
<meta name="DC.creator" content="Helena Rasche"><meta name="description" content="These lessons will help you get your feet in data science and give you tools to help you slice and dice your data into results.">
        <meta property="og:site_name" content="Galaxy Training Network">
	<meta property="og:title" content="Foundations of Data Science / Data Manipulation Olympics - SQL / Hands-on: Data Manipulation Olympics - SQL">
        <meta property="og:description" content="These lessons will help you get your feet in data science and give you tools to help you slice and dice your data into results.">
        <meta property="og:image" content="https://galaxy-training.s3.amazonaws.com/social/topics/data-science/tutorials/data-manipulation-olympics-sql/tutorial.png">
	<script type="application/ld+json">


{
  "@context": "http://schema.org",
  "@type": "LearningResource",
  "http://purl.org/dc/terms/conformsTo": {
    "@id": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
    "@type": "CreativeWork"
  },
  "audience": {
    "@type": "EducationalAudience",
    "educationalRole": "Students"
  },
  "citation": [
    {
      "@type": "CreativeWork",
      "name": "Galaxy Training: A Powerful Framework for Teaching!",
      "url": "https://doi.org/10.1371/journal.pcbi.1010752"
    },
    {
      "@type": "CreativeWork",
      "name": "Community-Driven Data Analysis Training for Biology",
      "url": "https://doi.org/10.1016/j.cels.2018.05.012"
    }
  ],
  "discussionUrl": "https://gitter.im/Galaxy-Training-Network/Lobby",
  "headline": "Data Manipulation Olympics - SQL",
  "interactivityType": "mixed",
  "isAccessibleForFree": true,
  "isFamilyFriendly": true,
  "license": "https://spdx.org/licenses/CC-BY-4.0.html",
  "producer": {
    "@type": "Organization",
    "http://purl.org/dc/terms/conformsTo": {
      "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
      "@type": "Organization"
    },
    "id": "https://training.galaxyproject.org",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "legalName": "Galaxy Training Network",
    "alternateName": "GTN",
    "url": "https://training.galaxyproject.org",
    "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
    "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
    "keywords": [
      "galaxy",
      "bioinformatics",
      "training",
      "fair",
      "accessible"
    ],
    "status": "active",
    "foundingDate": "2015-06-29",
    "socialMedia": "https://mstdn.science/@gtn",
    "type": "project"
  },
  "provider": {
    "@type": "Organization",
    "http://purl.org/dc/terms/conformsTo": {
      "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
      "@type": "Organization"
    },
    "id": "https://training.galaxyproject.org",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "legalName": "Galaxy Training Network",
    "alternateName": "GTN",
    "url": "https://training.galaxyproject.org",
    "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
    "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
    "keywords": [
      "galaxy",
      "bioinformatics",
      "training",
      "fair",
      "accessible"
    ],
    "status": "active",
    "foundingDate": "2015-06-29",
    "socialMedia": "https://mstdn.science/@gtn",
    "type": "project"
  },
  "sourceOrganization": {
    "@type": "Organization",
    "http://purl.org/dc/terms/conformsTo": {
      "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
      "@type": "Organization"
    },
    "id": "https://training.galaxyproject.org",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "legalName": "Galaxy Training Network",
    "alternateName": "GTN",
    "url": "https://training.galaxyproject.org",
    "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
    "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
    "keywords": [
      "galaxy",
      "bioinformatics",
      "training",
      "fair",
      "accessible"
    ],
    "status": "active",
    "foundingDate": "2015-06-29",
    "socialMedia": "https://mstdn.science/@gtn",
    "type": "project"
  },
  "workTranslation": [

  ],
  "creativeWorkStatus": "Active",
  "dateModified": "2024-05-07 14:56:05 +0000",
  "datePublished": "2023-06-16 10:00:11 +0000",
  "copyrightHolder": {
    "@type": "Organization",
    "http://purl.org/dc/terms/conformsTo": {
      "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
      "@type": "Organization"
    },
    "id": "https://training.galaxyproject.org",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "legalName": "Galaxy Training Network",
    "alternateName": "GTN",
    "url": "https://training.galaxyproject.org",
    "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
    "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
    "keywords": [
      "galaxy",
      "bioinformatics",
      "training",
      "fair",
      "accessible"
    ],
    "status": "active",
    "foundingDate": "2015-06-29",
    "socialMedia": "https://mstdn.science/@gtn",
    "type": "project"
  },
  "funder": [

  ],
  "funding": [
    {
      "@context": "https://schema.org",
      "@type": "Grant",
      "identifier": "2020-1-NL01-KA203-064717",
      "url": "https://erasmus-plus.ec.europa.eu/projects/search/details/2020-1-NL01-KA203-064717",
      "funder": {
        "@context": "https://schema.org",
        "@type": "Organization",
        "http://purl.org/dc/terms/conformsTo": {
          "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
          "@type": "CreativeWork"
        },
        "name": "Gallantries: Bridging Training Communities in Life Science, Environment and Health",
        "description": "This project ([`2020-1-NL01-KA203-064717`](https://erasmus-plus.ec.europa.eu/projects/search/details/2020-1-NL01-KA203-064717)) is funded with the support of the Erasmus+ programme of the European Union. Their funding has supported a large number of tutorials within the GTN across a wide array of topics.\n![eu flag with the text: with the support of the erasmus programme of the european union](https://gallantries.github.io/assets/images/logosbeneficaireserasmusright_en.jpg)\n![erasmus plus logo](https://www.erasmusplus.nl/assets/images/logo.png)\n",
        "url": "https://www.erasmusplus.nl",
        "logo": "https://gallantries.github.io/assets/images/gallantries-logo.png"
      },
      "startDate": "2020-09-01",
      "endDate": "2023-09-30"
    }
  ],
  "identifier": "https://gxy.io/GTN:T00078",
  "accessMode": [
    "textual",
    "visual"
  ],
  "accessModeSufficient": [
    "textual",
    "visual"
  ],
  "accessibilityControl": [
    "fullKeyboardControl",
    "fullMouseControl"
  ],
  "accessibilityFeature": [
    "alternativeText",
    "tableOfContents"
  ],
  "accessibilitySummary": "The text aims to be as accessible as possible. Image descriptions will vary per tutorial, from images being completely inaccessible, to images with good descriptions for non-visual users.",
  "isPartOf": {
    "@type": "CreativeWork",
    "name": "Foundations of Data Science",
    "description": "These lessons will help you get your feet in data science and give you tools to help you slice and dice your data into results.",
    "url": "https://training.galaxyproject.org/training-material/topics/data-science/"
  },
  "abstract": "Scientific analyses often consist of a number of tools that run one after the other, in order to go from the raw data to scientific insight. Between these specialized tools, simple data manipulation steps are often needed as a kind of \"glue\" between tools. For example, the output of tool A may produce a file that contains all the information needed as input for tool B, but tool B expects the columns in a different order. Or in genomic data analysis, some tools expect chromosome X to be listed as `chrX`, while others simply expect `X`. In these situations, extra data manipulation steps are needed to prepare files for input to analysis tools.",
  "learningResourceType": "e-learning",
  "name": "Data Manipulation Olympics - SQL",
  "url": "https://training.galaxyproject.org/training-material/topics/data-science/tutorials/data-manipulation-olympics-sql/tutorial.html",
  "version": 4,
  "timeRequired": "PT1H",
  "teaches": "- Familiarize yourself with data manipulation in SQL\n- Perform basic SQL query tasks in Galaxy\n- Reason about the expected outcome of tools",
  "keywords": [
    "Foundations of Data Science",
    "cyoa",
    "sql",
    "jupyter-notebook"
  ],
  "description": "## Abstract\n\nScientific analyses often consist of a number of tools that run one after the other, in order to go from the raw data to scientific insight. Between these specialized tools, simple data manipulation steps are often needed as a kind of \"glue\" between tools. For example, the output of tool A may produce a file that contains all the information needed as input for tool B, but tool B expects the columns in a different order. Or in genomic data analysis, some tools expect chromosome X to be listed as `chrX`, while others simply expect `X`. In these situations, extra data manipulation steps are needed to prepare files for input to analysis tools.\n\n\n## About This Material\n\nThis is a Hands-on Tutorial from the GTN which is usable either for individual self-study, or as a teaching material in a classroom.\n\n\n## Questions this  will address\n\n - How can I do basic data manipulation in SQL?\n - Which functions are available to convert, reformat, filter, sort etc my data stored in a database?\n\n\n## Learning Objectives\n\n- Familiarize yourself with data manipulation in SQL\n- Perform basic SQL query tasks in Galaxy\n- Reason about the expected outcome of tools\n\n",
  "inLanguage": {
    "@type": "Language",
    "name": "English",
    "alternateName": "en"
  },
  "author": [
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "http://purl.org/dc/terms/conformsTo": {
        "@id": "https://bioschemas.org/profiles/Person/0.3-DRAFT",
        "@type": "CreativeWork"
      },
      "url": "https://training.galaxyproject.org/training-material/hall-of-fame/shiltemann/",
      "mainEntityOfPage": "https://training.galaxyproject.org/training-material/hall-of-fame/shiltemann/",
      "name": "Saskia Hiltemann",
      "image": "https://avatars.githubusercontent.com/shiltemann",
      "description": "Researcher at Erasmus Medical Center",
      "memberOf": [
        {
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
            "@type": "Organization"
          },
          "id": "https://training.galaxyproject.org",
          "email": "galaxytrainingnetwork@gmail.com",
          "name": "Galaxy Training Network",
          "legalName": "Galaxy Training Network",
          "alternateName": "GTN",
          "url": "https://training.galaxyproject.org",
          "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
          "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
          "keywords": [
            "galaxy",
            "bioinformatics",
            "training",
            "fair",
            "accessible"
          ],
          "status": "active",
          "foundingDate": "2015-06-29",
          "socialMedia": "https://mstdn.science/@gtn",
          "type": "project"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/uni-freiburg/",
          "name": "University of Freiburg",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://www.uni-freiburg.de/"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/nfdi4plants/",
          "name": "DataPLANT (NFDI4Plants)",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://nfdi4plants.org"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/elixir-europe/",
          "name": "ELIXIR Europe",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://elixir-europe.org"
        }
      ],
      "identifier": "https://orcid.org/0000-0003-3803-468X",
      "orcid": "https://orcid.org/0000-0003-3803-468X"
    },
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "http://purl.org/dc/terms/conformsTo": {
        "@id": "https://bioschemas.org/profiles/Person/0.3-DRAFT",
        "@type": "CreativeWork"
      },
      "url": "https://training.galaxyproject.org/training-material/hall-of-fame/hexylena/",
      "mainEntityOfPage": "https://training.galaxyproject.org/training-material/hall-of-fame/hexylena/",
      "name": "Helena Rasche",
      "image": "https://avatars.githubusercontent.com/hexylena",
      "description": "A contributor to the GTN project.",
      "memberOf": [
        {
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
            "@type": "Organization"
          },
          "id": "https://training.galaxyproject.org",
          "email": "galaxytrainingnetwork@gmail.com",
          "name": "Galaxy Training Network",
          "legalName": "Galaxy Training Network",
          "alternateName": "GTN",
          "url": "https://training.galaxyproject.org",
          "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
          "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
          "keywords": [
            "galaxy",
            "bioinformatics",
            "training",
            "fair",
            "accessible"
          ],
          "status": "active",
          "foundingDate": "2015-06-29",
          "socialMedia": "https://mstdn.science/@gtn",
          "type": "project"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/erasmusmc/",
          "name": "Erasmus Medical Center",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://www.erasmusmc.nl"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/gallantries/",
          "name": "Gallantries: Bridging Training Communities in Life Science, Environment and Health",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://www.erasmusplus.nl"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/by-covid/",
          "name": "BeYond-COVID",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://by-covid.org/"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/elixir-europe/",
          "name": "ELIXIR Europe",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://elixir-europe.org"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/elixir-converge/",
          "name": "ELIXIR-CONVERGE",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://elixir-europe.org/about-us/how-funded/eu-projects/converge"
        }
      ],
      "identifier": "https://orcid.org/0000-0001-9760-8992",
      "orcid": "https://orcid.org/0000-0001-9760-8992"
    }
  ],
  "contributor": [
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "http://purl.org/dc/terms/conformsTo": {
        "@id": "https://bioschemas.org/profiles/Person/0.3-DRAFT",
        "@type": "CreativeWork"
      },
      "url": "https://training.galaxyproject.org/training-material/hall-of-fame/shiltemann/",
      "mainEntityOfPage": "https://training.galaxyproject.org/training-material/hall-of-fame/shiltemann/",
      "name": "Saskia Hiltemann",
      "image": "https://avatars.githubusercontent.com/shiltemann",
      "description": "Researcher at Erasmus Medical Center",
      "memberOf": [
        {
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
            "@type": "Organization"
          },
          "id": "https://training.galaxyproject.org",
          "email": "galaxytrainingnetwork@gmail.com",
          "name": "Galaxy Training Network",
          "legalName": "Galaxy Training Network",
          "alternateName": "GTN",
          "url": "https://training.galaxyproject.org",
          "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
          "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
          "keywords": [
            "galaxy",
            "bioinformatics",
            "training",
            "fair",
            "accessible"
          ],
          "status": "active",
          "foundingDate": "2015-06-29",
          "socialMedia": "https://mstdn.science/@gtn",
          "type": "project"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/uni-freiburg/",
          "name": "University of Freiburg",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://www.uni-freiburg.de/"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/nfdi4plants/",
          "name": "DataPLANT (NFDI4Plants)",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://nfdi4plants.org"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/elixir-europe/",
          "name": "ELIXIR Europe",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://elixir-europe.org"
        }
      ],
      "identifier": "https://orcid.org/0000-0003-3803-468X",
      "orcid": "https://orcid.org/0000-0003-3803-468X"
    }
  ],
  "about": [
    {
      "@type": "CreativeWork",
      "name": "Foundations of Data Science",
      "description": "These lessons will help you get your feet in data science and give you tools to help you slice and dice your data into results.",
      "url": "https://training.galaxyproject.org/training-material/topics/data-science/"
    },
    {
      "@type": "DefinedTerm",
      "@id": "http://edamontology.org/topic_3372",
      "inDefinedTermSet": "http://edamontology.org",
      "termCode": "topic_3372",
      "url": "https://bioportal.bioontology.org/ontologies/EDAM/?p=classes&conceptid=http%3A%2F%2Fedamontology.org%2Ftopic_3372"
    }
  ],
  "educationalLevel": "Beginner",
  "mentions": [
    {
      "@type": "Thing",
      "url": "https://training.galaxyproject.org/training-material/topics/data-science/tutorials/data-manipulation-olympics-sql/data-science-data-manipulation-olympics-sql.ipynb",
      "name": "Jupyter Notebook (with Solutions)"
    },
    {
      "@type": "Thing",
      "url": "https://training.galaxyproject.org/training-material/topics/data-science/tutorials/data-manipulation-olympics-sql/data-science-data-manipulation-olympics-sql-course.ipynb",
      "name": "Jupyter Notebook (without Solutions)"
    },
    {
      "@type": "Thing",
      "url": "https://zenodo.org/record/6803028",
      "name": "Associated Training Datasets"
    }
  ]
}</script></head>
    <body data-spy="scroll" data-target="#toc" data-brightness="auto" data-contrast="auto">
        <script  src='/training-material/assets/js/bundle.theme.f1f2de89.js'></script>
        <header>
    <nav class="navbar navbar-expand-md navbar-dark" aria-label="Site Navigation">
        <div class="container">
            <a class="navbar-brand" href="/training-material/">
                <img src="/training-material/assets/images/GTN-60px.png" height="30" alt="Galaxy Training Network logo">
                
                    Galaxy Training!
                
            </a>

            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-navbar" aria-controls="top-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        
                        <a class="nav-link" href="/training-material/topics/data-science" title="Go back to list of tutorials">
                            <i class="far fa-folder" aria-hidden="true"></i> Foundations of Data Science
                        </a>
                        
                    </li>

                    <li class="nav-item">
                        
                        <a class="nav-link" href="/training-material/learning-pathways" title="Learning Pathways">
                           <i class="fas fa-graduation-cap" aria-hidden="true"></i><span class="visually-hidden">curriculum</span> Learning Pathways
                        </a>
                        
                    </li>

                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Help">
        <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">help</span> Help
    </a>
    <div class="dropdown-menu dropdown-menu-right">
	<a class="dropdown-item" href="/training-material/faqs/index.html" title="Check our FAQs">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> FAQs
        </a>
        
        
        
        <a class="dropdown-item" href="/training-material/topics/data-science/faqs/" title="Check our FAQs for the Foundations of Data Science topic">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Topic FAQs
        </a>
        
        
        
        <a class="dropdown-item" href="https://help.galaxyproject.org/" title="Discuss on Galaxy Help">
            <i class="far fa-comments" aria-hidden="true"></i><span class="visually-hidden">feedback</span> Galaxy Help Forum
        </a>
        <a class="dropdown-item" href="https://gitter.im/Galaxy-Training-Network/Lobby" title="Discuss on gitter">
           <i class="fab fa-gitter" aria-hidden="true"></i><span class="visually-hidden">gitter</span> Discuss on Matrix
        </a>
    </div>
</li>


                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Settings">
	<i class="fas fa-cog" aria-hidden="true"></i><span class="visually-hidden">galaxy-gear</span> Settings
    </a>
    <div class="dropdown-menu dropdown-menu-right">

	<h6 class="dropdown-header">Preferences</h6>

	<a href="/training-material/user/theme.html" class="dropdown-item">
		<i class="fas fa-palette" aria-hidden="true"></i><span class="visually-hidden">gtn-theme</span> Theme
	</a>

	<a href="/training-material/user/privacy.html" class="dropdown-item">
		<i class="fas fa-lock" aria-hidden="true"></i><span class="visually-hidden">pref-dataprivate</span> Data Privacy
	</a>

	<div class="dropdown-divider"></div>

	<h6 class="dropdown-header">For Everyone</h6>

        <a class="dropdown-item" href="https://github.com/galaxyproject/training-material/edit/main/topics/data-science/tutorials/data-manipulation-olympics-sql/tutorial.md">
          <i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Propose a change or correction
        </a>

	<h6 class="dropdown-header">Instructor Utilities</h6>

        <a class="dropdown-item" href="/training-material/stats.html">
            <i class="fas fa-chart-column" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN statistics
        </a>

        <a class="dropdown-item" href="https://plausible.galaxyproject.eu/training.galaxyproject.org?period=12mo&page=/training-material/topics/data-science/tutorials/data-manipulation-olympics-sql/tutorial.html">
            <i class="fas fa-chart-column" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> Page View Metrics
        </a>

        <!-- link to feedback -->
        
            
            
                <a class="dropdown-item" href="/training-material/feedback.html">
                    <i class="fas fa-chart-column" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN feedback
                </a>
            
        

        <div class="dropdown-item">
            <div>
                <i class="fas fa-history" aria-hidden="true"></i><span class="visually-hidden">galaxy-rulebuilder-history</span> Previous Versions
            </div>

            <div id="archive-selector">
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/">Older Versions</a>
            </div>

        </div>

    </div>
</li>


                    <!-- Search bar-->
                    <li class="nav-item">
                      <div id="navbarSupportedContent" role="search">
                        <!-- Search form -->
                        <form class="form-inline mr-auto" method="GET" action="/training-material/search2">
                          <i class="fas fa-search nav-link" aria-hidden="true"></i>
                          <div class="md-form mb-2">
                            <input name="query" class="form-control nicer" type="text" placeholder="Search Tutorials" aria-label="Search">
                          </div>
                        </form>
                      </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

        
        <div class="container main-content" role="main">
        














<!-- Gitter -->






<article class="tutorial topic-data-science">
    <h1 data-toc-skip>Data Manipulation Olympics - SQL</h1>
    

    <section aria-labelledby="overview-box" id="tutorial-metadata">
    <div markdown="0">

	<div class="contributors-line">
		
<table class="contributions">
	
	<tr>
		<td><abbr title="These people wrote the bulk of the tutorial, they may have done the analysis, built the workflow, and wrote the text themselves.">Author(s)</abbr></td>
		<td>
			
  <a href="/training-material/hall-of-fame/shiltemann/" class="contributor-badge contributor-shiltemann"><img src="/training-material/assets/images/orcid.png" alt="orcid logo" width="36" height="36"/><img src="https://avatars.githubusercontent.com/shiltemann?s=36" alt="Saskia Hiltemann avatar" width="36" class="avatar" />
    Saskia Hiltemann</a>
  
  <a href="/training-material/hall-of-fame/hexylena/" class="contributor-badge contributor-hexylena"><img src="/training-material/assets/images/orcid.png" alt="orcid logo" width="36" height="36"/><img src="https://avatars.githubusercontent.com/hexylena?s=36" alt="Helena Rasche avatar" width="36" class="avatar" />
    Helena Rasche</a>
  
		</td>
	</tr>
	

	

	

	

	

	

	

	
	<tr class="reviewers">
		<td><abbr title="These people reviewed this material for accuracy and correctness">Reviewers</abbr></td>
		<td>
			
  <a href="/training-material/hall-of-fame/shiltemann/" class="contributor-badge contributor-shiltemann">
    <img src="https://avatars.githubusercontent.com/shiltemann?s=36" alt="Saskia Hiltemann avatar" width="36" class="avatar" />
  </a>
  </td>
	</tr>
	

	

	

</table>


	</div>

</div>


    <blockquote class="overview">
        <div id="overview-box" class="box-title">Overview</div>
        
        <img alt="Creative Commons License: CC-BY" class="float-right" style="border-width:0; display: inline-block; margin:0" src="/training-material/assets/images/cc-by.png" width="88" height="31"/>
        
        <strong><i class="far fa-question-circle" aria-hidden="true"></i> Questions:</strong>
        <ul>
        
        <li><p>How can I do basic data manipulation in SQL?</p>
</li>
        
        <li><p>Which functions are available to convert, reformat, filter, sort etc my data stored in a database?</p>
</li>
        
        </ul>

        <strong><i class="fas fa-bullseye" aria-hidden="true"></i> Objectives: </strong>
        <ul>
        
        <li><p>Familiarize yourself with data manipulation in SQL</p>
</li>
        
        <li><p>Perform basic SQL query tasks in Galaxy</p>
</li>
        
        <li><p>Reason about the expected outcome of tools</p>
</li>
        
        </ul>

        

        
        <div><strong><i class="fas fa-hourglass-half" aria-hidden="true"></i> Time estimation:</strong> 1 hour</div>
        

        
        <div><strong><i class="fas fa-graduation-cap" aria-hidden="true"></i> Level: </strong>
        


 Introductory <span class="visually-hidden">Introductory</span>
<span class="level introductory" title="Introductory Tutorial">
  <i class="fas fa-graduation-cap" aria-hidden="true"></i> <i class="fas fa-graduation-cap" aria-hidden="true"></i> <i class="fas fa-graduation-cap" aria-hidden="true"></i>
</span>

</div>
        

        

        

        <div id="supporting-materials"><strong><i class="fa fa-external-link" aria-hidden="true"></i> Supporting Materials:</strong></div>
        <ul class="supporting_material">
            

            
                <li class="btn btn-default supporting_material">


<a class="btn btn-default topic-icon" title="Zenodo datasets used in this tutorial" href="https://zenodo.org/record/6803028">
    <i class="far fa-copy" aria-hidden="true"></i>&nbsp;Datasets
</a>

</li>
            

            

            

            

            

            
                <li class="btn btn-default supporting_material">


    <a class="topic-icon" href="/training-material/topics/data-science/tutorials/data-manipulation-olympics-sql/data-science-data-manipulation-olympics-sql.ipynb" title="Jupyter Notebook" alt="Data Manipulation Olympics - SQL Notebook">
        <i class="far fa-file-code" aria-hidden="true"></i> Jupyter Notebook
    </a>
    

</li>
            

            
            
            

            <!-- Check the GTN Video Library for recordings of this tutorial or associated slides -->
            












            
                
                <li class="btn btn-default supporting_material">






    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Where to run the tutorial">
        <i class="fas fa-globe" aria-hidden="true"></i><span class="visually-hidden">instances</span>&nbsp;Available on these Galaxies 
    </a>
    <ul class="dropdown-menu">
        
    
	<li class="dropdown-header">
		<b>Possibly Working</b>
	</li>
    
	<li>
		<a class="dropdown-item" href="https://usegalaxy.eu" title="">
			UseGalaxy.eu
		</a>
	</li>
    
	<li>
		<a class="dropdown-item" href="https://usegalaxy.org" title="">
			UseGalaxy.org
		</a>
	</li>
    
	<li>
		<a class="dropdown-item" href="https://usegalaxy.org.au" title="">
			UseGalaxy.org.au
		</a>
	</li>
    
	<li>
		<a class="dropdown-item" href="https://usegalaxy.fr" title="">
			UseGalaxy.fr
		</a>
	</li>
    
    

    </ul>

</li>
                
            
        </ul>

        <div><strong><i class="far fa-calendar" aria-hidden="true"></i> Published:</strong> Jun 16, 2023 </div>
        <div><strong><i class="far fa-calendar" aria-hidden="true"></i> Last modification:</strong> May 7, 2024 </div>
        <div><strong><i class="fas fa-balance-scale" aria-hidden="true"></i> License:</strong>
		
            Tutorial Content is licensed under
            
              <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
            
            The GTN Framework is licensed under <a rel="license" href="https://github.com/galaxyproject/training-material/blob/main/LICENSE.md">MIT</a>
        </div>
        
        <div><strong><i class="fas fa-fingerprint" aria-hidden="true"></i><span class="visually-hidden">purl</span> <abbr title="Persistent URL">PURL</abbr>:</strong> <a href="https://gxy.io/GTN:T00078">https://gxy.io/GTN:T00078</a> </div>
        

	
	

	
	
	<div><strong><i class="fas fa-code-commit" aria-hidden="true"></i><span class="visually-hidden">version</span> Revision:</strong> 4 </div>

    </blockquote>
    </section>

    <div class="container">
        <div class="row">
            <!-- sidebar, which will move to the top on a small screen -->
            <div class="col-sm-2 hide-when-printing">
                <nav id="toc" data-toggle="toc" class="sticky-top" aria-label="Table of Contents"></nav>
            </div>
            <div class="col-sm-10">
                 
                <section aria-label="Tutorial Notebook access information" id="tutorial-notebook">
                     
                     
                     
                     
                    
                        <blockquote class="comment">
                            <div class="box-title">Best viewed in a Jupyter Notebook</div>
                            <p>
                                This tutorial is best viewed in a Jupyter notebook! You can load this notebook one of the following ways<!--, or you can click to run it in MyBinder-->
                            </p>
                            <!--
                            <p><b>Launching on MyBinder</b>
                                Click here and the notebook will launch on MyBinder.org
                                <a href="https://mybinder.org/v2/gh/galaxyproject/training-material/main?filepath=training-material%2Ftopics%2Fdata-science%2Ftutorials%2Fdata-manipulation-olympics-sql%2Ftutorial.md.ipynb" title="Launch notebook on MyBinder"><img src="https://mybinder.org/badge_logo.svg" alt="My Binder Logo"/></a>
                            </p>
                            -->
                            
                            <p><b>Launching the notebook in Jupyter in Galaxy</b>
                                <ol>
                                    <li><a href="/training-material/faqs/galaxy/interactive_tools_jupyter_launch.html">Instructions to Launch JupyterLab</a></li>
                                    <li>Open a Terminal in JupyterLab with <b>File -> New -> Terminal</b></li>
                                    <li>Run <code>wget https://training.galaxyproject.org/training-material/topics/data-science/tutorials/data-manipulation-olympics-sql/data-science-data-manipulation-olympics-sql.ipynb</code></li>
                                    <li>Select the notebook that appears in the list of files on the left.</li>
                                </ol>
                            </p>
                            <p><b>Downloading the notebook</b>
                                <ol>
                                    <li>Right click one of these links: <a href="https://training.galaxyproject.org/training-material/topics/data-science/tutorials/data-manipulation-olympics-sql/data-science-data-manipulation-olympics-sql.ipynb">Jupyter Notebook (With Solutions)</a>, <a href="https://training.galaxyproject.org/training-material/topics/data-science/tutorials/data-manipulation-olympics-sql/data-science-data-manipulation-olympics-sql-course.ipynb">Jupyter Notebook (Without Solutions)</a></li>
                                    <li>Save Link As..</li>
                                </ol>
                            </p>
                        </blockquote>
                    
                </section>
                

                <section aria-label="Tutorial Content" id="tutorial-content">
                <p>Scientific analyses often consist of a number of tools that run one after the other, in order to go from the raw data to scientific insight. Between these specialized tools, simple data manipulation steps are often needed as a kind of “glue” between tools. For example, the output of tool A may produce a file that contains all the information needed as input for tool B, but tool B expects the columns in a different order. Or in genomic data analysis, some tools expect chromosome X to be listed as <code class="language-plaintext highlighter-rouge">chrX</code>, while others simply expect <code class="language-plaintext highlighter-rouge">X</code>. In these situations, extra data manipulation steps are needed to prepare files for input to analysis tools.</p>

<!--
Note to contributors: feel free to add sections here to include additional data manipulation options.
Make sure each section is independent of each other, i.e. each section should start with the olympics.tsv file.
Also make sure to include many exercises (with answers) for your section!
-->

<p>Galaxy has a large collection of tools to perform such basic data manipulation tasks, and becoming familiar with these operations will allow to perform your analysis more easily in Galaxy (and outside).</p>

<blockquote class="agenda">
  <div class="box-title agenda-title" id="agenda-1">Agenda</div>

  <p>In this tutorial, we will cover:</p>

<ol id="markdown-toc">
  <li><a href="#cheatsheet" id="markdown-toc-cheatsheet">Cheatsheet</a></li>
  <li><a href="#background" id="markdown-toc-background">Background</a></li>
  <li><a href="#preamble" id="markdown-toc-preamble">Preamble</a></li>
  <li><a href="#download-data" id="markdown-toc-download-data">Download Data</a>    <ol>
      <li><a href="#about-this-dataset" id="markdown-toc-about-this-dataset">About this dataset</a></li>
    </ol>
  </li>
  <li><a href="#choose-your-adventure" id="markdown-toc-choose-your-adventure">Choose your adventure!</a></li>
  <li><a href="#sorting" id="markdown-toc-sorting">Sorting</a>    <ol>
      <li><a href="#sort-on-multiple-columns-at-once" id="markdown-toc-sort-on-multiple-columns-at-once">Sort on multiple columns at once</a></li>
      <li><a href="#exercises" id="markdown-toc-exercises">Exercises</a></li>
    </ol>
  </li>
  <li><a href="#filtering" id="markdown-toc-filtering">Filtering</a>    <ol>
      <li><a href="#exercises-1" id="markdown-toc-exercises-1">Exercises</a></li>
    </ol>
  </li>
  <li><a href="#counting" id="markdown-toc-counting">Counting</a>    <ol>
      <li><a href="#exercises-2" id="markdown-toc-exercises-2">Exercises</a></li>
    </ol>
  </li>
  <li><a href="#grouping" id="markdown-toc-grouping">Grouping</a>    <ol>
      <li><a href="#grouping-on-multiple-columns" id="markdown-toc-grouping-on-multiple-columns">Grouping on multiple columns</a></li>
      <li><a href="#exercises-3" id="markdown-toc-exercises-3">Exercises</a></li>
    </ol>
  </li>
  <li><a href="#computing" id="markdown-toc-computing">Computing</a>    <ol>
      <li><a href="#exercises-4" id="markdown-toc-exercises-4">Exercises</a></li>
    </ol>
  </li>
  <li><a href="#find-and-replace" id="markdown-toc-find-and-replace">Find and Replace</a>    <ol>
      <li><a href="#exercises-5" id="markdown-toc-exercises-5">Exercises</a></li>
    </ol>
  </li>
  <li><a href="#removing-columns" id="markdown-toc-removing-columns">Removing Columns</a></li>
  <li><a href="#unique" id="markdown-toc-unique">Unique</a></li>
  <li><a href="#joining-datasets" id="markdown-toc-joining-datasets">Joining Datasets</a></li>
  <li><a href="#concatenating" id="markdown-toc-concatenating">Concatenating</a></li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
  <li><a href="#exercises-putting-it-all-together" id="markdown-toc-exercises-putting-it-all-together">Exercises: Putting it all together!</a></li>
</ol>

</blockquote>

<h1 id="cheatsheet">Cheatsheet</h1>

<p>Here is an overview table of the different data manipulations in this tutorial, with links to the tools in Galaxy.</p>

<table>
  <thead>
    <tr>
      <th>Operation</th>
      <th>Description</th>
      <th>Galaxy Tool</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Compute on rows</td>
      <td>to derive new column values from existing ones</td>
      <td><code class="language-plaintext highlighter-rouge">SELECT x * 2 FROM y</code></td>
    </tr>
    <tr>
      <td>Concatenate datasets</td>
      <td>one after the other</td>
      <td><code class="language-plaintext highlighter-rouge">SELECT * FROM x; union all; SELECT * FROM y</code></td>
    </tr>
    <tr>
      <td>Counting</td>
      <td>Count occurrences of values in a column</td>
      <td><code class="language-plaintext highlighter-rouge">SELECT count(x) FROM y where x = 'value'</code></td>
    </tr>
    <tr>
      <td>Cut Columns</td>
      <td>By header name</td>
      <td><code class="language-plaintext highlighter-rouge">SELECT x, y, z FROM a</code></td>
    </tr>
    <tr>
      <td>Filter</td>
      <td>Remove rows based on values in one or more columns</td>
      <td><code class="language-plaintext highlighter-rouge">... WHERE x = 'value'</code></td>
    </tr>
    <tr>
      <td>Find and Replace</td>
      <td>in a specific column</td>
      <td><code class="language-plaintext highlighter-rouge">REPLACE()</code>, <code class="language-plaintext highlighter-rouge">regexp_replace</code> in postgresql</td>
    </tr>
    <tr>
      <td>Group on a column</td>
      <td>And perform simple operations (count, mean, min, max etc)</td>
      <td><code class="language-plaintext highlighter-rouge">... GROUP BY x ...</code></td>
    </tr>
    <tr>
      <td>Join two Datasets</td>
      <td>side by side on a specified field</td>
      <td><code class="language-plaintext highlighter-rouge">SELECT * FROM x, y JOIN x.id = y.id</code></td>
    </tr>
    <tr>
      <td>Select First lines</td>
      <td>Good for finding top 10s or saving header lines</td>
      <td><code class="language-plaintext highlighter-rouge">... LIMIT 10</code></td>
    </tr>
    <tr>
      <td>Sort on a column</td>
      <td>Change the order of the rows based on values in one or more columns</td>
      <td><code class="language-plaintext highlighter-rouge">... ORDER BY x ASC</code></td>
    </tr>
    <tr>
      <td>Unique</td>
      <td>Remove duplicate rows</td>
      <td><code class="language-plaintext highlighter-rouge">SELECT DISTINCT x FROM y</code></td>
    </tr>
  </tbody>
</table>

<p>In this tutorial, these functions are explained in more detail, and we provide some exercises for you to practice.</p>

<h1 id="background">Background</h1>

<p>In this tutorial, we will use as our dataset a table with results from the Olympics, from the games in Athens in 1896 until Tokyo in 2020. The objective is to familiarize you with a large number of the most important data manipulation tools in Galaxy. Much like the Olympics, there are many different disciplines (types of operations), and for each operation there are often multiple techniques (tools) available to athletes (data analysts, you) that are great for achieving the goal.</p>

<p><a href="/training-material/topics/introduction/tutorials/data-manipulation-olympics/images/cover.jpg" rel="noopener noreferrer"><img src="/training-material/topics/introduction/tutorials/data-manipulation-olympics/images/cover.jpg" alt="image of olympic rings, logo and two athletes around the words &quot;Data Analysis Olympics&quot;. " width="320" height="180" loading="lazy" /></a></p>

<p>We will show you many of these commonly needed data manipulation operations, and some examples of how to perform them in Galaxy. We also provide many exercises so that you can train your skills and become a data manipulation Olympian!</p>

<h1 id="preamble">Preamble</h1>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">#</span> <span class="n">This</span> <span class="n">preamble</span> <span class="k">sets</span> <span class="n">up</span> <span class="n">the</span> <span class="k">sql</span> <span class="nv">"magic"</span> <span class="k">for</span> <span class="n">jupyter</span><span class="p">.</span> <span class="n">Use</span> <span class="o">%%</span><span class="k">sql</span> <span class="k">in</span> <span class="n">your</span> <span class="n">cells</span> <span class="k">to</span> <span class="k">write</span> <span class="k">sql</span><span class="o">!</span>
<span class="o">!</span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">ipython</span><span class="o">-</span><span class="k">sql</span> <span class="n">sqlalchemy</span>
<span class="o">!</span><span class="n">wget</span> <span class="o">-</span><span class="k">c</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">zenodo</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">record</span><span class="o">/</span><span class="mi">6803028</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">olympics</span><span class="p">.</span><span class="n">db</span>
<span class="n">import</span> <span class="n">sqlalchemy</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="p">.</span><span class="n">create_engine</span><span class="p">(</span><span class="nv">"sqlite:///olympics.db"</span><span class="p">)</span>
<span class="o">%</span><span class="n">load_ext</span> <span class="k">sql</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">sqlite</span><span class="p">:</span><span class="o">///</span><span class="n">olympics</span><span class="p">.</span><span class="n">db</span>
<span class="o">%</span><span class="n">config</span> <span class="n">SqlMagic</span><span class="p">.</span><span class="n">displaycon</span><span class="o">=</span><span class="k">False</span>
</code></pre></div></div>

<h1 id="download-data">Download Data</h1>

<p>Before we can do any manipulation, we will need some data. Let’s download our table with Olympics results now.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">olympics</span> <span class="k">LIMIT</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div></div>

<p>And now we can start querying the database:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span>
    <span class="n">name</span>
<span class="k">FROM</span>
    <span class="n">sqlite_schema</span>
</code></pre></div></div>

<blockquote class="question">
  <div class="box-title question-title" id="question-20"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>What tables are available?</li>
    <li>How are they structured?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-19"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-19" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li><code class="language-plaintext highlighter-rouge">countries</code>, <code class="language-plaintext highlighter-rouge">olympics</code>, <code class="language-plaintext highlighter-rouge">olympics_2022</code></li>
      <li>Each are tables with 10 or more columns.</li>
    </ol>
  </blockquote>
</blockquote>

<h2 id="about-this-dataset">About this dataset</h2>

<p>The data was <a href="https://github.com/UOSCS/Olympic_Athletes">obtained</a> from <a href="https://www.olympedia.org/">Olympedia</a>. The <code class="language-plaintext highlighter-rouge">olympics</code> table contains
234,522 rows and 17 columns. Each row corresponds to an individual athlete competing in an individual Olympic event. The columns are:</p>

<ul>
  <li><strong>athlete_id</strong> - Unique number for each athlete</li>
  <li><strong>name</strong> - Athlete’s name</li>
  <li><strong>sex</strong> - M or F</li>
  <li><strong>birth_year</strong> - 4-digit number</li>
  <li><strong>birth_day</strong> - e.g. 24 July</li>
  <li><strong>birth_place</strong> - town and/or country</li>
  <li><strong>height</strong> - In centimeters (or <code class="language-plaintext highlighter-rouge">NA</code> if data not known)</li>
  <li><strong>weight</strong> - In kilograms (or <code class="language-plaintext highlighter-rouge">NA</code> if data not known)</li>
  <li><strong>team</strong> - Team name</li>
  <li><strong>noc</strong> - National Olympic Committee 3-letter code</li>
  <li><strong>games</strong> - Year and season</li>
  <li><strong>year</strong> - Integer</li>
  <li><strong>season</strong> - Summer or Winter</li>
  <li><strong>city</strong> - Host city</li>
  <li><strong>sport</strong> - Sport</li>
  <li><strong>event</strong> - Event</li>
  <li><strong>medal</strong> - Gold, Silver, Bronze (or <code class="language-plaintext highlighter-rouge">NA</code> if no medal was won)</li>
</ul>

<p>We will use this dataset to practice our data manipulation skills in Galaxy.</p>

<h1 id="choose-your-adventure">Choose your adventure!</h1>

<p>This tutorial is structured a bit differently than most. <strong>You do not have to do the steps in the order they are presented below.</strong> Every section in this tutorial uses the dataset you just uploaded (the <code class="language-plaintext highlighter-rouge">olympics.db</code> file) as input, so you can jump to any section in this tutorial right now if you have a particular data manipulation operation in mind you want to learn more about.</p>

<h1 id="sorting">Sorting</h1>

<p>We have a lot of data in this file, but it is ordered by the athlete ID number, which is a somewhat arbitrary and meaningless number. But we can sort the rows in this file to something more convenient, for example alphabetically by name of the athlete, or chronologically by year of the Olympics.</p>

<p>In <code class="language-plaintext highlighter-rouge">SQL</code> we can use the <code class="language-plaintext highlighter-rouge">ORDER BY</code> clause. We’ll start by limiting our results, as every table in this dataset is quite large.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">NOC</span><span class="p">,</span> <span class="nv">`CLDR display name`</span> <span class="k">FROM</span> <span class="n">countries</span> <span class="k">LIMIT</span> <span class="mi">30</span><span class="p">;</span>
</code></pre></div></div>

<p>You can use <code class="language-plaintext highlighter-rouge">ORDER BY column-name ASC</code> or <code class="language-plaintext highlighter-rouge">ORDER BY column-name DESC</code> to sort the data ascending or descending.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">NOC</span><span class="p">,</span> <span class="nv">`CLDR display name`</span> <span class="k">FROM</span> <span class="n">countries</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">NOC</span> <span class="k">ASC</span> <span class="k">LIMIT</span> <span class="mi">30</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">NOC</span><span class="p">,</span> <span class="nv">`CLDR display name`</span> <span class="k">FROM</span> <span class="n">countries</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">NOC</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">30</span><span class="p">;</span>
</code></pre></div></div>

<p>So let’s sort our file in chronological order, based on the year of the Olympic games:</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-21"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>Which column contains the year?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-20"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-20" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li><code class="language-plaintext highlighter-rouge">year</code></li>
    </ol>

  </blockquote>
</blockquote>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">olympics</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="nb">year</span> <span class="k">LIMIT</span> <span class="mi">30</span><span class="p">;</span>
</code></pre></div></div>

<p>If we wanted to do it in reverse, we could just use <code class="language-plaintext highlighter-rouge">order by year desc</code></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">olympics</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="nb">year</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">30</span><span class="p">;</span>
</code></pre></div></div>

<blockquote class="question">
  <div class="box-title question-title" id="question-22"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>Write a query to access only the first entry.</li>
    <li>Which athlete is listed at the top of the file now?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-21"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-21" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
    <ol>
      <li>We can use <code class="language-plaintext highlighter-rouge">LIMIT</code> for this.
        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">order</span> <span class="k">by</span> <span class="nb">year</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">;</span>
</code></pre></div>        </div>
      </li>
      <li>J. Defert. Who competed in a Tennis event 1896 Summer Olympics in Athens.</li>
    </ol>

  </blockquote>
</blockquote>

<p>This is great, but maybe it would make more sense to sort alphabetically by athlete name <em>within each year</em>.</p>

<h2 id="sort-on-multiple-columns-at-once">Sort on multiple columns at once</h2>

<p>So we want to sort twice, first by year, an then within each year, we sort again alphabetically by name.</p>

<p>We will sort the file in chronological order based on the year of the Olympic games</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">olympics</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="nb">year</span><span class="p">,</span> <span class="n">name</span> <span class="k">LIMIT</span> <span class="mi">30</span><span class="p">;</span>
</code></pre></div></div>

<blockquote class="question">
  <div class="box-title question-title" id="question-23"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <p>Which athlete is listed at the top now? Which discipline (sport) did they compete in?</p>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-22"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-22" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>A. Grigoriadis. He competed in the 500 meters freestyle swimming event.</li>
    </ol>

  </blockquote>
</blockquote>

<h2 id="exercises">Exercises</h2>

<p>Ok, time to train! Let’s see if you can use the sort tool to answer the following questions:</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-exercise-reverse-the-sort"><i class="far fa-question-circle" aria-hidden="true"></i> Exercise: Reverse the sort</div>

  <p>Which athlete comes <em>last by alphabet</em>, in the <em>most recent</em> Olympics?</p>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-23"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-23" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <p><code class="language-plaintext highlighter-rouge">Žolt Peto</code> who competed in table tennis at the 2020 Summer Olympics in Tokyo.</p>

    <p>We do this by repeating the previous sort (on year and then name), but changing the order to <em>descending</em> for both, to get the answer to the top of the file.</p>

  </blockquote>
</blockquote>

<blockquote class="question">
  <div class="box-title question-title" id="question-exercise-sort-by-height"><i class="far fa-question-circle" aria-hidden="true"></i> Exercise: sort by height</div>

  <ol>
    <li>What is the height of the tallest competing athlete? Which athlete(s) are of this height?</li>
    <li>What is the shortest?</li>
    <li>Who was the tallest athlete from the most recent Olympics? How tall were they?</li>
  </ol>

  <blockquote class="tip">
    <div class="box-title tip-title" id="tip-removing-null-values-1"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-removing-null-values-1" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true" ></i> <span>Tip: Removing null values</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
    <p>This will be covered more during the Filtering section, but for now simply use this filter:</p>
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">where</span> <span class="n">height</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span> <span class="p">...</span> <span class="p">;</span>
</code></pre></div>    </div>
  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-hints"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-hints" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Hints</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>We can use <code class="language-plaintext highlighter-rouge">.height</code>, and because we want the tallest on top, we will need to sort in <em>descending</em> (decreasing) order. Unfortunately you might discover there are null values.</li>
      <li>Rerun the same query as step 1, but change the order to <em>ascending</em></li>
      <li>First sort by year (descending), then by height (descending)</li>
    </ol>

  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-answers"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-answers" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Answers</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>Adam Sandurski from Poland is the tallest athlete in the file, at 214 cm tall.</li>
      <li>Lyton Mphande from Seol is the shortest at 127 cm.</li>
      <li>Gennaro Di Mauro, 210 cm. (2020 Summer Olympics in Tokyo)</li>
    </ol>

  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-full-solutions"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-full-solutions" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Full Solutions</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
    <ol>
      <li><code class="language-plaintext highlighter-rouge">select * from olympics  where height is not null order by height desc limit 1;</code></li>
      <li><code class="language-plaintext highlighter-rouge">select * from olympics  where height is not null order by height asc limit 1</code></li>
      <li><code class="language-plaintext highlighter-rouge">select * from olympics  where height is not null order by year desc, height desc limit 1</code></li>
    </ol>
  </blockquote>

</blockquote>

<h1 id="filtering">Filtering</h1>

<p>This file contains a lot of data, but we may only be interested in a subset of this data. For example, we may only want to look at one particular Olympics, or one particular sport. In such cases we can filter the dataset. This will create a new dataset, removing any rows that are not of interest to us (i.e. that don’t meet the criteria we provide).</p>

<p>We will filter the file to show only winter Olympics
Look at the <code class="language-plaintext highlighter-rouge">olympics</code> table and answer the following questions</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-24"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>Which key contains this information?</li>
    <li>Which values can this column have? (make sure to notice capitalisation, ‘Winter’ is not the same as ‘winter’ to these tools)</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-24"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-24" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li><code class="language-plaintext highlighter-rouge">season</code></li>
      <li>The values can be <code class="language-plaintext highlighter-rouge">Summer</code> or <code class="language-plaintext highlighter-rouge">Winter</code> (<code class="language-plaintext highlighter-rouge">select distinct season from olympics</code>)</li>
    </ol>

  </blockquote>
</blockquote>

<p>We’ll be using the <code class="language-plaintext highlighter-rouge">WHERE</code> filter to select entries matching specific conditions:</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-25"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>How would you write the expressions for the following conditions:
      <ol>
        <li><code class="language-plaintext highlighter-rouge">enrolled</code> must be ‘Yes’</li>
        <li><code class="language-plaintext highlighter-rouge">age</code> must be smaller than 75</li>
        <li><code class="language-plaintext highlighter-rouge">height</code> cannot be null</li>
        <li><code class="language-plaintext highlighter-rouge">birthplace</code> cannot be empty</li>
      </ol>
    </li>
    <li>It is also possible to combine multiple conditions, using <code class="language-plaintext highlighter-rouge">and</code>, <code class="language-plaintext highlighter-rouge">or</code>, <code class="language-plaintext highlighter-rouge">not</code> and parentheses
How would you write expressions for the following filtering conditions:
      <ol>
        <li><code class="language-plaintext highlighter-rouge">height</code> is larger than 200 or smaller than 160</li>
        <li><code class="language-plaintext highlighter-rouge">height</code> is larger than 200 and smaller than 210</li>
      </ol>
    </li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-25"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-25" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>The answers are:
        <ol>
          <li><code class="language-plaintext highlighter-rouge">select * from olympics where enrolled = 'Yes'</code></li>
          <li><code class="language-plaintext highlighter-rouge">select * from olympics where age &lt; 75</code></li>
          <li><code class="language-plaintext highlighter-rouge">select * from olympics where height is not null</code>`</li>
          <li><code class="language-plaintext highlighter-rouge">select * from olympics where birthplace != ""</code></li>
        </ol>
      </li>
      <li>The answers are:
        <ol>
          <li><code class="language-plaintext highlighter-rouge">select * from olympics where height &gt; 200 or height &lt; 160</code></li>
          <li><code class="language-plaintext highlighter-rouge">select * from olympics where height &gt; 200 and height &lt; 210</code></li>
        </ol>
      </li>
    </ol>

  </blockquote>
</blockquote>

<p>Ok, great, now that you’ve got the hang of writing expressions for this tool, let’s create a file with only Winter Olympics. Make sure it is contained in an array, in case we want to do further sorting.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">winter</span> <span class="k">AS</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">olympics</span> <span class="k">WHERE</span> <span class="n">season</span> <span class="o">=</span> <span class="s1">'Winter'</span>
</code></pre></div></div>

<blockquote class="question">
  <div class="box-title question-title" id="question-26"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <p>How many entries are in this file? (Hint: use <code class="language-plaintext highlighter-rouge">count(*)</code>)</p>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-26"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-26" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <p>44,680</p>

  </blockquote>
</blockquote>

<p><strong>Repeat</strong> the step for the Summer Olympics</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">summer</span> <span class="k">AS</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">olympics</span> <span class="k">WHERE</span> <span class="n">season</span> <span class="o">=</span> <span class="s1">'Summer'</span>
</code></pre></div></div>

<blockquote class="question">
  <div class="box-title question-title" id="question-27"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>How many lines do you expect in the this file?</li>
    <li>How many lines are in this file? Were you right?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-hints-1"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-hints-1" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Hints</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>Use the <code class="language-plaintext highlighter-rouge">count(*)</code> select</li>
      <li>Be careful to consider whether these counts include the header line of the file or not</li>
    </ol>

  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-answers-1"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-answers-1" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Answers</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>The original file has 234,522 entries, and the Winter Olympics had 44,680 entries. So we would expect 234,522 - 44,680 = 189,842 rows of data.
It is always useful to take a moment to think about the expected outcome, this makes it easier to spot mistakes and will save you time in the long run.</li>
    </ol>

  </blockquote>
</blockquote>

<h2 id="exercises-1">Exercises</h2>

<p>Ok, time to train! let’s see if you can use the <code class="language-plaintext highlighter-rouge">select</code> filter to answer the following questions:</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-exercise-medal-winners"><i class="far fa-question-circle" aria-hidden="true"></i> Exercise: Medal winners</div>

  <ol>
    <li>How many gold medals were handed out?</li>
    <li>How many total medals?</li>
    <li>How many medals were handed out during the 2018 Olympics?</li>
    <li>How many medals were won by individuals with a height between 170 and 180 cm? (inclusive)</li>
    <li>How many gold medals were won by individuals shorter than 160cm or taller than 190?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-hints-2"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-hints-2" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Hints</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ul>
      <li>Column 17 contains information about medals</li>
      <li>The possible values are <code class="language-plaintext highlighter-rouge">Gold</code>, <code class="language-plaintext highlighter-rouge">Silver</code>, <code class="language-plaintext highlighter-rouge">Bronze</code>, and `` (empty).</li>
      <li>Don’t forget that the output (and line count) may include the header line</li>
      <li>Do not use quotes on number columns (e.g. year)</li>
      <li>You may need parentheses for complex conditions</li>
    </ul>

  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-answers-2"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-answers-2" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Answers</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>8,110   (Expression: <code class="language-plaintext highlighter-rouge">SELECT count(*) FROM olympics WHERE medal == "Gold"</code>)</li>
      <li>24,633  (Expression: <code class="language-plaintext highlighter-rouge">SELECT count(*) FROM olympics WHERE medal == "Gold" or medal == "Silver" or medal == "Bronze")</code>, or <code class="language-plaintext highlighter-rouge">medal != null</code>)</li>
      <li>131     (Expression: <code class="language-plaintext highlighter-rouge">SELECT count(*) FROM olympics WHERE medal == "Gold" and year == 2018</code> (note: do not use quotes around <code class="language-plaintext highlighter-rouge">2018</code>, as it is a numerical value))</li>
      <li>8,086   (Expression: <code class="language-plaintext highlighter-rouge">SELECT count(*) FROM olympics WHERE medal is not null and height &gt;= 170 and height &lt;=180</code>)</li>
      <li>2,333   (Expression: <code class="language-plaintext highlighter-rouge">SELECT count(*) FROM olympics WHERE medal is not null and (height &lt; 160 or height &gt; 190)</code> (note: parentheses are important here))</li>
    </ol>

    <p>Note: these numbers are found by determining the number of lines in the file after each filtering step, and subtracting 1 for the header line.</p>

  </blockquote>
</blockquote>

<h1 id="counting">Counting</h1>

<p>A common operation we might want to perform on tables of data, is simple counting. How many times does a certain value appear? For our dataset for instance, we might want to know how many countries participated in each Olympics, how many women, etc; any column that has categorical data that we can count.</p>

<p>Let’s start by simply counting how many different Olympic Games we have in our dataset, and how many times it appears (so how many participations there were each year)</p>

<p>We’ll need to use the <code class="language-plaintext highlighter-rouge">group by</code> syntax which takes a key, and then groups by those values.</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-28"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>How many different Olympic games are in our file?</li>
    <li>Which Olympic games had the most participations? (Tip: use order by)</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-27"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-27" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>
        <p>52 games (<code class="language-plaintext highlighter-rouge">select count(*), games from olympics group by games</code>)</p>

        <p>The resulting file looks something like:</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 615	1896 Summer Olympics
 2503	1900 Summer Olympics
 2643	1904 Summer Olympics
 3213	1908 Summer Olympics
 4610	1912 Summer Olympics
 3448	1920 Summer Olympics
 5242	1924 Summer Olympics
 358	1924 Winter Olympics
 4493	1928 Summer Olympics
 ...
</code></pre></div>        </div>
      </li>
      <li>
        <p>1996 Summer Olympics. (10501 participations)</p>
      </li>
    </ol>

  </blockquote>
</blockquote>

<p>You may have guessed that like <code class="language-plaintext highlighter-rouge">order by</code>, that we could have selected multiple columns in the <code class="language-plaintext highlighter-rouge">group by</code> step. This lets us count on combinations of columns.</p>

<p>Let’s try counting the number of men and women in each olympic games.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">),</span> <span class="n">games</span><span class="p">,</span> <span class="n">sex</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">group</span> <span class="k">by</span> <span class="n">games</span><span class="p">,</span> <span class="n">sex</span>
</code></pre></div></div>

<blockquote class="question">
  <div class="box-title question-title" id="question-29"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <p>You see the resulting file has a line for every combination of the two columns (games and sex), providing the count for each.</p>

  <ol>
    <li>
      <p>How many women were in the first Olympic games?</p>
    </li>
    <li>
      <p>Which Olympic games had the most women participants?</p>
    </li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-28"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-28" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>2 women participated in the 1896 Olympics. (note that we cannot be sure if this is two different women, or 1 woman participating twice, in this query. Do you know any way we could query that? Try it out!)
The results looks something like this:
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2	F	1896 Summer Olympics
43	F	1900 Summer Olympics
17	F	1904 Summer Olympics
55	F	1908 Summer Olympics
97	F	1912 Summer Olympics
132	F	1920 Summer Olympics
269	F	1924 Summer Olympics
</code></pre></div>        </div>
      </li>
      <li>2020 Summer Olympics (4652)</li>
    </ol>

  </blockquote>
</blockquote>

<p>Let’s say we wanted to know how many different sports there were in each Olympics. If we used the counting query above, we would get resultsfor each combination of sport and olympics, with the number of lines (participations) of each. But we don’t really care about the number of lines that have this combination, just the total number of unique sports in each games.</p>

<p>We can use the <code class="language-plaintext highlighter-rouge">distinct</code> filter in our pipeline to discover this. First let’s do our group by and iterate over each resulting group:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">games</span><span class="p">,</span> <span class="n">sport</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">group</span> <span class="k">by</span> <span class="n">games</span><span class="p">;</span>
</code></pre></div></div>

<p>And let’s count all of their appearances</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">games</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="n">sport</span><span class="p">)</span> <span class="k">as</span> <span class="n">sports</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">group</span> <span class="k">by</span> <span class="n">games</span><span class="p">;</span>
</code></pre></div></div>

<p>But those results still aren’t distinct, those numbers are far too high. So let’s use distinct:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">games</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="k">distinct</span> <span class="n">sport</span><span class="p">)</span> <span class="k">as</span> <span class="n">sports</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">group</span> <span class="k">by</span> <span class="n">games</span><span class="p">;</span>
</code></pre></div></div>

<p>We’re almost there! Let’s sort this</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">games</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="k">distinct</span> <span class="n">sport</span><span class="p">)</span> <span class="k">as</span> <span class="n">sports</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">group</span> <span class="k">by</span> <span class="n">games</span> <span class="k">order</span> <span class="k">by</span> <span class="n">sports</span> <span class="k">asc</span><span class="p">;</span>
</code></pre></div></div>

<blockquote class="question">
  <div class="box-title question-title" id="question-30"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>How many sport were in the first Olympics? How many in the latest?</li>
    <li>Which Olympics had the most different sports?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-29"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-29" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>10 and 38.</li>
      <li>The 2020 Summer Olympics had the most different sports (38)</li>
    </ol>

  </blockquote>
</blockquote>

<p>Save the output as something descriptive.</p>

<h2 id="exercises-2">Exercises</h2>

<p>Ok, let’s practice!</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-exercise-number-of-participations-per-country"><i class="far fa-question-circle" aria-hidden="true"></i> Exercise: Number of participations per country</div>

  <ol>
    <li>Which country has had the most participations in the Olympics?</li>
    <li>How many countries participated in the first Olympics? How many in the last?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-hints-3"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-hints-3" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Hints</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>Since we are counting instances of a key, we can use <code class="language-plaintext highlighter-rouge">group by team</code> and then loop over that to print out the length, and the team name of each of those items.</li>
      <li>This is basically the same question as “how many women” participated, try modifying that query.</li>
    </ol>

  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-answers-3"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-answers-3" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Answers</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>The United States with 17,286 participations (<code class="language-plaintext highlighter-rouge">select team, count(team) as count from olympics group by team order by count desc;</code>)</li>
      <li>15 and 250. (<code class="language-plaintext highlighter-rouge">select games, count(distinct team) as teams from olympics group by games;</code>)</li>
    </ol>

  </blockquote>
</blockquote>

<h1 id="grouping">Grouping</h1>

<p>Often we may want to group rows based on a value in a column, and perform some operation on the resulting rows. For example we would like to group the olympics data by one value (e.g. year, country, sport), and determine some value for each group (e.g. number of medals won, average age of athletes, etc).</p>

<p>In the <a href="#counting">counting</a> section of this tutorial we show how to get answers that require a count (e.g. number of medals won), but sometimes we want to do something more complex, like calculating the average height of athletes in a group, say per country or per sport. This section will show some example of these types of questions.</p>

<p>We can use continue to use group by for this, but now we’ll need the max and min aggregate operations. Essentially every time we use <code class="language-plaintext highlighter-rouge">group by</code> we need to use an aggregation like finding the maximum, minimum, or counting the number of results.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-tallest-athlete-per-sport-1"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Tallest athlete per sport</div>

  <p>We would like to answer the following question: <em>How tall was the tallest athlete of each sport?</em></p>

  <blockquote class="question">
    <div class="box-title question-title" id="question-31"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

    <ol>
      <li>How tall was the tallest athlete in basketball? And what about karate?</li>
      <li>Why do some sports have null values?</li>
    </ol>

    <blockquote class="solution">
      <div class="box-title solution-title" id="solution-30"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-30" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
      <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">max</span><span class="p">(</span><span class="n">height</span><span class="p">),</span> <span class="k">min</span><span class="p">(</span><span class="n">height</span><span class="p">),</span><span class="n">sport</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">group</span> <span class="k">by</span> <span class="n">sport</span>
</code></pre></div>      </div>

      <ol>
        <li>Basketball’s tallest athlete was 192cm. For Karate it is 163.</li>
        <li>Our dataset had quite a number of <code class="language-plaintext highlighter-rouge">null</code> (unknown) values in the height column, especially for the earlier Olympics. These are preserved in the outputs.</li>
      </ol>
    </blockquote>
  </blockquote>
</blockquote>

<h2 id="grouping-on-multiple-columns">Grouping on multiple columns</h2>

<p>You may have noticed that we could also provide multiple columns to group on. If we do this, we can compute values for combinations of groups, such as sex and sport, to find e.g. the tallest woman in basketball or the shortest man per Olympics. There are also many more options for the computation we perform, so perhaps we are more interested not in the tallest athlete, but the average height. Let’s perform some of these slightly more advanced queries now.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-average-height-of-men-and-women-per-sport-1"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Average height of men and women per sport</div>

  <p>The question we would like to answer here, is what is the average height for men and women per sport?</p>

  <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">avg</span><span class="p">(</span><span class="n">height</span><span class="p">),</span> <span class="n">sex</span><span class="p">,</span> <span class="n">sport</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">group</span> <span class="k">by</span> <span class="n">sex</span><span class="p">,</span> <span class="n">sport</span><span class="p">;</span>
</code></pre></div>  </div>

  <p>See if you can answer the following questions based on the output file.</p>

  <blockquote class="question">
    <div class="box-title question-title" id="question-32"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

    <ol>
      <li>What is the average height of women participating in archery?</li>
      <li>What is the average height of men participating in <a href="https://en.wikipedia.org/wiki/Ballooning_at_the_1900_Summer_Olympics">ballooning</a>?</li>
      <li>Why do some values have <code class="language-plaintext highlighter-rouge">null</code> instead of a height?</li>
      <li>Why do some sports not have a value for one of the sexes?</li>
      <li>Can you find a sport where women were taller than the men? (Hint: it starts with the letter A)</li>
    </ol>

    <blockquote class="solution">
      <div class="box-title solution-title" id="solution-31"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-31" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

      <ol>
        <li>167.25677031093 cm</li>
        <li>170 cm</li>
        <li>If none of the rows in the group had height data available, it will output <code class="language-plaintext highlighter-rouge">nan</code> (not a number) instead. This is most common for sports that were only featured a few times in the early years of the Olympics.</li>
        <li>Sports such as artistic swimming only exist for women, so no M appears in the data for that group, so there simply is no row for the mean height of men doing artistic swimming in our output.</li>
        <li><a href="https://en.wikipedia.org/wiki/Art_competitions_at_the_Summer_Olympics">Art Competitions</a></li>
      </ol>

      <p>If all went well, your output file should look something like:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GroupBy(sport)	     GroupBy(sex)  mean(height)
Aeronautics         M             nan
Alpine Skiing       F             167.38324708926
Alpine Skiing       M             178.18747142204
Alpinism            M             nan
Archery             F             167.25677031093
Archery             M             178.5865470852
Art Competitions    F             175.33333333333
Art Competitions    M             173.97260273973
Artistic Gymnastics F             156.15316901408
</code></pre></div>      </div>
    </blockquote>
  </blockquote>

</blockquote>

<h2 id="exercises-3">Exercises</h2>

<blockquote class="question">
  <div class="box-title question-title" id="question-exercise-grouping-and-computing"><i class="far fa-question-circle" aria-hidden="true"></i> Exercise: Grouping and computing</div>

  <ol>
    <li>How tall is the shortest woman Badminton player to win a gold medal?</li>
    <li>What is the average height of athletes from team Denmark in the 1964 Olympics? (Note: 1964 has summer and winter olympics)</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-hints-4"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-hints-4" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Hints</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>We need to group on 3 columns: medal, sport and sex, and then select the <code class="language-plaintext highlighter-rouge">min</code>.</li>
      <li>We need to group on 2 columns: country (team) and year, then compute the average over height.</li>
    </ol>
  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-answers-4"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-answers-4" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Answers</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>161 cm.</li>
      <li>mean height: 175.91304347826, standard deviation: 7.0335410308672`</li>
    </ol>
  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-full-solutions-1"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-full-solutions-1" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Full Solutions</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">min</span><span class="p">(</span><span class="n">height</span><span class="p">),</span> <span class="n">medal</span><span class="p">,</span> <span class="n">sport</span><span class="p">,</span> <span class="n">sex</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">group</span> <span class="k">by</span> <span class="n">medal</span><span class="p">,</span> <span class="n">sport</span><span class="p">,</span> <span class="n">sex</span><span class="p">;</span>
<span class="k">select</span> <span class="k">avg</span><span class="p">(</span><span class="n">height</span><span class="p">),</span> <span class="n">team</span><span class="p">,</span> <span class="n">games</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">where</span> <span class="n">team</span> <span class="o">=</span> <span class="nv">"Denmark"</span> <span class="k">group</span> <span class="k">by</span> <span class="n">team</span><span class="p">,</span> <span class="n">games</span><span class="p">;</span>
</code></pre></div>    </div>

  </blockquote>

</blockquote>

<h1 id="computing">Computing</h1>

<p>Sometimes we want to use the data in our column to compute a new value, and add that to the table. For instance, for our dataset we could caluclate athtletes BMI (using height and weight columns), or their age at time of participation (from year of birth and year of the Olymics). By adding these computed values as a new colum to our datset, we can more easily query the dataset for these values. We can do these types of operations on the fly, and then if we like, store them as (temporary) tables.</p>

<p>As an example, let’s calculate the age of each athlete at the time of participation, and add this as a new column to our dataset.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="nb">year</span> <span class="o">-</span> <span class="n">birth_year</span> <span class="k">as</span> <span class="n">age</span><span class="p">,</span> <span class="n">games</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">LIMIT</span> <span class="mi">30</span><span class="p">;</span>
</code></pre></div></div>

<p>If we want to save that result to make it easier to query, then we have a couple options.</p>

<ol>
  <li>
    <p>Don’t store it, calculate on demand. Very storage efficient.</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">noc</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="p">...,</span> <span class="nb">year</span> <span class="o">-</span> <span class="n">birth_year</span> <span class="k">as</span> <span class="n">age</span> <span class="k">from</span> <span class="n">olympics</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a temporary table with this data, great if we only need it temporarily</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">temporary</span> <span class="k">table</span> <span class="n">olympics_ages</span> <span class="k">as</span> <span class="k">select</span> <span class="o">*</span><span class="p">,</span> <span class="nb">year</span> <span class="o">-</span> <span class="n">birth_year</span> <span class="k">as</span> <span class="n">age</span> <span class="k">from</span> <span class="n">olympics</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a new permanent table with this data</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">table</span> <span class="n">olympics_ages</span> <span class="k">as</span> <span class="k">select</span> <span class="o">*</span><span class="p">,</span> <span class="nb">year</span> <span class="o">-</span> <span class="n">birth_year</span> <span class="k">as</span> <span class="n">age</span> <span class="k">from</span> <span class="n">olympics</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Update the existing table by adding it as a new column</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">alter</span> <span class="k">table</span> <span class="n">olympics</span> <span class="k">add</span> <span class="k">column</span> <span class="n">age</span> <span class="nb">int</span><span class="p">;</span>
<span class="k">update</span> <span class="n">olympics</span> <span class="k">set</span> <span class="n">age</span> <span class="o">=</span> <span class="nb">year</span> <span class="o">-</span> <span class="n">birth_year</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
</ol>

<blockquote class="question">
  <div class="box-title question-title" id="question-33"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>How old was Arnaud Boetsch during his Olympic tennis participation?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-32"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-32" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>Arnaud Boetsch is listed on the first two lines, who turned 27 the year of their Olympics.</li>
    </ol>

  </blockquote>
</blockquote>

<p>This was a simple computation, but much more complex mathematical expressions can be computed with this tool. In the exercise below, we will compute the BMI for each athlete as an example.</p>

<h2 id="exercises-4">Exercises</h2>

<p>BMI stands for Body Mass Index, is a metric to provide a very crude measure of how healthy your weight is. The formula to compute BMI is:</p>

\[BMI = weight / (height^2)\]

<p>(with weight in kilograms and height in meters).</p>

<blockquote class="tip">
  <div class="box-title tip-title" id="tip-bmi-is-problematic-1"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-bmi-is-problematic-1" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true" ></i> <span>Tip: BMI is problematic</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
  <p><a href="https://en.wikipedia.org/wiki/Adolphe_Quetelet">Adolphe Quetelet</a>, who invented <a href="https://en.wikipedia.org/wiki/Body_mass_index">BMI</a>, was not a doctor of medicine, instead he was a Belgian astronomer, mathematician, statistician, and sociologist. His data consisted probably entirely of cisgender, white, european men and women <span class="citation"><a href="#Eknoyan_2007">Eknoyan 2007</a></span>.
In his defense, he did argue it should not be used at individual levels, however it came to be used as such due to simplicity. (See <a href="https://en.wikipedia.org/wiki/Body_mass_index#History">Wikipedia’s History section</a>). BMI is a poor measure of health, especially for populations with high muscle content, and cannot be simply re-used as-is with anyone other than Anglo Saxons <span class="citation"><a href="#Caleyachetty_2021">Caleyachetty <i>et al.</i> 2021</a></span>, <a href="https://en.wikipedia.org/wiki/Body_mass_index#Limitations">Wikipedia:Limitations</a>.</p>

  <p>However as it is an easy to calculate metric, we include the calculation here.</p>
</blockquote>

<p>Let’s compute this data for all athletes and add it as a new column!</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-exercise-calculating-bmi"><i class="far fa-question-circle" aria-hidden="true"></i> Exercise: Calculating BMI</div>

  <ol>
    <li>How would you express this calculation in SQL?
      <ul>
        <li>Remember that our height is in cm, and the formula expects height in meters</li>
        <li>And that we have null values, but we can ignore those as they will make the final calculation null as well</li>
      </ul>
    </li>
    <li>What is the BMI for Arnaud Boetsch?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-hints-5"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-hints-5" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Hints</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ul>
      <li>division is <code class="language-plaintext highlighter-rouge">/</code> and multiplication is ` * ` .</li>
      <li>Generally we cannot use <code class="language-plaintext highlighter-rouge">^</code></li>
      <li>Parentheses may be required.</li>
      <li>use <code class="language-plaintext highlighter-rouge">select(.value != null)</code> to remove nulls.</li>
      <li>If that isn’t eough, you can check that the type is a number with <code class="language-plaintext highlighter-rouge">(.value|type) == "number"</code> to ensure it really is a number and not e.g. a string.</li>
      <li>remember to wrap everything in <code class="language-plaintext highlighter-rouge">[...]</code> to retain the data shape</li>
    </ul>

  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-answers-5"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-answers-5" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Answers</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
    <ol>
      <li>
        <p>other variations are possible:</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">temporary</span> <span class="k">table</span> <span class="n">olympics_bmi</span> <span class="k">as</span> <span class="k">select</span> <span class="o">*</span><span class="p">,</span> <span class="n">weight</span> <span class="o">/</span> <span class="p">(</span><span class="n">height</span> <span class="o">/</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="k">as</span> <span class="n">bmi</span> <span class="k">from</span> <span class="n">olympics</span><span class="p">;</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>22.69</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">olympics_bmi</span> <span class="k">where</span> <span class="n">name</span> <span class="k">like</span> <span class="s1">'Arnaud Boetsch'</span><span class="p">;</span>
</code></pre></div>        </div>
      </li>
    </ol>
  </blockquote>
</blockquote>

<h1 id="find-and-replace">Find and Replace</h1>

<p>Often you may need to change the contents of a file a bit to fit the expectations of an analysis tool. For instance, our database uses <code class="language-plaintext highlighter-rouge">null</code> for missing values, but other conventions included leaving the cell empty instead. Or, when working with chromosomal data, you may need to add or remove the <code class="language-plaintext highlighter-rouge">chr</code> prefix from a column before using it as input to a certain tool. In such situations, we can find all occurrences of a certain pattern in our file, and replace it with another value.</p>

<p>If we want to perform such a replacement on a single column in our data, we can use an update statement.</p>

<p>A few of the basics of regular expression, plus some links to further resources are given in the box below:</p>

<!--SNIPPET-->
<blockquote class="tip">   <div class="box-title tip-title" id="tip-regular-expressions-101"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-regular-expressions-101" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Regular Expressions 101</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <p>Regular expressions are a standardized way of describing patterns in textual data. They can be extremely useful for tasks such as finding and replacing data. They can be a bit tricky to master, but learning even just a few of the basics can help you get the most out of Galaxy.</p>   <p><strong>Finding</strong></p>   <p>Below are just a few examples of basic expressions:</p>   <table>   <thead>     <tr>       <th>Regular expression</th>       <th>Matches</th>     </tr>   </thead>   <tbody>     <tr>       <td><code class="language-plaintext highlighter-rouge">abc</code></td>       <td>an occurrence of <code class="language-plaintext highlighter-rouge">abc</code> within your data</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">(abc|def)</code></td>       <td><code class="language-plaintext highlighter-rouge">abc</code> <em>or</em> <code class="language-plaintext highlighter-rouge">def</code></td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">[abc]</code></td>       <td>a single character which is either <code class="language-plaintext highlighter-rouge">a</code>, <code class="language-plaintext highlighter-rouge">b</code>, or <code class="language-plaintext highlighter-rouge">c</code></td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">[^abc]</code></td>       <td>a character that is NOT <code class="language-plaintext highlighter-rouge">a</code>, <code class="language-plaintext highlighter-rouge">b</code>, nor <code class="language-plaintext highlighter-rouge">c</code></td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">[a-z]</code></td>       <td>any lowercase letter</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">[a-zA-Z]</code></td>       <td>any letter (upper or lower case)</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">[0-9]</code></td>       <td>numbers 0-9</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">\d</code></td>       <td>any digit (same as <code class="language-plaintext highlighter-rouge">[0-9]</code>)</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">\D</code></td>       <td>any non-digit character</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">\w</code></td>       <td>any alphanumeric character</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">\W</code></td>       <td>any non-alphanumeric character</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">\s</code></td>       <td>any whitespace</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">\S</code></td>       <td>any non-whitespace character</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">.</code></td>       <td><em>any</em> character</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">\.</code></td>       <td> </td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">{x,y}</code></td>       <td>between <em>x</em> and <em>y</em> repetitions</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">^</code></td>       <td>the beginning of the line</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">$</code></td>       <td>the end of the line</td>     </tr>   </tbody> </table>   <p><strong>Note:</strong> you see that characters such as <code class="language-plaintext highlighter-rouge">*</code>, <code class="language-plaintext highlighter-rouge">?</code>, <code class="language-plaintext highlighter-rouge">.</code>, <code class="language-plaintext highlighter-rouge">+</code> etc have a special meaning in a regular expression. If you want to match on those characters, you can escape them with a backslash. So <code class="language-plaintext highlighter-rouge">\?</code> matches the question mark character exactly.</p>   <p><strong>Examples</strong></p>   <table>   <thead>     <tr>       <th>Regular expression</th>       <th>matches</th>     </tr>   </thead>   <tbody>     <tr>       <td><code class="language-plaintext highlighter-rouge">\d{4}</code></td>       <td>4 digits (e.g. a year)</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">chr\d{1,2}</code></td>       <td><code class="language-plaintext highlighter-rouge">chr</code> followed by 1 or 2 digits</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">.*abc$</code></td>       <td>anything with <code class="language-plaintext highlighter-rouge">abc</code> at the end of the line</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">^$</code></td>       <td>empty line</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">^&gt;.*</code></td>       <td>Line starting with <code class="language-plaintext highlighter-rouge">&gt;</code> (e.g. Fasta header)</td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">^[^&gt;].*</code></td>       <td>Line not starting with <code class="language-plaintext highlighter-rouge">&gt;</code> (e.g. Fasta sequence)</td>     </tr>   </tbody> </table>   <p><strong>Replacing</strong></p>   <p>Sometimes you need to capture the exact value you matched on, in order to use it in your replacement, we do this using capture groups <code class="language-plaintext highlighter-rouge">(...)</code>, which we can refer to using <code class="language-plaintext highlighter-rouge">\1</code>, <code class="language-plaintext highlighter-rouge">\2</code> etc for the first and second captured values. If you want to refer to the whole match, use <code class="language-plaintext highlighter-rouge">&amp;</code>.</p>   <table>   <thead>     <tr>       <th>Regular expression</th>       <th>Input</th>       <th>Captures</th>     </tr>   </thead>   <tbody>     <tr>       <td><code class="language-plaintext highlighter-rouge">chr(\d{1,2})</code></td>       <td><code class="language-plaintext highlighter-rouge">chr14</code></td>       <td><code class="language-plaintext highlighter-rouge">\1 = 14</code></td>     </tr>     <tr>       <td><code class="language-plaintext highlighter-rouge">(\d{2}) July (\d{4})</code></td>       <td>24 July 1984</td>       <td><code class="language-plaintext highlighter-rouge">\1 = 24</code>, <code class="language-plaintext highlighter-rouge">\2 = 1984</code></td>     </tr>   </tbody> </table>   <p>An expression like <code class="language-plaintext highlighter-rouge">s/find/replacement/g</code> indicates a replacement expression, this will search (<code class="language-plaintext highlighter-rouge">s</code>) for any occurrence of <code class="language-plaintext highlighter-rouge">find</code>, and replace it with <code class="language-plaintext highlighter-rouge">replacement</code>. It will do this globally (<code class="language-plaintext highlighter-rouge">g</code>) which means it doesn’t stop after the first match.</p>   <p>Example: <code class="language-plaintext highlighter-rouge">s/chr(\d{1,2})/CHR\1/g</code> will replace <code class="language-plaintext highlighter-rouge">chr14</code> with <code class="language-plaintext highlighter-rouge">CHR14</code> etc.</p>   <p>You can also use replacement modifier such as convert to lower case <code class="language-plaintext highlighter-rouge">\L</code> or upper case <code class="language-plaintext highlighter-rouge">\U</code>. Example: <code class="language-plaintext highlighter-rouge">s/.*/\U&amp;/g</code> will convert the whole text to upper case.</p>   <p>Note: In Galaxy, you are often asked to provide the find and replacement expressions separately, so you don’t have to use the <code class="language-plaintext highlighter-rouge">s/../../g</code> structure.</p>   <p>There is a lot more you can do with regular expressions, and there are a few different flavours in different tools/programming languages, but these are the most important basics that will already allow you to do many of the tasks you might need in your analysis.</p>   <p><strong>Tip:</strong> <a href="https://regexone.com/">RegexOne</a> is a nice interactive tutorial to learn the basics of regular expressions.</p>   <p><strong>Tip:</strong> <a href="https://regex101.com/">Regex101.com</a> is a great resource for interactively testing and constructing your regular expressions, it even provides an explanation of a regular expression if you provide one.</p>   <p><strong>Tip:</strong> <a href="https://extendsclass.com/regex-tester.html">Cyrilex</a> is a visual regular expression tester.</p> </blockquote>
<p><!--END_SNIPPET--></p>

<p>Let’s start with a simple example:
Our file uses a mix of <code class="language-plaintext highlighter-rouge">Athina</code> and <code class="language-plaintext highlighter-rouge">Athens</code> to indicate the Capital City of Greece in the <code class="language-plaintext highlighter-rouge">city</code> column.
Let’s standardize this by replacing occurrences of <code class="language-plaintext highlighter-rouge">Athina</code> with <code class="language-plaintext highlighter-rouge">Athens</code>.</p>

<p>Let’s start by filtering out the old spelling:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">where</span> <span class="n">city</span> <span class="o">=</span> <span class="s1">'Athina'</span> <span class="k">limit</span> <span class="mi">30</span><span class="p">;</span>
</code></pre></div></div>

<p>Let’s try replacing it:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">update</span> <span class="n">olympics</span>
<span class="k">set</span> <span class="n">city</span> <span class="o">=</span> <span class="s1">'Athens'</span>
<span class="k">where</span> <span class="n">city</span> <span class="o">=</span> <span class="s1">'Athina'</span><span class="p">;</span>
</code></pre></div></div>

<p>Look at the file before and after. Athlete 7 (Patrick Chila) near the top of the <code class="language-plaintext highlighter-rouge">olympics.tsv</code> file, had a value of Athina in the city column. Verify that it has been changed to Athens.</p>

<p>This was rather simple example, so let’s try a few more examples with slightly more complex expressions.</p>

<h2 id="exercises-5">Exercises</h2>

<p>You may have noticed that our file has a lot of missing data. Especially for the earlier years, things like height, weight and birthday of athletes was not registered, or simply not known. In some columns you see these missing values have been replaced with an <code class="language-plaintext highlighter-rouge">NA</code> (not available) value. In other columns (for example birth place), the cells have simply been left empty.</p>

<p>Different tools may expect different ways of handling missing data. So you may have to change your missing data from empty to <code class="language-plaintext highlighter-rouge">NA</code>, <code class="language-plaintext highlighter-rouge">NaN</code>, or something else, between analysis steps</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-fill-empty-cells-1"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Fill empty cells</div>

  <p>We will now replace empty cells in the <code class="language-plaintext highlighter-rouge">birth_place</code> column, to use <code class="language-plaintext highlighter-rouge">null</code> instead.</p>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-hints-6"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-hints-6" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Hints</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
    <p>Remember that comparison to nulls is done with <code class="language-plaintext highlighter-rouge">is</code> instead of <code class="language-plaintext highlighter-rouge">=</code></p>
  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-answers-6"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-answers-6" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Answers</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
    <p>other variations are possible:</p>
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">update</span> <span class="n">olympics</span> <span class="k">set</span> <span class="n">birth_place</span> <span class="o">=</span> <span class="k">null</span> <span class="k">where</span> <span class="n">birth_place</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
</code></pre></div>    </div>
  </blockquote>

</blockquote>

<p>Let’s do another example, this one splitting and re-constructing strings.</p>

<p>Look at the <code class="language-plaintext highlighter-rouge">birth_day</code> column. It has values in a format like <code class="language-plaintext highlighter-rouge">12 December</code>. Suppose we have a tool that expects this data to be in the reverse format, <code class="language-plaintext highlighter-rouge">December 12</code>. We would not want to do this manually, but with sql we can make this replacement easily</p>

<p>We will now change the format in birthday column from <code class="language-plaintext highlighter-rouge">day month</code> to <code class="language-plaintext highlighter-rouge">month day</code>, as our boss is American and requested the silly format.</p>

<p>First we need to understand that sqlite does not ship a regex engine, thus we cannot use familiar regular expressions. Instead we can make use of <code class="language-plaintext highlighter-rouge">instr(string, search)</code> to find the location of a substring like ` <code class="language-plaintext highlighter-rouge">, identifying where the day stops and the month starts. Then we can use </code>substr(string, start)<code class="language-plaintext highlighter-rouge"> and </code>substr(string, start, end)` to chop up our date string.</p>

<p>In SQL, concatenation is done with <code class="language-plaintext highlighter-rouge">||</code>.</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-34"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>How do we captures both the day and the month?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-hints-7"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-hints-7" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Hints</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>We should use something like <code class="language-plaintext highlighter-rouge">substr(birth_day, instr(birth_day, ' '))</code></li>
    </ol>

  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-answers-7"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-answers-7" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Answers</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span>
  <span class="n">birth_day</span><span class="p">,</span>
  <span class="n">instr</span><span class="p">(</span><span class="n">birth_day</span><span class="p">,</span> <span class="s1">' '</span><span class="p">)</span> <span class="k">as</span> <span class="n">idx</span><span class="p">,</span>
  <span class="n">substr</span><span class="p">(</span><span class="n">birth_day</span><span class="p">,</span> <span class="n">instr</span><span class="p">(</span><span class="n">birth_day</span><span class="p">,</span> <span class="s1">' '</span><span class="p">))</span> <span class="k">as</span> <span class="k">month</span><span class="p">,</span>
  <span class="n">substr</span><span class="p">(</span><span class="n">birth_day</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">instr</span><span class="p">(</span><span class="n">birth_day</span><span class="p">,</span> <span class="s1">' '</span><span class="p">))</span> <span class="k">as</span> <span class="k">day</span>
<span class="k">from</span> <span class="n">olympics</span>
<span class="k">limit</span> <span class="mi">10</span>
</code></pre></div>    </div>

    <p>We can make our final query:</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span>
  <span class="n">substr</span><span class="p">(</span><span class="n">birth_day</span><span class="p">,</span> <span class="n">instr</span><span class="p">(</span><span class="n">birth_day</span><span class="p">,</span> <span class="s1">' '</span><span class="p">))</span> <span class="o">||</span> <span class="n">substr</span><span class="p">(</span><span class="n">birth_day</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">instr</span><span class="p">(</span><span class="n">birth_day</span><span class="p">,</span> <span class="s1">' '</span><span class="p">))</span> <span class="k">as</span> <span class="n">birth_day_new</span>
<span class="k">from</span> <span class="n">olympics</span>
<span class="k">limit</span> <span class="mi">10</span>
</code></pre></div>    </div>
    <p>And then store this as a new column (using <code class="language-plaintext highlighter-rouge">update</code>) or as a new table (using <code class="language-plaintext highlighter-rouge">create [temporary] table</code>)</p>

  </blockquote>
</blockquote>

<h1 id="removing-columns">Removing Columns</h1>

<p>In sqlite you cannot remove columns, it is not supported. Proper databases like Postgres and MySQL support this operation.
Instead for sqlite you could select the columns you want to keep, create a new table from that, and then delete the original table.</p>

<p>Other databases:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alter table delete column NAME from olympics
</code></pre></div></div>

<h1 id="unique">Unique</h1>

<p>Sometimes, in the course of our data manipulations, we may end up with a file that has duplicate values. In order to filter these out, we can use the <code class="language-plaintext highlighter-rouge">distinct</code> filter.</p>

<p>Let’s say we would like to create a list of all unique athletes (id and name).</p>

<p>First we will just select the <code class="language-plaintext highlighter-rouge">athlete_id</code> and <code class="language-plaintext highlighter-rouge">name</code> columns from our dataset</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">name</span><span class="p">,</span> <span class="n">athlete_id</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">LIMIT</span> <span class="mi">30</span>
</code></pre></div></div>

<blockquote class="question">
  <div class="box-title question-title" id="question-35"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>Do you see duplication? Why is that?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-33"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-33" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>Yes. For all athletes who participated more than once, the row will be identical.</li>
    </ol>

  </blockquote>
</blockquote>

<p>Now let’s remove those duplicates.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">distinct</span> <span class="n">name</span><span class="p">,</span> <span class="n">athlete_id</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">limit</span> <span class="mi">30</span>
</code></pre></div></div>

<blockquote class="question">
  <div class="box-title question-title" id="question-36"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <p>How many unique athletes do we have? Note that you cannot count multiple columns, so choose one that is correct.</p>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-34"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-34" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
    <p>94,733</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="k">distinct</span> <span class="n">athlete_id</span><span class="p">)</span> <span class="k">from</span> <span class="n">olympics</span><span class="p">;</span>
</code></pre></div>    </div>

  </blockquote>
</blockquote>

<h1 id="joining-datasets">Joining Datasets</h1>

<p>This database contains a lot of information, but we may want to add more information. For example if we had a file with information about each country (population, capital city, etc), we could join that information with our Olympics data, to get a single result with all information in every row.</p>

<p>For example, if we would like to be able to group by continent, to e.g. count athletes, medals etc per continent, we will have to add a <code class="language-plaintext highlighter-rouge">continent</code> column to our file. To do this we would need a second file that maps each country to the corresponding continent. This is what we will do in the next hands-on section.</p>

<p>We obtained country information data from <a href="https://datahub.io/core/country-codes">DataHub</a>. More information about this file can be found in the description there. It has 56 columns with a wide variety of data about each country (from country codes, to capital city, languages spoken, etc)</p>

<p>It is available in the countries table.</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-37"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>Which keys(s) in this file are the same as in the <code class="language-plaintext highlighter-rouge">olympics.tsv</code> file?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-35"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-35" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>Both files have a <code class="language-plaintext highlighter-rouge">NOC</code> column with the 3-letter country code (<code class="language-plaintext highlighter-rouge">NOC</code> stands for National Olympic Committee). However, one is lowercase.</li>
    </ol>
  </blockquote>
</blockquote>

<p>We would now like to take our Olympics dataset as the basis, and add columns to every row of this file with some information about the country. In order to join, we will need to have one column that is shared between the two files, on which we can match. The <code class="language-plaintext highlighter-rouge">NOC</code> column is perfect for this because it is a defined standard. Both files also contain a column with the country name in it, which is also a possible candidate to use for joining, but because it is less standardised, it is safer to use the NOC column. For example, if one file uses “Netherlands”, while the other uses “The Netherlands” to indicate the same country, the joining will fail for these rows. So always make sure the columns you join on are compatible!</p>

<p>We can use the join commands.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">left</span> <span class="k">join</span> <span class="n">countries</span> <span class="k">on</span> <span class="n">olympics</span><span class="p">.</span><span class="n">noc</span> <span class="o">=</span> <span class="n">countries</span><span class="p">.</span><span class="n">NOC</span> <span class="k">LIMIT</span> <span class="mi">30</span>
</code></pre></div></div>

<blockquote class="question">
  <div class="box-title question-title" id="question-38"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>What do you expect the output to look like? Were you right?</li>
    <li>How many columns are in the resulting file? What about the NOC column?</li>
    <li>What is a possible downside to this approach?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-36"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-36" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>All the columns from the country information file are added to the end of each row of our olympics dataset</li>
      <li>Our olympics datset had 17 columns, the country information file has 56 columns. Therefore we have 17+56=73 columns columns in our resulting file. This also means the NOC column
we joined on appears twice in our output.</li>
      <li>There is a lot of data duplication in the output now. The exact same country information is added to every line of every athlete from a certain country.
This means much larger response size.
If you do not need all these columns, it could save you a lot of space to select only specific columns that you require.</li>
    </ol>

  </blockquote>
</blockquote>

<h1 id="concatenating">Concatenating</h1>

<p>Concatenation of two files simple means putting the contents of the two files together, one after the other. Our dataset was created in 2021, but since then we’ve had another Olympic event, the 2022 Winter Olympics in Beijing. If we have the same data for this latest Olympics, we could simply add the rows from the 2022 games to our current file with data, in order to create a single file with all data from 1896 to 2022.</p>

<p>View the table <code class="language-plaintext highlighter-rouge">olympics_2022</code>, does it have the same structure as our original <code class="language-plaintext highlighter-rouge">olympics</code> table?</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-39"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>Does the new table have the same structure?</li>
    <li>Can we simply add the lines of the new table to the end of our existing olympics dataset?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-37"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-37" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
    <ol>
      <li>Yes, this file has all the same columns, in the same order, so concatenation should be relatively straightforward.</li>
      <li>Yes.</li>
    </ol>

  </blockquote>
</blockquote>

<p>Since this new dataset has the exact same structure (number and order of columns), we can simple add the lines from this file to the end of our existing <code class="language-plaintext highlighter-rouge">olympic</code> table.
For this, we’ll need to use the <code class="language-plaintext highlighter-rouge">union all</code> which takes two separate sql queries and unifies the results.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">olympics</span>
<span class="k">union</span> <span class="k">all</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">olympics_2022</span>
<span class="k">LIMIT</span> <span class="mi">30</span><span class="p">;</span>
</code></pre></div></div>

<p>(Note: We are limiting the outputs to ensure your browser does not crash loading all of the data.)</p>

<p>Now this only works so simply because our two datasets had the same structure. If your data comes from different sources, you may have to do some additional data manipulation before you can union, e.g. to make sure the columns match, or how each file deals with missing data (empty cells, <code class="language-plaintext highlighter-rouge">NA</code>, <code class="language-plaintext highlighter-rouge">NaN</code> or something else).</p>

<h1 id="conclusion">Conclusion</h1>

<p>These operations covered in the tutorial are just a few examples of some of the most common operations. There are many more available. We encourage you to look around the documentation of sqlite or your database. The more comfortable you are performing these kinds of steps, the more you can get out of SQL!</p>

<h1 id="exercises-putting-it-all-together">Exercises: Putting it all together!</h1>

<p>This section provides a number of exercises that require you to combine two or more of the techniques you learned in this tutorial. This is a great way to practice your data manipulation skills. Full solutions are provided for every exercise (i.e. all tools and settings), but for many of these exercises there will be multiple solutions, so if you obtained the same results in a different way, that is correct too!</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-exercise-1-finding-shortest-lightest-athlete"><i class="far fa-question-circle" aria-hidden="true"></i> Exercise 1: Finding shortest/lightest athlete</div>

  <p>If you have done exercises in the <a href="#sorting">sorting</a> section, you noticed that finding the shortest athlete ever to compete was not easy,
because all the rows with missing height data (<code class="language-plaintext highlighter-rouge">NA</code>) in the column were sorted to the top. We need to filter out these values first, then
perform our sort, so that our answer is on top.</p>

  <ol>
    <li>Find the shortest athlete ever to compete in the Olympics</li>
    <li>Find the shortest athlete of the Winter Olympics</li>
    <li>Find the lightest athlete of the <em>most recent</em> Summer Olympics</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-hints-8"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-hints-8" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Hints</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>You will need to filter out the columns with (<code class="language-plaintext highlighter-rouge">NA</code>) in the height column first</li>
      <li>You will need to filter by season as well</li>
      <li>You will need to filter out missing data in the weight column, filter out Summer Olympics, then sort (by 2 columns)</li>
    </ol>

  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-answers-8"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-answers-8" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Answers</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>Lyton Mphande and  Rosario Briones were both 127 cm tall, competing in boxing and gymnastics respectively</li>
      <li>Carolyn Krau was a 137 cm tall figure skater.</li>
      <li>Flávia Saraiva was the lightest athlete (31kg), she was a Artistic Gymnast from Brazil.</li>
    </ol>

  </blockquote>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-full-solution"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-full-solution" aria-expanded="true"><i class="far fa-eye" aria-hidden="true"></i> <span>Full solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>
        <p>First we filter out the NA values from the height column:</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">where</span> <span class="n">height</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span>
</code></pre></div>        </div>

        <p>Then we can sort by height, in ascending order to get the shortest athletes on top:</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">where</span> <span class="n">height</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span> <span class="k">order</span> <span class="k">by</span> <span class="n">height</span> <span class="k">desc</span> <span class="k">limit</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>We can take the output from the first exercise, and filter for only Winter Olympics:</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">where</span> <span class="n">height</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span> <span class="k">and</span> <span class="n">season</span> <span class="o">=</span> <span class="s1">'Winter'</span> <span class="k">order</span> <span class="k">by</span> <span class="n">height</span> <span class="k">desc</span> <span class="k">limit</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>First we filter out the NA values from the weight column:</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">olympics</span> <span class="k">where</span> <span class="n">weight</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span> <span class="k">and</span> <span class="n">games</span> <span class="o">=</span> <span class="s1">'2020 Summer Olympics'</span> <span class="k">order</span> <span class="k">by</span> <span class="n">weight</span> <span class="k">asc</span> <span class="k">limit</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div>        </div>
      </li>
    </ol>

  </blockquote>

</blockquote>

<p>Congratulations! You have now mastered the basics of data manipulation! There are a lot more data manipulation operations available that you may need. Please explore the tools for yourself, and check back with this tutorial often, we plan to add more sections and exercises over time!</p>

                </section>

                <section aria-label="Tutorial Footer, Feedback, Citation" id="tutorial-footer">
                        <h3>You've Finished the Tutorial</h3>
                        <button id="tutorial-finish-button" class="btn btn-primary" onclick="tutorial_finish()">I finished this tutorial 👍</button>
                        <p style="display: none" id="tutorial-finish-text">Please also consider filling out the <a href="#gtn-feedback">Feedback Form</a> as well!</p>
                        <script>
                        function tutorial_finish() {
                          if(typeof plausible !== 'undefined'){
                            // Plausible may be undefined (script blocked)
                            // or it may be defined, but opted-out (select box/DNT),
                            // which means `plausible()` will work but not send data, *nor* execute the callback.
                            plausible('TutorialComplete', {props: {path: document.location.pathname}})
                          }
                          // since the callback is completely cosmetic, we'll just issue it optimistically.
                          tutorial_finish_finish();
                        }
                        function tutorial_finish_finish() {
                          document.getElementById("tutorial-finish-button").innerText = 'Congrats! Thanks for letting us know! 🎉'
                          document.getElementById("tutorial-finish-button").disabled = true
                          document.getElementById("tutorial-finish-button").disabled = true
                          document.getElementById("tutorial-finish-text").style.display = 'block'
                        }
                        </script>

                
                <blockquote class="key_points">
                    <div class="box-title"><i class="fas fa-key" aria-hidden="true"></i> Key points</div>
                    <ul>
                        
                        <li><p>Basic data manipulation is often needed between steps in a larger scientific analysis in order to connect outputs from one tool to input of another.</p>
</li>
                        
                        <li><p>There are often multiple ways/tools to achieve the same end result</p>
</li>
                        
                        <li><p>Having a basic understanding of data manipulation tools will make it easier to do exploratory data analysis</p>
</li>
                        
                        <li><p>Always read the help text of the tool before using it to get a full understanding of its workings</p>
</li>
                        
                        <li><p>Always try to formulate the output you are expecting from a tool. This will make it easier to spot mistakes as soon as possible.</p>
</li>
                        
                    </ul>
                </blockquote>
                

                <h1>Frequently Asked Questions</h1>
                Have questions about this tutorial? Check out the  <a href="/training-material/topics/data-science/faqs/">FAQ page for the Foundations of Data Science topic</a> to see if your question is listed there.
                If not, please ask your question on the <a href="https://gitter.im/Galaxy-Training-Network/Lobby">GTN Gitter Channel</a> or the
                <a href="https://help.galaxyproject.org">Galaxy Help Forum</a>

                

                


                
                <h1 id="bibliography">References</h1>
                <ol class="bibliography"><li id="Eknoyan_2007">Eknoyan, G., 2007 <b>Adolphe Quetelet (1796 1874) the average man and indices of obesity</b>. Nephrology Dialysis Transplantation 23: 47–51. <a href="https://doi.org/10.1093/ndt/gfm517">10.1093/ndt/gfm517</a></li>
<li id="Caleyachetty_2021">Caleyachetty, R., T. M. Barber, N. I. Mohammed, F. P. Cappuccio, R. Hardy <i>et al.</i>, 2021 <b>Ethnicity-specific BMI cutoffs for obesity based on type 2 diabetes risk in England: a population-based cohort study</b>. The Lancet Diabetes and Endocrinology 9: 419–426. <a href="https://doi.org/10.1016/s2213-8587(21)00088-7">10.1016/s2213-8587(21)00088-7</a></li></ol>
                

                
                <h1 data-toc-skip>Glossary</h1>
                <dl>
                    
                    
                    <dt>SQL</dt>
                    <dd>Structured Query Language</dd>
                    
                </dl>
                

                <h1 id="gtn-feedback">Feedback</h1>
                <p class="text-muted">Did you use this material as an instructor? Feel free to give us feedback on <a href="https://github.com/galaxyproject/training-material/issues/1452">how it went</a>.
                <br>Did you use this material as a learner or student? Click the form below to leave feedback.<i class="fas fa-hand-point-down"></i>
                </p>

                <iframe id="feedback-google" class="google-form" src="https://docs.google.com/forms/d/e/1FAIpQLSd4VZptFTQ03kHkMz0JyW9b6_S8geU5KjNE_tLM0dixT3ZQmA/viewform?embedded=true&entry.1235803833=data-science/data-manipulation-olympics-sql"><a href="https://docs.google.com/forms/d/e/1FAIpQLSd4VZptFTQ03kHkMz0JyW9b6_S8geU5KjNE_tLM0dixT3ZQmA/viewform?embedded=true&entry.1235803833=data-science/data-manipulation-olympics-sql">Feedback Form</a></iframe>

                <h1>Citing this Tutorial</h1>
                <p>
                    <ol>
                        <li id="citation-text">
                            Saskia Hiltemann, Helena Rasche,  <b>Data Manipulation Olympics - SQL (Galaxy Training Materials)</b>. <a href="https://training.galaxyproject.org/training-material/topics/data-science/tutorials/data-manipulation-olympics-sql/tutorial.html">https://training.galaxyproject.org/training-material/topics/data-science/tutorials/data-manipulation-olympics-sql/tutorial.html</a> Online; accessed TODAY
                        </li>
                        <li>
                        Hiltemann, Saskia, Rasche, Helena et al., 2023 <b>Galaxy Training: A Powerful Framework for Teaching!</b> PLOS Computational Biology <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1010752">10.1371/journal.pcbi.1010752</a>
                        </li>
                        <li>
                        Batut et al., 2018 <b>Community-Driven Data Analysis Training for Biology</b> Cell Systems <a href="https://doi.org/10.1016%2Fj.cels.2018.05.012">10.1016/j.cels.2018.05.012</a>
                        </li>
                    </ol>
                </p>

                <!-- collapsible boxcontaining the BibTeX-formatted citation -->
                <blockquote class="details">

                  <div id="citation-bibtex" class="box-title">
                    <button type="button" aria-controls="citation-bibtex" aria-expanded="false">
                      <i class="fas fa-info-circle" aria-hidden="true"></i>
                      <span class="visually-hidden"></span> BibTeX<span role="button" class="fold-unfold fa fa-minus-square" aria-hidden="true"></span>
                    </button>
                   </div>
                   <p style="display: none;">

                   <div class="highlighter-rouge"><div class="highlight"><pre class="highlight">


<code id="citation-code">@misc{data-science-data-manipulation-olympics-sql,
author = "Saskia Hiltemann and Helena Rasche",
	title = "Data Manipulation Olympics - SQL (Galaxy Training Materials)",
	year = "",
	month = "",
	day = "",
	url = "\url{https://training.galaxyproject.org/training-material/topics/data-science/tutorials/data-manipulation-olympics-sql/tutorial.html}",
	note = "[Online; accessed TODAY]"
}
@article{Hiltemann_2023,
	doi = {10.1371/journal.pcbi.1010752},
	url = {https://doi.org/10.1371%2Fjournal.pcbi.1010752},
	year = 2023,
	month = {jan},
	publisher = {Public Library of Science ({PLoS})},
	volume = {19},
	number = {1},
	pages = {e1010752},
	author = {Saskia Hiltemann and Helena Rasche and Simon Gladman and Hans-Rudolf Hotz and Delphine Larivi{\`{e}}re and Daniel Blankenberg and Pratik D. Jagtap and Thomas Wollmann and Anthony Bretaudeau and Nadia Gou{\'{e}} and Timothy J. Griffin and Coline Royaux and Yvan Le Bras and Subina Mehta and Anna Syme and Frederik Coppens and Bert Droesbeke and Nicola Soranzo and Wendi Bacon and Fotis Psomopoulos and Crist{\'{o}}bal Gallardo-Alba and John Davis and Melanie Christine Föll and Matthias Fahrner and Maria A. Doyle and Beatriz Serrano-Solano and Anne Claire Fouilloux and Peter van Heusden and Wolfgang Maier and Dave Clements and Florian Heyl and Björn Grüning and B{\'{e}}r{\'{e}}nice Batut and},
	editor = {Francis Ouellette},
	title = {Galaxy Training: A powerful framework for teaching!},
	journal = {PLoS Comput Biol}
}
</code>
                   </pre></div></div>
                   </p>
                </blockquote>

        
		<h2 id="funding">Funding</h2>
		<p>These individuals or organisations provided funding support for the development of this resource</p>

                
<div class="d-flex flex-wrap">

	<a href="/training-material/hall-of-fame/gallantries/" class="funder-badge">
		
		<div class="avatar">
			
			<img class="funder-avatar" src="https://gallantries.github.io/assets/images/gallantries-logo.png" alt="Logo">
			
		</div>

		<div class="info">
			<div class="name">Gallantries</div>
			<div class="description">
			This project (2020-1-NL01-KA203-064717) is funded with the support of the Erasmus+ programme of the European Union. Their funding has supported a large number of tutorials within the GTN across a wide array of topics.



            
			</div>
		</div>
	</a>

</div>


        


<script>
// update the date on load, or leave fallback of 'today'
const citationTodaysDate = new Date();
document.getElementById("citation-code").innerHTML = document.getElementById("citation-code").innerHTML.replace("TODAY", citationTodaysDate.toDateString());
document.getElementById("citation-text").innerHTML = document.getElementById("citation-text").innerHTML.replace("TODAY", citationTodaysDate.toDateString());
</script>

                <i class="far fa-thumbs-up" aria-hidden="true"></i> Congratulations on successfully completing this tutorial!

                

                

		
                <blockquote class="details follow-up" id="admins-install-missing-tools">
                  <div id="admin-missing-tools" class="box-title">
                    <button type="button" aria-controls="admin-missing-tools" aria-expanded="false">
                      <i class="fas fa-info-circle" aria-hidden="true"></i>
                      <span class="visually-hidden"></span> Galaxy Administrators: Install the missing tools<span role="button" class="fold-unfold fa fa-minus-square" aria-hidden="true"></span>
                    </button>
                   </div>


			<p>You can use Ephemeris's <code>shed-tools install</code> command to install the tools used in this tutorial.</p>
<div class="highlight"><pre class="highlight"><code>shed-tools install [-g GALAXY] [-a API_KEY] -t &lt;(curl https://training.galaxyproject.org/training-material/api/topics/data-science/tutorials/data-manipulation-olympics-sql/tutorial.json | jq .admin_install_yaml -r)</code></pre></div>
<p>Alternatively you can copy and paste the following YAML</p>
<div class="highlight"><pre class="highlight"><code>---
install_tool_dependencies: true
install_repository_dependencies: true
install_resolver_dependencies: true
tools: []
</code></pre></div>
                </blockquote>
		

		<blockquote class="details hide-when-printing" id="feedback-responses">
                  <div id="feedback-response-c" class="box-title">
                    <button type="button" aria-controls="feedback-response-c" aria-expanded="false">
                      <i class="fas fa-info-circle" aria-hidden="true"></i>
                      <span class="visually-hidden"></span> Feedback<span role="button" class="fold-unfold fa fa-minus-square" aria-hidden="true"></span>
                    </button>
                   </div>

		   <p>
		   
		   <table class="charts-css bar show-labels" style="--labels-size: 8rem; overflow-y: hidden">
		   
		   </table>
		   </p>
		
        
        
            <p>No feedback has been recieved yet for this training. Be the first one by filling in the feedback form from <a href="#gtn-feedback">above</a>. </p>
        
		</blockquote>




		
		
		

                </section>

            </div>
        </div>
    </div>
</article>
<br/>
<br/>
<br/>

        </div>
        <footer>
	<hr />
	<div class="container">
		<div class="row">
			<div class="col-sm-3">
				<span style="font-size: 2em">GTN</span>
				<p>
					The GTN provides learners with a free, open repository of online training
					materials, with a focus on hands-on training that aims to be directly applicable for learners.
					We aim to connect researchers and learners with local trainers, and events worldwide.
				</p>
				<p>
					We promote FAIR and Open Science practices worldwide, are committed to the accessibility of this platform and training for everyone.
				</p>
			</div>
			<div class="col-sm-3">
				<span style="font-size: 1.3em">About Us</span>
				<ul class="no-bullets">
					<li><a href="/training-material/about.html">About</a></li>
					<li><a rel="code-of-conduct" href="https://galaxyproject.org/community/coc/">Code of Conduct</a></li>
					<li><a href="/training-material/accessibility.html">Accessibility</a></li>
					<li><a href="/training-material/faqs/gtn/fair_training.html">100% FAIR Training</a></li>
					<li><a href="/training-material/faqs/gtn/collaborative_development.html">Collaborative Development</a></li>
				</ul>
				<span style="font-size: 1.3em">Page</span>
				<ul class="no-bullets">
					
					<li><i class="fas fa-fingerprint" aria-hidden="true"></i><span class="visually-hidden">purl</span><abbr title="Persistent URL">PURL</abbr>: <a href="https://gxy.io/GTN:T00078">gxy.io/GTN:T00078</a></li>
					

					

					<li>
						<a rel="license" href="https://spdx.org/licenses/CC-BY-4.0">
							Content licensed under Creative Commons Attribution 4.0 International License
						</a>
					</li>
					<li>
						<a href="https://github.com/galaxyproject/training-material/edit/main/topics/data-science/tutorials/data-manipulation-olympics-sql/tutorial.md">
						<i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Edit on GitHub
						</a>
					</li>
					<li>
						<a href="https://github.com/galaxyproject/training-material/commits/main/topics/data-science/tutorials/data-manipulation-olympics-sql/tutorial.md">
						<i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> View Changes on GitHub
						</a>
					</li>
				</ul>
			</div>
			<div class="col-sm-3">
				<span style="font-size: 1.3em">Support</span>
				<ul class="no-bullets">
					<li><a rel="me" href="/training-material/faqs/galaxy/">Galaxy FAQs</a></li>
					<li><a rel="me" href="https://help.galaxyproject.org">Galaxy Help Forum</a></li>
					<li><a rel="me" href="http://gxy.io/gtn-slack">GTN Slack Chat</a></li>
					<li><a rel="me" href="https://matrix.to/#/%23Galaxy-Training-Network_Lobby%3Agitter.im">GTN Matrix Chat</a></li>
					<li><a rel="me" href="https://matrix.to/#/#galaxyproject_Lobby:gitter.im">Galaxy Matrix Chat</a></li>
				</ul>
				<span style="font-size: 1.3em">Framework</span>
				<ul class="no-bullets">
					<li>Revision <a href="https://github.com/galaxyproject/training-material/commit/5297fe084ae5d03ac62a0ecb0faa55aed5766f4d">5297fe0</a></li>
					<li><a rel="license" href="https://github.com/galaxyproject/training-material/blob/main/LICENSE.md">MIT</a> Licensed</li>
					<li><a href="https://jekyllrb.com/">Jekyll(4.3.2 | production)</a></li>
				</ul>
			</div>
			<div class="col-sm-3">
				<span style="font-size: 1.3em">Follow Us!</span>
				<ul class="no-bullets">
					<li><span style="fill: var(--hyperlink);"><svg   width="1em"   height="1em"   viewBox="0 0 8.4937906 9.1084023"   version="1.1"   id="svg356"   xmlns="http://www.w3.org/2000/svg"   xmlns:svg="http://www.w3.org/2000/svg">  <g     id="layer1"     transform="translate(-70.566217,-144.26757)">    <path       style="fill-opacity:1;stroke:none;stroke-width:0.0179182"       d="m 76.39081,152.24155 c -0.737138,0.20763 -1.554999,0.29101 -2.311453,0.14333 -0.475335,-0.0928 -0.891898,-0.32923 -1.031589,-0.82423 -0.04356,-0.15434 -0.06132,-0.32388 -0.06142,-0.48378 0.353724,0.0457 0.702251,0.1304 1.057176,0.17407 0.701338,0.0864 1.394702,0.0784 2.096434,0.008 0.744056,-0.0745 1.433711,-0.21546 2.060598,-0.64854 0.243974,-0.16855 0.474672,-0.39133 0.603487,-0.66252 0.181421,-0.38195 0.175886,-0.89336 0.204447,-1.30803 0.0923,-1.34029 0.20588,-2.98599 -1.076708,-3.846 -0.499561,-0.33497 -1.208891,-0.39913 -1.791824,-0.45742 -0.987026,-0.0987 -1.971078,-0.0946 -2.956509,0.0338 -0.841146,0.10961 -1.595223,0.31468 -2.1065,1.0443 -0.493296,0.70396 -0.509564,1.52563 -0.509564,2.34729 0,1.37831 -0.05534,2.87744 0.595934,4.13911 0.504703,0.97774 1.498709,1.29589 2.52184,1.41832 0.473239,0.0566 0.96049,0.0849 1.434158,0.0172 0.328853,-0.0471 0.650325,-0.0999 0.966886,-0.20511 0.08957,-0.0298 0.266911,-0.0614 0.322027,-0.14486 0.04089,-0.0618 0.0099,-0.15812 0.0035,-0.22545 -0.01611,-0.16924 -0.02094,-0.34967 -0.02096,-0.51963 m -1.594723,-5.48298 c 0.214822,-0.25951 0.315898,-0.56088 0.60922,-0.75705 0.687899,-0.46006 1.692038,-0.11202 1.992096,0.63161 0.214571,0.5317 0.140174,1.15913 0.140174,1.72017 v 1.03925 c 0,0.0911 0.04009,0.30954 -0.01842,0.38339 -0.04193,0.053 -0.173018,0.0287 -0.232436,0.0287 h -0.698809 v -1.88142 c 0,-0.28413 0.04813,-0.63823 -0.09912,-0.89591 -0.234746,-0.4108 -0.875019,-0.36105 -1.092116,0.0358 -0.123368,0.22555 -0.116792,0.50369 -0.116792,0.75257 v 1.0751 h -0.931726 v -1.05718 c 0,-0.2555 0.0024,-0.53932 -0.121773,-0.77049 -0.21432,-0.39919 -0.857782,-0.44403 -1.090217,-0.0358 -0.147324,0.25871 -0.09604,0.61056 -0.09604,0.89591 v 1.88142 H 72.09042 v -1.98893 c 0,-0.4711 -0.01604,-0.95902 0.233201,-1.3797 0.585269,-0.98786 2.133584,-0.74836 2.472454,0.32253 z"       id="path2318" />  </g></svg></span> <a rel="me" href="https://mstdn.science/@gtn">Mastodon</a></li>
					<li><span style="fill: var(--hyperlink);"><svg  viewBox="0 0 64 57" width="1em" ><path style="fill-opacity:1;stroke:none;stroke-width:0.0179182" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805ZM50.127 3.805C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745Z"></path></svg></span><a rel="me" href="https://bsky.app/profile/galaxytraining.bsky.social"> Bluesky</a></li>
				</ul>

				<span style="font-size: 1.3em">Publications</span>
				<ul class="no-bullets">
					<li><a href="https://doi.org/10.1371/journal.pcbi.1010752">Hiltemann et al. 2023</a></li>
					<li><a href="https://doi.org/10.1016/j.cels.2018.05.012"> Batut et al. 2018</a></li>
					<li><a href="/training-material/faqs/gtn/gtn_citing.html">Citing Us</a></li>
				</ul>
			</div>
		</div>
	</div>
</footer>


        <script  async defer src='/training-material/assets/js/bundle.main.40d4e218.js'></script>

	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	
	

    </body>
</html>