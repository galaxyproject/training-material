---
layout: base_slides
logo: "GTN"

title: "Galaxy Installation with Ansible"
questions:
  - How does it all connect?
  - What steps will we go through?
objectives:
  - Get a high-level overview of a Galaxy server setup
key_points:
  - Everything can be accomplished with Ansible roles from Galaxy
  - You can easily deploy a base Galaxy, or one with more features.
contributors:
  - slugger70
  - natefoo
---

## Install PostgreSQL & Galaxy extensions

![Graph showing a Postgres DB](../../images/ansible-galaxy-intro-0.png)

---

## Install Galaxy & Attach Storage

![Galaxy is now attached to the DB. uWSGI, storage, and compute are attached to Galaxy](../../images/ansible-galaxy-intro-1.png)

---

## Configure NGINX

![NGINX is added to proxy uWSGI](../../images/ansible-galaxy-intro-2.png)

---

## Configure Job Handlers

![Job Handlers are added, between Galaxy and the Compute](../../images/ansible-galaxy-intro-3.png)

---

## Install & Configure Slurm

![Slurm is attached to the handlers](../../images/ansible-galaxy-intro-4.png)

---

## Connect CVMFS & Reference Data

![CVMFS is attached to storage + compute + galaxy](../../images/ansible-galaxy-intro-5.png)

---

## Setup Remote Compute

![Remote compute site, with Pulsar and compute is attached to the job handlers](../../images/ansible-galaxy-intro-6.png)

---

## Major Initial Decisions

* Where to install Galaxy
* Where to store Galaxy datasets
* Database location

---
## Where to install Galaxy

* Must be at same path on cluster - more on this in cluster sessions

---
## Where to store Galaxy datasets

* Must be at same path on cluster
* Consider future scalability

---
## Database location

* Fast local, reliable storage
* Consider future scalability

---
## Basic best practices

* Run as an **unprivileged user**
* When possible, separate *code* from *data* and *configs*
* Write protect code and configs

.left[All of these practices are supported in the [galaxyproject.galaxy][galaxy-role] Ansible role and covered in the [Galaxy Installation with Ansible][ansible-galaxy-tutorial] tutorial!]

[galaxy-role]: https://galaxy.ansible.com/galaxyproject/galaxy
[ansible-galaxy-tutorial]: {% link topics/admin/tutorials/ansible-galaxy/tutorial.md %}
