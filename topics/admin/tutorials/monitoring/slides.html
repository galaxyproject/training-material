---
layout: tutorial_slides
logo: "GTN"

title: "Galaxy Monitoring with Telegraf and Grafana"
questions:
  - How to monitor Galaxy with Telegraf
  - How do I set up InfluxDB
  - How can I make graphs in Grafana?
  - How can I best alert on important metrics?
objectives:
  - Setup InfluxDB
  - Setup Telegraf
  - Setup Grafana
  - Create several charts
key_points:
  - Telegraf provides an easy solution to monitor servers
  - Galaxy can send metrics to Telegraf
  - Telegraf can run arbitrary commands like `gxadmin`, which provides influx formatted output
  - InfluxDB can collect metrics from Telegraf
  - Use Grafana to visualise these metrics, and monitor their values
contributors:
  - natefoo
  - bgruening
  - slugger70
  - hexylena
---

# Telegraf, InfluxDB, and Grafana

General purpose tools for monitoring systems and services.

Tool     | Use
---      | ---
[Telegraf](https://github.com/influxdata/telegraf) | plugin-driven server agent for collecting & reporting metrics
[Influxdb](https://github.com/influxdata/influxdb/) | purpose built time series database
[Grafana](https://grafana.com/)  | dashboard for beautiful analytics and monitoring

Dataflow:

- Galaxy produces data
- Telegraf consumes and buffers it, before sending it to
- InfluxDB which stores the data
- And Grafana is used to visualise it

---
# Infrastructure for Grafana

* Everything captured in Galaxy Ansible [infrastructure-playbook](https://github.com/galaxyproject/infrastructure-playbook/) repository.
* Ansible [playbook](https://github.com/dj-wasabi/ansible-telegraf) to install Telegraf.
* Ansible [tasks](https://github.com/galaxyproject/infrastructure-playbook/blob/master/roles/stats/tasks/redhat.yml) for installing InfluxDB and Grafana.

---
# Grafana showcase

* usegalaxy.eu [public server](https://stats.galaxyproject.eu)
* usegalaxy.org.au [public server](https://stats.genome.edu.au)
* usegalaxy.org private server

If you see a dashboard you can export its configuration and put it on your Grafana with your data. Copy away!
