<!DOCTYPE html>
<html lang="en" dir="auto">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Hands-on: Making sense of a newly assembled genome / Making sense of a newly assembled genome / Assembly</title>
        
            <meta name="google-site-verification" content="9mOXn2JL833-i7-aioCCEuIdG4_tb6qjwUozB5GJnPQ" />

<!-- JavaScript Error Monitoring, and performance tracking. -->
<script
  src="https://browser.sentry-cdn.com/7.52.1/bundle.tracing.min.js"
  integrity="sha384-muuFXKS3752PNA4rPm9Uq6BLvOfV4CXyr9MHDBPvozOJJUWLKkogEFWOIRoVps43"
  crossorigin="anonymous"
></script>
<script type="text/javascript">
if(localStorage.getItem('sentry-opt-out') !== 'opt-out' && navigator.doNotTrack !== "1") {
	console.log("Sentry: opt-in");
	Sentry.init({
		dsn: "https://45e0ec6e4373462b92969505df37cf40@sentry.galaxyproject.org/10",
		release: "galaxy-training-network@e763a425f5a79c336fbd46da5e6624bf46cd580f",
		integrations: [new Sentry.BrowserTracing(), new Sentry.Replay()],
		sampleRate: 0.1,
		tracesSampleRate: 0.1,
		// Capture Replay for no sessions by default
		replaysSessionSampleRate: 0.01,
		// plus for 1% of sessions with an error
		replaysOnErrorSampleRate: 0.01,
		// PII OFF
		sendDefaultPii: false, // Off by default but just in case.
		environment: "production",
	});
}
</script>

<!-- Page view tracking -->
<script defer data-domain="training.galaxyproject.org" src="https://plausible.galaxyproject.eu/js/plausible.js"></script>
<script>
if(localStorage.getItem('plausible-opt-out') !== 'opt-out' && navigator.doNotTrack !== "1") {
	localStorage.removeItem("plausible_ignore")
	console.log("Plausible: opt-in");
	window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }
} else {
	// if they're opting-out, or DNT
	// we might get one page by accident but we won't get future ones.
	localStorage.setItem("plausible_ignore", "true")
}
</script>

        
        <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon">
        <link rel="alternate" type="application/atom+xml" href="/training-material/feed.xml">
        <link rel="canonical" href="https://training.galaxyproject.org/training-material/topics/assembly/tutorials/ecoli_comparison/tutorial.html">
        <link rel="license" href="https://spdx.org/licenses/CC-BY-4.0">
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Regular-102a.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Bold-102a.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Italic-102a.woff2" as="font" type="font/woff2" crossorigin>
        
        <link rel="preload" href="/training-material/assets/css/main.css?v=3" as="style">
        <link rel='preload' href='/training-material/assets/js/bundle.theme.f1f2de89.js' as='script'>
<link rel='preload' href='/training-material/assets/js/bundle.main.40d4e218.js' as='script'>
        <link rel="stylesheet" href="/training-material/assets/css/main.css?v=3">
        <link rel="manifest" href="/training-material/manifest.json">
        <meta name="theme-color" content="#2c3143"/>
	

        <meta name="DC.identifier" content="https://github.com/galaxyproject/training-material">
<meta name="DC.type" content="text">
<meta name="DC.title" content="Making sense of a newly assembled genome">
<meta name="DC.publisher" content="Galaxy Training Network">
<meta name="DC.date" content="2024-06-24 07:50:15 +0000">
<meta name="DC.creator" content="Anton Nekrutenko">
<meta name="DC.creator" content="Delphine Lariviere">
<meta name="DC.creator" content="Helena Rasche"><meta name="description" content="DNA sequence data has become an indispensable tool for Molecular Biology & Evolutionary Biology. Study in these fields now require a genome sequence to work from. We call this a 'Reference Sequence.' We need to build a reference for each species. We do this by Genome Assembly. De novo Genome Assembly is the process of reconstructing the original DNA sequence from the fragment reads alone.">
        <meta property="og:site_name" content="Galaxy Training Network">
	<meta property="og:title" content="Assembly / Making sense of a newly assembled genome / Hands-on: Making sense of a newly assembled genome">
        <meta property="og:description" content="DNA sequence data has become an indispensable tool for Molecular Biology & Evolutionary Biology. Study in these fields now require a genome sequence to work from. We call this a 'Reference Sequence.' We need to build a reference for each species. We do this by Genome Assembly. De novo Genome Assembly is the process of reconstructing the original DNA sequence from the fragment reads alone.">
        <meta property="og:image" content="https://galaxy-training.s3.amazonaws.com/social/topics/assembly/tutorials/ecoli_comparison/tutorial.png">
	<script type="application/ld+json">


{
  "@context": "http://schema.org",
  "@type": "LearningResource",
  "http://purl.org/dc/terms/conformsTo": {
    "@id": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
    "@type": "CreativeWork"
  },
  "audience": {
    "@type": "EducationalAudience",
    "educationalRole": "Students"
  },
  "citation": {
    "@type": "CreativeWork",
    "name": "Community-Driven Data Analysis Training for Biology",
    "url": "https://doi.org/10.1016/j.cels.2018.05.012"
  },
  "discussionUrl": "https://gitter.im/Galaxy-Training-Network/Lobby",
  "headline": "Making sense of a newly assembled genome",
  "interactivityType": "mixed",
  "isAccessibleForFree": true,
  "isFamilyFriendly": true,
  "license": "https://spdx.org/licenses/CC-BY-4.0.html",
  "producer": {
    "@type": "Organization",
    "http://purl.org/dc/terms/conformsTo": {
      "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
      "@type": "Organization"
    },
    "id": "https://training.galaxyproject.org",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "legalName": "Galaxy Training Network",
    "alternateName": "GTN",
    "url": "https://training.galaxyproject.org",
    "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
    "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
    "keywords": [
      "galaxy",
      "bioinformatics",
      "training",
      "fair",
      "accessible"
    ],
    "status": "active",
    "foundingDate": "2015-06-29",
    "socialMedia": "https://mstdn.science/@gtn",
    "type": "project"
  },
  "provider": {
    "@type": "Organization",
    "http://purl.org/dc/terms/conformsTo": {
      "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
      "@type": "Organization"
    },
    "id": "https://training.galaxyproject.org",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "legalName": "Galaxy Training Network",
    "alternateName": "GTN",
    "url": "https://training.galaxyproject.org",
    "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
    "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
    "keywords": [
      "galaxy",
      "bioinformatics",
      "training",
      "fair",
      "accessible"
    ],
    "status": "active",
    "foundingDate": "2015-06-29",
    "socialMedia": "https://mstdn.science/@gtn",
    "type": "project"
  },
  "sourceOrganization": {
    "@type": "Organization",
    "http://purl.org/dc/terms/conformsTo": {
      "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
      "@type": "Organization"
    },
    "id": "https://training.galaxyproject.org",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "legalName": "Galaxy Training Network",
    "alternateName": "GTN",
    "url": "https://training.galaxyproject.org",
    "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
    "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
    "keywords": [
      "galaxy",
      "bioinformatics",
      "training",
      "fair",
      "accessible"
    ],
    "status": "active",
    "foundingDate": "2015-06-29",
    "socialMedia": "https://mstdn.science/@gtn",
    "type": "project"
  },
  "workTranslation": [

  ],
  "creativeWorkStatus": "Active",
  "dateModified": "2024-06-24 07:50:15 +0000",
  "datePublished": "2018-06-14 14:42:30 +0000",
  "copyrightHolder": {
    "@type": "Organization",
    "http://purl.org/dc/terms/conformsTo": {
      "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
      "@type": "Organization"
    },
    "id": "https://training.galaxyproject.org",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "legalName": "Galaxy Training Network",
    "alternateName": "GTN",
    "url": "https://training.galaxyproject.org",
    "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
    "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
    "keywords": [
      "galaxy",
      "bioinformatics",
      "training",
      "fair",
      "accessible"
    ],
    "status": "active",
    "foundingDate": "2015-06-29",
    "socialMedia": "https://mstdn.science/@gtn",
    "type": "project"
  },
  "funder": [

  ],
  "funding": [

  ],
  "identifier": "https://gxy.io/GTN:T00032",
  "accessMode": [
    "textual",
    "visual"
  ],
  "accessModeSufficient": [
    "textual",
    "visual"
  ],
  "accessibilityControl": [
    "fullKeyboardControl",
    "fullMouseControl"
  ],
  "accessibilityFeature": [
    "alternativeText",
    "tableOfContents"
  ],
  "accessibilitySummary": "The text aims to be as accessible as possible. Image descriptions will vary per tutorial, from images being completely inaccessible, to images with good descriptions for non-visual users.",
  "isPartOf": {
    "@type": "CreativeWork",
    "name": "Assembly",
    "description": "DNA sequence data has become an indispensable tool for Molecular Biology & Evolutionary Biology. Study in these fields now require a genome sequence to work from. We call this a 'Reference Sequence.' We need to build a reference for each species. We do this by Genome Assembly. De novo Genome Assembly is the process of reconstructing the original DNA sequence from the fragment reads alone.",
    "url": "https://training.galaxyproject.org/training-material/topics/assembly/"
  },
  "abstract": "In this tutorial we begin with a new genome assembly just produced in the [Unicycler tutorial](http://localhost:4000/training-material//topics/assembly/tutorials/unicycler-assembly/tutorial.html). This is an assembly of *E. coli* C, which we will be comparing to assemblies of all other complete genes of this species.",
  "learningResourceType": "e-learning",
  "name": "Making sense of a newly assembled genome",
  "url": "https://training.galaxyproject.org/training-material/topics/assembly/tutorials/ecoli_comparison/tutorial.html",
  "version": 29,
  "timeRequired": "PT4H",
  "teaches": "- Identification of the most closely related genome to my new assembly\n- Perform sequence comparison to locate rearrangements\n- Identify genes located in deletions",
  "keywords": [
    "Assembly",
    "gmod",
    "prokaryote",
    "microgalaxy",
    "jbrowse1"
  ],
  "description": "## Abstract\n\nIn this tutorial we begin with a new genome assembly just produced in the [Unicycler tutorial](http://localhost:4000/training-material//topics/assembly/tutorials/unicycler-assembly/tutorial.html). This is an assembly of *E. coli* C, which we will be comparing to assemblies of all other complete genes of this species.\n\n\n## About This Material\n\nThis is a Hands-on Tutorial from the GTN which is usable either for individual self-study, or as a teaching material in a classroom.\n\n\n## Questions this  will address\n\n - I just assembled a genome. How does it compare with already sequenced genomes?\n - How do I find rearranged, inserted, or deleted regions?\n\n\n## Learning Objectives\n\n- Identification of the most closely related genome to my new assembly\n- Perform sequence comparison to locate rearrangements\n- Identify genes located in deletions\n\n",
  "inLanguage": {
    "@type": "Language",
    "name": "English",
    "alternateName": "en"
  },
  "competencyRequired": [
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/introduction/",
      "name": "Introduction to Galaxy Analyses",
      "description": "Introduction to Galaxy Analyses",
      "provider": {
        "@type": "Organization",
        "http://purl.org/dc/terms/conformsTo": {
          "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
          "@type": "Organization"
        },
        "id": "https://training.galaxyproject.org",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "legalName": "Galaxy Training Network",
        "alternateName": "GTN",
        "url": "https://training.galaxyproject.org",
        "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
        "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
        "keywords": [
          "galaxy",
          "bioinformatics",
          "training",
          "fair",
          "accessible"
        ],
        "status": "active",
        "foundingDate": "2015-06-29",
        "socialMedia": "https://mstdn.science/@gtn",
        "type": "project"
      }
    },
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/sequence-analysis/tutorials/quality-control/slides.html",
      "name": "Quality Control",
      "description": "Slides for 'Quality Control' tutorial",
      "learningResourceType": "slides",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "http://purl.org/dc/terms/conformsTo": {
          "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
          "@type": "Organization"
        },
        "id": "https://training.galaxyproject.org",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "legalName": "Galaxy Training Network",
        "alternateName": "GTN",
        "url": "https://training.galaxyproject.org",
        "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
        "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
        "keywords": [
          "galaxy",
          "bioinformatics",
          "training",
          "fair",
          "accessible"
        ],
        "status": "active",
        "foundingDate": "2015-06-29",
        "socialMedia": "https://mstdn.science/@gtn",
        "type": "project"
      }
    },
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/sequence-analysis/tutorials/quality-control/tutorial.html",
      "name": "Quality Control",
      "description": "Hands-on for 'Quality Control' tutorial",
      "learningResourceType": "e-learning",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "http://purl.org/dc/terms/conformsTo": {
          "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
          "@type": "Organization"
        },
        "id": "https://training.galaxyproject.org",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "legalName": "Galaxy Training Network",
        "alternateName": "GTN",
        "url": "https://training.galaxyproject.org",
        "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
        "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
        "keywords": [
          "galaxy",
          "bioinformatics",
          "training",
          "fair",
          "accessible"
        ],
        "status": "active",
        "foundingDate": "2015-06-29",
        "socialMedia": "https://mstdn.science/@gtn",
        "type": "project"
      }
    },
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/assembly/tutorials/unicycler-assembly/slides.html",
      "name": "Unicycler Assembly",
      "description": "Slides for 'Unicycler Assembly' tutorial",
      "learningResourceType": "slides",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "http://purl.org/dc/terms/conformsTo": {
          "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
          "@type": "Organization"
        },
        "id": "https://training.galaxyproject.org",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "legalName": "Galaxy Training Network",
        "alternateName": "GTN",
        "url": "https://training.galaxyproject.org",
        "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
        "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
        "keywords": [
          "galaxy",
          "bioinformatics",
          "training",
          "fair",
          "accessible"
        ],
        "status": "active",
        "foundingDate": "2015-06-29",
        "socialMedia": "https://mstdn.science/@gtn",
        "type": "project"
      }
    },
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/assembly/tutorials/unicycler-assembly/tutorial.html",
      "name": "Unicycler Assembly",
      "description": "Hands-on for 'Unicycler Assembly' tutorial",
      "learningResourceType": "e-learning",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "http://purl.org/dc/terms/conformsTo": {
          "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
          "@type": "Organization"
        },
        "id": "https://training.galaxyproject.org",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "legalName": "Galaxy Training Network",
        "alternateName": "GTN",
        "url": "https://training.galaxyproject.org",
        "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
        "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
        "keywords": [
          "galaxy",
          "bioinformatics",
          "training",
          "fair",
          "accessible"
        ],
        "status": "active",
        "foundingDate": "2015-06-29",
        "socialMedia": "https://mstdn.science/@gtn",
        "type": "project"
      }
    }
  ],
  "author": [
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "http://purl.org/dc/terms/conformsTo": {
        "@id": "https://bioschemas.org/profiles/Person/0.3-DRAFT",
        "@type": "CreativeWork"
      },
      "url": "https://training.galaxyproject.org/training-material/hall-of-fame/nekrut/",
      "mainEntityOfPage": "https://training.galaxyproject.org/training-material/hall-of-fame/nekrut/",
      "name": "Anton Nekrutenko",
      "image": "https://avatars.githubusercontent.com/nekrut",
      "description": "A contributor to the GTN project.",
      "memberOf": [
        {
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
            "@type": "Organization"
          },
          "id": "https://training.galaxyproject.org",
          "email": "galaxytrainingnetwork@gmail.com",
          "name": "Galaxy Training Network",
          "legalName": "Galaxy Training Network",
          "alternateName": "GTN",
          "url": "https://training.galaxyproject.org",
          "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
          "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
          "keywords": [
            "galaxy",
            "bioinformatics",
            "training",
            "fair",
            "accessible"
          ],
          "status": "active",
          "foundingDate": "2015-06-29",
          "socialMedia": "https://mstdn.science/@gtn",
          "type": "project"
        }
      ]
    },
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "http://purl.org/dc/terms/conformsTo": {
        "@id": "https://bioschemas.org/profiles/Person/0.3-DRAFT",
        "@type": "CreativeWork"
      },
      "url": "https://training.galaxyproject.org/training-material/hall-of-fame/delphine-l/",
      "mainEntityOfPage": "https://training.galaxyproject.org/training-material/hall-of-fame/delphine-l/",
      "name": "Delphine Lariviere",
      "image": "https://avatars.githubusercontent.com/delphine-l",
      "description": "A contributor to the GTN project.",
      "memberOf": [
        {
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
            "@type": "Organization"
          },
          "id": "https://training.galaxyproject.org",
          "email": "galaxytrainingnetwork@gmail.com",
          "name": "Galaxy Training Network",
          "legalName": "Galaxy Training Network",
          "alternateName": "GTN",
          "url": "https://training.galaxyproject.org",
          "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
          "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
          "keywords": [
            "galaxy",
            "bioinformatics",
            "training",
            "fair",
            "accessible"
          ],
          "status": "active",
          "foundingDate": "2015-06-29",
          "socialMedia": "https://mstdn.science/@gtn",
          "type": "project"
        }
      ],
      "identifier": "https://orcid.org/0000-0001-6421-3484",
      "orcid": "https://orcid.org/0000-0001-6421-3484"
    },
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "http://purl.org/dc/terms/conformsTo": {
        "@id": "https://bioschemas.org/profiles/Person/0.3-DRAFT",
        "@type": "CreativeWork"
      },
      "url": "https://training.galaxyproject.org/training-material/hall-of-fame/hexylena/",
      "mainEntityOfPage": "https://training.galaxyproject.org/training-material/hall-of-fame/hexylena/",
      "name": "Helena Rasche",
      "image": "https://avatars.githubusercontent.com/hexylena",
      "description": "A contributor to the GTN project.",
      "memberOf": [
        {
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.2-DRAFT-2019_07_19",
            "@type": "Organization"
          },
          "id": "https://training.galaxyproject.org",
          "email": "galaxytrainingnetwork@gmail.com",
          "name": "Galaxy Training Network",
          "legalName": "Galaxy Training Network",
          "alternateName": "GTN",
          "url": "https://training.galaxyproject.org",
          "logo": "https://training.galaxyproject.org/training-material/assets/images/GTNLogo1000.png",
          "fundingModel": "The GTN's infrastructure relies on GitHub and the Galaxy Project for hosting costs. There are no full time paid staff members of the GTN. Individuals are occasionally funded on GTN-adjacent projects.",
          "keywords": [
            "galaxy",
            "bioinformatics",
            "training",
            "fair",
            "accessible"
          ],
          "status": "active",
          "foundingDate": "2015-06-29",
          "socialMedia": "https://mstdn.science/@gtn",
          "type": "project"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/gallantries/",
          "name": "Gallantries: Bridging Training Communities in Life Science, Environment and Health",
          "description": "This project ([`2020-1-NL01-KA203-064717`](https://erasmus-plus.ec.europa.eu/projects/search/details/2020-1-NL01-KA203-064717)) is funded with the support of the Erasmus+ programme of the European Union. Their funding has supported a large number of tutorials within the GTN across a wide array of topics.\n![eu flag with the text: with the support of the erasmus programme of the european union](https://gallantries.github.io/assets/images/logosbeneficaireserasmusright_en.jpg)\n![erasmus plus logo](https://www.erasmusplus.nl/assets/images/logo.png)\n",
          "url": "https://www.erasmusplus.nl"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/by-covid/",
          "name": "BeYond-COVID",
          "description": "BY-COVID is an EC funded project that tackles the data challenges that can hinder effective pandemic response.\n\nThis project has received funding from the European Union’s Horizon Europe research and innovation programme under grant agreement № 101046203 (BY-COVID)\n",
          "url": "https://by-covid.org/"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/erasmusmc/",
          "name": "ErasmusMC",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://www.erasmusmc.nl"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/elixir-europe/",
          "name": "ELIXIR Europe",
          "description": "An organization supporting the Galaxy Training Network",
          "url": "https://elixir-europe.org"
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "http://purl.org/dc/terms/conformsTo": {
            "@id": "https://bioschemas.org/profiles/Organization/0.3-DRAFT",
            "@type": "CreativeWork"
          },
          "id": "https://training.galaxyproject.org/training-material/hall-of-fame/elixir-converge/",
          "name": "ELIXIR-CONVERGE",
          "description": "ELIXIR CONVERGE is connecting and align ELIXIR Nodes to deliver sustainable FAIR life-science data management services. This project has received funding from the European Union's Horizon 2020 research and innovation programme under grant agreement № 871075\n",
          "url": "https://elixir-europe.org/about-us/how-funded/eu-projects/converge"
        }
      ],
      "identifier": "https://orcid.org/0000-0001-9760-8992",
      "orcid": "https://orcid.org/0000-0001-9760-8992"
    }
  ],
  "about": [
    {
      "@type": "CreativeWork",
      "name": "Assembly",
      "description": "DNA sequence data has become an indispensable tool for Molecular Biology & Evolutionary Biology. Study in these fields now require a genome sequence to work from. We call this a 'Reference Sequence.' We need to build a reference for each species. We do this by Genome Assembly. De novo Genome Assembly is the process of reconstructing the original DNA sequence from the fragment reads alone.",
      "url": "https://training.galaxyproject.org/training-material/topics/assembly/"
    },
    {
      "@type": "DefinedTerm",
      "@id": "http://edamontology.org/topic_0196",
      "inDefinedTermSet": "http://edamontology.org",
      "termCode": "topic_0196",
      "url": "https://bioportal.bioontology.org/ontologies/EDAM/?p=classes&conceptid=http%3A%2F%2Fedamontology.org%2Ftopic_0196"
    },
    {
      "@type": "DefinedTerm",
      "@id": "http://edamontology.org/topic_0622",
      "inDefinedTermSet": "http://edamontology.org",
      "termCode": "topic_0622",
      "url": "https://bioportal.bioontology.org/ontologies/EDAM/?p=classes&conceptid=http%3A%2F%2Fedamontology.org%2Ftopic_0622"
    },
    {
      "@type": "DefinedTerm",
      "@id": "http://edamontology.org/topic_3301",
      "inDefinedTermSet": "http://edamontology.org",
      "termCode": "topic_3301",
      "url": "https://bioportal.bioontology.org/ontologies/EDAM/?p=classes&conceptid=http%3A%2F%2Fedamontology.org%2Ftopic_3301"
    }
  ],
  "educationalLevel": "Beginner",
  "mentions": [
    {
      "@type": "Thing",
      "url": "https://training.galaxyproject.org/training-material/topics/assembly/tutorials/ecoli_comparison/workflows/",
      "name": "Associated Workflows"
    },
    {
      "@type": "Thing",
      "url": "https://zenodo.org/record/3382053",
      "name": "Associated Training Datasets"
    }
  ]
}</script></head>
    <body data-spy="scroll" data-target="#toc" data-brightness="auto" data-contrast="auto">
        <script  src='/training-material/assets/js/bundle.theme.f1f2de89.js'></script>
        <header>
    <nav class="navbar navbar-expand-md navbar-dark" aria-label="Site Navigation">
        <div class="container">
            <a class="navbar-brand" href="/training-material/">
                <img src="/training-material/assets/images/GTN-60px.png" height="30" alt="Galaxy Training Network logo">
                
                    Galaxy Training!
                
            </a>

            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-navbar" aria-controls="top-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        
                        <a class="nav-link" href="/training-material/topics/assembly" title="Go back to list of tutorials">
                            <i class="far fa-folder" aria-hidden="true"></i> Assembly
                        </a>
                        
                    </li>

                    <li class="nav-item">
                        
                        <a class="nav-link" href="/training-material/learning-pathways" title="Learning Pathways">
                           <i class="fas fa-graduation-cap" aria-hidden="true"></i><span class="visually-hidden">curriculum</span> Learning Pathways
                        </a>
                        
                    </li>

                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Help">
        <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">help</span> Help
    </a>
    <div class="dropdown-menu dropdown-menu-right">
	<a class="dropdown-item" href="/training-material/faqs/index.html" title="Check our FAQs">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> FAQs
        </a>
        
        
        
        <a class="dropdown-item" href="/training-material/topics/assembly/faqs/" title="Check our FAQs for the Assembly topic">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Topic FAQs
        </a>
        
        
        
        <a class="dropdown-item" href="https://help.galaxyproject.org/" title="Discuss on Galaxy Help">
            <i class="far fa-comments" aria-hidden="true"></i><span class="visually-hidden">feedback</span> Galaxy Help Forum
        </a>
        <a class="dropdown-item" href="https://gitter.im/Galaxy-Training-Network/Lobby" title="Discuss on gitter">
           <i class="fab fa-gitter" aria-hidden="true"></i><span class="visually-hidden">gitter</span> Discuss on Matrix
        </a>
    </div>
</li>


                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Settings">
	<i class="fas fa-cog" aria-hidden="true"></i><span class="visually-hidden">galaxy-gear</span> Settings
    </a>
    <div class="dropdown-menu dropdown-menu-right">

	<h6 class="dropdown-header">Preferences</h6>

	<a href="/training-material/user/theme.html" class="dropdown-item">
		<i class="fas fa-palette" aria-hidden="true"></i><span class="visually-hidden">gtn-theme</span> Theme
	</a>

	<a href="/training-material/user/privacy.html" class="dropdown-item">
		<i class="fas fa-lock" aria-hidden="true"></i><span class="visually-hidden">pref-dataprivate</span> Data Privacy
	</a>

	<div class="dropdown-divider"></div>

	<h6 class="dropdown-header">For Everyone</h6>

        <a class="dropdown-item" href="https://github.com/galaxyproject/training-material/edit/main/topics/assembly/tutorials/ecoli_comparison/tutorial.md">
          <i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Propose a change or correction
        </a>

	<h6 class="dropdown-header">Instructor Utilities</h6>

        <a class="dropdown-item" href="/training-material/stats.html">
            <i class="fas fa-chart-column" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN statistics
        </a>

        <a class="dropdown-item" href="https://plausible.galaxyproject.eu/training.galaxyproject.org?period=12mo&page=/training-material/topics/assembly/tutorials/ecoli_comparison/tutorial.html">
            <i class="fas fa-chart-column" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> Page View Metrics
        </a>

        <!-- link to feedback -->
        
            
            
                <a class="dropdown-item" href="/training-material/feedback.html">
                    <i class="fas fa-chart-column" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN feedback
                </a>
            
        

        <div class="dropdown-item">
            <div>
                <i class="fas fa-history" aria-hidden="true"></i><span class="visually-hidden">galaxy-rulebuilder-history</span> Previous Versions
            </div>

            <div id="archive-selector">
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/">Older Versions</a>
            </div>

        </div>

    </div>
</li>


                    <!-- Search bar-->
                    <li class="nav-item">
                      <div id="navbarSupportedContent" role="search">
                        <!-- Search form -->
                        <form class="form-inline mr-auto" method="GET" action="/training-material/search2">
                          <i class="fas fa-search nav-link" aria-hidden="true"></i>
                          <div class="md-form mb-2">
                            <input name="query" class="form-control nicer" type="text" placeholder="Search Tutorials" aria-label="Search">
                          </div>
                        </form>
                      </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

        
        <div class="container main-content" role="main">
        














<!-- Gitter -->






<article class="tutorial topic-assembly">
    <h1 data-toc-skip>Making sense of a newly assembled genome</h1>
    

    <section aria-labelledby="overview-box" id="tutorial-metadata">
    <div markdown="0">

	<div class="contributors-line">
		Authors: <a href="/training-material/hall-of-fame/nekrut/" class="contributor-badge contributor-nekrut"><img src="https://avatars.githubusercontent.com/nekrut?s=36" alt="Anton Nekrutenko avatar" width="36" class="avatar" />
    Anton Nekrutenko</a><a href="/training-material/hall-of-fame/delphine-l/" class="contributor-badge contributor-delphine-l"><img src="/training-material/assets/images/orcid.png" alt="orcid logo" width="36" height="36"/><img src="https://avatars.githubusercontent.com/delphine-l?s=36" alt="Delphine Lariviere avatar" width="36" class="avatar" />
    Delphine Lariviere</a><a href="/training-material/hall-of-fame/hexylena/" class="contributor-badge contributor-hexylena"><img src="/training-material/assets/images/orcid.png" alt="orcid logo" width="36" height="36"/><img src="https://avatars.githubusercontent.com/hexylena?s=36" alt="Helena Rasche avatar" width="36" class="avatar" />
    Helena Rasche</a>
	</div>

</div>


    <blockquote class="overview">
        <div id="overview-box" class="box-title">Overview</div>
        
        <img alt="Creative Commons License: CC-BY" class="float-right" style="border-width:0; display: inline-block; margin:0" src="/training-material/assets/images/cc-by.png" width="88" height="31"/>
        
        <strong><i class="far fa-question-circle" aria-hidden="true"></i> Questions:</strong>
        <ul>
        
        <li><p>I just assembled a genome. How does it compare with already sequenced genomes?</p>
</li>
        
        <li><p>How do I find rearranged, inserted, or deleted regions?</p>
</li>
        
        </ul>

        <strong><i class="fas fa-bullseye" aria-hidden="true"></i> Objectives: </strong>
        <ul>
        
        <li><p>Identification of the most closely related genome to my new assembly</p>
</li>
        
        <li><p>Perform sequence comparison to locate rearrangements</p>
</li>
        
        <li><p>Identify genes located in deletions</p>
</li>
        
        </ul>

        
        <strong><i class="fas fa-check-circle" aria-hidden="true"></i> Requirements:</strong>
        <ul>
        
    
        
        
        
        <li>
          <a href="/training-material/topics/introduction">Introduction to Galaxy Analyses</a>
        </li>
        
    

    
        
        
        
            
                
                    
                        
                            <li>
                              <a href="/training-material/topics/sequence-analysis/tutorials/quality-control/slides.html"><i class="fab fa-slideshare" aria-hidden="true"></i><span class="visually-hidden">slides</span> Slides: Quality Control</a>
                            </li>
                        
                        
                            
                                <li>
                                  <a href="/training-material/topics/sequence-analysis/tutorials/quality-control/tutorial.html"><i class="fas fa-laptop" aria-hidden="true"></i><span class="visually-hidden">tutorial</span> Hands-on: Quality Control</a>
                                </li>
                            
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
        
    


        
    
        
        
        
            
                
                    
                
                    
                
                    
                        
                            <li>
                              <a href="/training-material/topics/assembly/tutorials/unicycler-assembly/slides.html"><i class="fab fa-slideshare" aria-hidden="true"></i><span class="visually-hidden">slides</span> Slides: Unicycler Assembly</a>
                            </li>
                        
                        
                            
                                <li>
                                  <a href="/training-material/topics/assembly/tutorials/unicycler-assembly/tutorial.html"><i class="fas fa-laptop" aria-hidden="true"></i><span class="visually-hidden">tutorial</span> Hands-on: Unicycler Assembly</a>
                                </li>
                            
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
        
    


        </ul>
        

        
        <div><strong><i class="fas fa-hourglass-half" aria-hidden="true"></i> Time estimation:</strong> 4 hours</div>
        

        

        

        

        <div id="supporting-materials"><strong><i class="fa fa-external-link" aria-hidden="true"></i> Supporting Materials:</strong></div>
        <ul class="supporting_material">
            

            
                <li class="btn btn-default supporting_material">


<a class="btn btn-default topic-icon" title="Zenodo datasets used in this tutorial" href="https://zenodo.org/record/3382053">
    <i class="far fa-copy" aria-hidden="true"></i>&nbsp;Datasets
</a>

</li>
            

            
                <li class="btn btn-default supporting_material">


    <a class="btn btn-default topic-icon" href="/training-material/topics/assembly/tutorials/ecoli_comparison/workflows/" title="Making sense of a newly assembled genome workflows">
        <i class="fas fa-share-alt" aria-hidden="true"></i>&nbsp;Workflows
    </a>

</li>
            

            

            

            

            

            
            
            
                <li class="btn btn-default supporting_material">    <a class="topic-icon" href="/training-material/topics/assembly/tutorials/ecoli_comparison/faqs/" title="Frequently Asked Questions">
        <i class="far fa-question-circle" aria-hidden="true"></i> FAQs
    </a>
</li>
            

            <!-- Check the GTN Video Library for recordings of this tutorial or associated slides -->
            












            
                
                <li class="btn btn-default supporting_material">






</li>
                
            
        </ul>

        <div><strong><i class="far fa-calendar" aria-hidden="true"></i> Published:</strong> Jun 14, 2018 </div>
        <div><strong><i class="far fa-calendar" aria-hidden="true"></i> Last modification:</strong> Jun 24, 2024 </div>
        <div><strong><i class="fas fa-balance-scale" aria-hidden="true"></i> License:</strong>
		
            Tutorial Content is licensed under
            
              <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
            
            The GTN Framework is licensed under <a rel="license" href="https://github.com/galaxyproject/training-material/blob/main/LICENSE.md">MIT</a>
        </div>
        
        <div><strong><i class="fas fa-fingerprint" aria-hidden="true"></i><span class="visually-hidden">purl</span> <abbr title="Persistent URL">PURL</abbr>:</strong> <a href="https://gxy.io/GTN:T00032">https://gxy.io/GTN:T00032</a> </div>
        

	
	

	
	
	<div><strong><i class="far fa-star" aria-hidden="true"></i><span class="visually-hidden">rating</span> Rating:</strong> <a href="#feedback-responses">2.0</a> (0 recent ratings, 1 all time)</div>
	
	<div><strong><i class="fas fa-code-commit" aria-hidden="true"></i><span class="visually-hidden">version</span> Revision:</strong> 29 </div>

    </blockquote>
    </section>

    <div class="container">
        <div class="row">
            <!-- sidebar, which will move to the top on a small screen -->
            <div class="col-sm-2 hide-when-printing">
                <nav id="toc" data-toggle="toc" class="sticky-top" aria-label="Table of Contents"></nav>
            </div>
            <div class="col-sm-10">
                 

                <section aria-label="Tutorial Content" id="tutorial-content">
                <p>In this tutorial we begin with a new genome assembly just produced in the <a href="/training-material/topics/assembly/tutorials/unicycler-assembly/tutorial.html">Unicycler tutorial</a>. This is an assembly of <em>E. coli</em> C, which we will be comparing to assemblies of all other complete genes of this species.</p>

<blockquote class="agenda">
  <div class="box-title agenda-title" id="agenda">Agenda</div>

<ol id="markdown-toc">
  <li><a href="#finding-closely-related-genomes" id="markdown-toc-finding-closely-related-genomes">Finding closely related genomes</a>    <ol>
      <li><a href="#getting-complete-e-coli-genomes-into-galaxy" id="markdown-toc-getting-complete-e-coli-genomes-into-galaxy">Getting complete <em>E. coli</em> genomes into Galaxy</a></li>
      <li><a href="#preparing-assembly" id="markdown-toc-preparing-assembly">Preparing assembly</a></li>
      <li><a href="#generating-alignments" id="markdown-toc-generating-alignments">Generating alignments</a></li>
      <li><a href="#finding-closely-related-assemblies" id="markdown-toc-finding-closely-related-assemblies">Finding closely related assemblies</a></li>
      <li><a href="#collapsing-collection" id="markdown-toc-collapsing-collection">Collapsing collection</a></li>
      <li><a href="#getting-taste-of-the-alignment-data" id="markdown-toc-getting-taste-of-the-alignment-data">Getting taste of the alignment data</a></li>
      <li><a href="#aggregating-data" id="markdown-toc-aggregating-data">Aggregating data</a></li>
      <li><a href="#finding-closest-relatives" id="markdown-toc-finding-closest-relatives">Finding closest relatives</a></li>
    </ol>
  </li>
  <li><a href="#comparing-genome-architectures" id="markdown-toc-comparing-genome-architectures">Comparing genome architectures</a>    <ol>
      <li><a href="#getting-sequences-and-annotations" id="markdown-toc-getting-sequences-and-annotations">Getting sequences and annotations</a></li>
      <li><a href="#visualizing-rearrangements" id="markdown-toc-visualizing-rearrangements">Visualizing rearrangements</a></li>
      <li><a href="#producing-a-genome-browser-for-this-experiment" id="markdown-toc-producing-a-genome-browser-for-this-experiment">Producing a Genome Browser for this experiment</a></li>
      <li><a href="#visualising-the-genome" id="markdown-toc-visualising-the-genome">Visualising the Genome</a></li>
      <li><a href="#extracting-genes-programmatically" id="markdown-toc-extracting-genes-programmatically">Extracting genes programmatically</a></li>
      <li><a href="#are-any-of-these-genes-essential" id="markdown-toc-are-any-of-these-genes-essential">Are any of these genes essential?</a></li>
    </ol>
  </li>
</ol>

</blockquote>

<h1 id="finding-closely-related-genomes">Finding closely related genomes</h1>

<p><a href="https://en.wikipedia.org/wiki/Escherichia_coli"><em>E. coli</em></a> is one of the most studied organisms. There are thousands of complete genomes (in fact, the total number of <em>E. coli</em> assemblies in Genbank is over 10,500). Here we will shows how to uploaded all (!) complete <em>E. coli</em> genomes at once.</p>

<blockquote class="comment">
  <div class="box-title comment-title" id="comment-slow-steps-ahead"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment: Slow steps ahead</div>
  <p>The first part of this tutorial can take a significant amount of time to find the most related genomes. If you want, you can upload this (outdated) copy of the NCBI E. Coli Genomes table to your history:</p>

  <ol>
    <li>
      <p>Import the following URL:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://zenodo.org/record/3382053/files/genomes_proks.txt
</code></pre></div>      </div>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-importing-via-links"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-importing-via-links" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Importing via links</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Copy the link location</li>   <li>     <p>Click <i class="fas fa-upload" aria-hidden="true"></i><span class="visually-hidden">galaxy-upload</span> <strong>Upload Data</strong> at the top of the tool panel</p>   </li>   <li>Select <i class="fa fa-edit" aria-hidden="true"></i><span class="visually-hidden">galaxy-wf-edit</span> <strong>Paste/Fetch Data</strong></li>   <li>     <p>Paste the link(s) into the text field</p>   </li>   <li>     <p>Press <strong>Start</strong></p>   </li>   <li><strong>Close</strong> the window</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
    <li>
      <p>And skip ahead to <a href="#comparing-genome-architectures">comparing the most related genomes</a>.</p>
    </li>
  </ol>
</blockquote>

<h2 id="getting-complete-e-coli-genomes-into-galaxy">Getting complete <em>E. coli</em> genomes into Galaxy</h2>

<p>Our initial objective is to compare our assembly against all complete <em>E. coli</em> genomes to identify the most related ones and to find any interesting genome alterations. In order to do this we need to align our assembly against all other genomes. And in order to do that we need to first obtain all these other genomes.</p>

<p><a href="https://www.ncbi.nlm.nih.gov/">NCBI</a> is the resource that would store <a href="https://www.ncbi.nlm.nih.gov/genome/genomes/167">all complete <em>E. coli</em> genomes</a>. This list contains over 500 genomes and so uploading them by hand will likely result in carpal tunnel syndrome, which we want to prevent. Galaxy has several features that are specifically designed for uploading and managing large sets of similar types of data. The following two <strong>Hands-on</strong> sections show how they can be used to import all completed <em>E. coli</em> genomes into Galaxy.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-preparing-a-list-of-all-complete-i-e-coli-i-genomes"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Preparing a list of all complete <i>E. coli</i> genomes</div>

  <ol>
    <li>
      <p>Import the genome list from Zenodo:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://zenodo.org/record/3382053/files/genomes_proks.txt
</code></pre></div>      </div>
    </li>
  </ol>

</blockquote>

<blockquote class="details">
  <div class="box-title details-title" id="details-getting-the-data-directly-from-ncbi"><button class="gtn-boxify-button details" type="button" aria-controls="details-getting-the-data-directly-from-ncbi" aria-expanded="true"><i class="fas fa-info-circle" aria-hidden="true" ></i> <span>Details: Getting the data directly from NCBI</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

  <p>For this tutorial we made this dataset available from Zenodo, but it is of course also possible to obtain the data directly from NCBI.
Note that the format of the files on NCBI may change, which means some of the parameter settings of tools in this tutorial will need
to be altered (e.g. column numbers) when using data directly from NCBI.</p>

  <p>Below we describe how you could obtain this data from NCBI.</p>

  <ol>
    <li>
      <p>Open <a href="https://www.ncbi.nlm.nih.gov/genome/genomes/167">the NCBI list of of <em>E. coli</em> genomes</a> in a new window</p>
    </li>
    <li>
      <p>Click on “Filters” at the top right:</p>

      <p><a href="../../images/ecoli-list-filter.png" rel="noopener noreferrer"><img src="../../images/ecoli-list-filter.png" alt="Filter menu button. " width="572" height="320" loading="lazy" /></a></p>
    </li>
    <li>
      <p>Select only the “Complete” genomes with the filter at the top</p>

      <p><a href="../../images/ecoli-list.png" rel="noopener noreferrer"><img src="../../images/ecoli-list.png" alt="Filter settings, only &quot;complete&quot; is checked. " width="984" height="414" loading="lazy" /></a></p>
    </li>
    <li>
      <p>At the top right, click “Download”</p>
    </li>
    <li>
      <p>Upload this table to Galaxy</p>
    </li>
    <li>
      <p>As this file is a CSV file, we need to convert it to TSV before Galaxy can use it.</p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-converting-the-file-format"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-converting-the-file-format" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Converting the file format</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, click on the <i class="fas fa-cog" aria-hidden="true"></i><span class="visually-hidden">galaxy-gear</span> <strong>Convert</strong> tab on the top</li>   <li>In the upper part <i class="fas fa-cog" aria-hidden="true"></i><span class="visually-hidden">galaxy-gear</span> <strong>Convert</strong>, select <code class="language-plaintext highlighter-rouge">Convert CSV to Tabular</code></li>   <li>Click the <strong>Create dataset</strong> button to start the conversion.</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
    <li>
      <p>Rename this file to <code class="language-plaintext highlighter-rouge">genomes.tsv</code></p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-converting-the-file-format-1"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-converting-the-file-format-1" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Converting the file format</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, click on the <i class="fas fa-cog" aria-hidden="true"></i><span class="visually-hidden">galaxy-gear</span> <strong>Convert</strong> tab on the top</li>   <li>In the upper part <i class="fas fa-cog" aria-hidden="true"></i><span class="visually-hidden">galaxy-gear</span> <strong>Convert</strong>, select <code class="language-plaintext highlighter-rouge">Convert CSV to Tabular</code></li>   <li>Click the <strong>Create dataset</strong> button to start the conversion.</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
  </ol>

</blockquote>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-preparing-a-list-of-all-complete-i-e-coli-i-genomes-1"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Preparing a list of all complete <i>E. coli</i> genomes</div>

  <ol>
    <li>
      <p><span class="tool" data-tool="Cut1" title="Cut tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Cut</strong></span>   columns from a table:</p>

      <ul>
        <li><em>“Cut columns”</em>: <code class="language-plaintext highlighter-rouge">c8,c20</code></li>
        <li><em>“From”</em>: <code class="language-plaintext highlighter-rouge">genome_proks.txt</code></li>
      </ul>
    </li>
  </ol>

  <blockquote class="question">
    <div class="box-title question-title" id="question"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

    <p>How does your data look?</p>

    <blockquote class="solution">
      <div class="box-title solution-title" id="solution"><button class="gtn-boxify-button solution" type="button" aria-controls="solution" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

      <p>It should look like this:
1               | 2
–              | –
GCA_000005845.2 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/000/005/845/GCA_000005845.2_ASM584v2
GCA_000008865.2 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/000/008/865/GCA_000008865.2_ASM886v2
GCA_003697165.2 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/003/697/165/GCA_003697165.2_ASM369716v2
GCA_003018455.1 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/003/018/455/GCA_003018455.1_ASM301845v1
GCA_001650295.1 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/001/650/295/GCA_001650295.1_ASM165029v1
GCA_003018035.1 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/003/018/035/GCA_003018035.1_ASM301803v1
GCA_003112225.1 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/003/112/225/GCA_003112225.1_ASM311222v1
GCA_001695515.1 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/001/695/515/GCA_001695515.1_ASM169551v1
GCA_001721125.1 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/001/721/125/GCA_001721125.1_ASM172112v1
GCA_000091005.1 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/000/091/005/GCA_000091005.1_ASM9100v1
GCA_005037725.2 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/005/037/725/GCA_005037725.2_ASM503772v2
GCA_005037815.2 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/005/037/815/GCA_005037815.2_ASM503781v2
GCA_004358405.1 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/004/358/405/GCA_004358405.1_ASM435840v1
GCA_003018575.1 | ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/003/018/575/GCA_003018575.1_ASM301857v1</p>

    </blockquote>
  </blockquote>

</blockquote>

<p>Now that the list is formatted as a table in a spreadsheet, it is time to upload it into Galaxy. There is a problem though: the URLs (web addresses) in the list do not actually point to sequence files that we would need to perform alignments. Instead they point to directories. For example, this URL: <a href="ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/000/008/865/GCA_000008865.1_ASM886v1">GCA_000008865.1_ASM886v1</a> points to a directory (rather than a file) containing many files, most of which we do not need.</p>

<figure id="figure-1" style="max-width: 90%;"><img src="../../images/genbank_dir.png" alt="GenBank assembly files for an E. coli strain. " width="986" height="455" loading="lazy" /><a target="_blank" href="../../images/genbank_dir.png" rel="noopener noreferrer"><small>Open image in new tab</small></a><br /><br /><figcaption><span class="figcaption-prefix"><strong>Figure 1</strong>:</span> A list of files for an <i>E. coli</i> assembly. For further analyses we only need the dataset ending with <code>_genomic.fna.gz</code>.</figcaption></figure>

<p>So to download sequence files we need to edit URLs by adding filenames to them. For example, in the case of the URL shown above we need to add <code class="language-plaintext highlighter-rouge">/GCA_000008865.1_ASM886v1</code> and <code class="language-plaintext highlighter-rouge">_genomic.fna.gz</code> to the end to get this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/000/008/865/GCA_000008865.1_ASM886v1/GCA_000008865.1_ASM886v1_genomic.fna.gz
</code></pre></div></div>

<p>This can be done as a two step process where we first copy the end part of the existing URL (<code class="language-plaintext highlighter-rouge">/GCA_000008865.1_ASM886v1</code>) and then add a fixed string <code class="language-plaintext highlighter-rouge">_genomic.fna.gz</code> to the end of it. Doing this by hand is crazy and trying to do it in a spreadsheet is complicated. Fortunately, Galaxy’s new rule-based uploader can help, as shown in the next <strong>Hands-on</strong> section:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-data-upload"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Data upload</div>

  <ol>
    <li>
      <p>Again <strong>Upload</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> data</p>
    </li>
    <li>
      <p>Switch to the <code class="language-plaintext highlighter-rouge">Rule-based</code> tab on the right</p>

      <blockquote class="tip">
        <div class="box-title tip-title" id="tip-using-the-rule-based-uploader"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-using-the-rule-based-uploader" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true" ></i> <span>Tip: Using the Rule-based Uploader</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
        <p>There is a detailed tutorial on using the <a href="/training-material/topics/galaxy-interface/tutorials/upload-rules/tutorial.html">Rule based Uploader</a> if you want to learn about the more advanced features available.</p>
      </blockquote>

      <ul>
        <li><em>“Upload data as”</em>: <code class="language-plaintext highlighter-rouge">Collection(s)</code></li>
        <li><em>“Load tabular data from”</em>: <code class="language-plaintext highlighter-rouge">History Dataset</code></li>
        <li><em>“Select dataset to load”</em>: output of the cut tool</li>
      </ul>

      <blockquote class="tip">
        <div class="box-title tip-title" id="tip-dataset-not-there"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-dataset-not-there" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true" ></i> <span>Tip: dataset not there?</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
        <p>If the dataset doesn’t appear in the select list, refresh your page.</p>
      </blockquote>
    </li>
    <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Using a Regular Expression</code>
      <ul>
        <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">B</code></li>
        <li>Select <code class="language-plaintext highlighter-rouge">Create columns matching expression groups</code></li>
        <li><em>“Regular Expression”</em>: <code class="language-plaintext highlighter-rouge">.*(\/GCA.*$)</code></li>
        <li><em>“Number of Groups”</em>: <code class="language-plaintext highlighter-rouge">1</code></li>
        <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
      </ul>
    </li>
    <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Concatenate Columns</code>
      <ul>
        <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">B</code></li>
        <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">C</code></li>
        <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
      </ul>
    </li>
    <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Fixed Value</code>
      <ul>
        <li><em>“Value”</em>: <code class="language-plaintext highlighter-rouge">_genomic.fna.gz</code></li>
        <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
      </ul>
    </li>
    <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Concatenate Columns</code>
      <ul>
        <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">D</code></li>
        <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">E</code></li>
        <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
      </ul>
    </li>
    <li>From <strong>Rules</strong> menu, select <code class="language-plaintext highlighter-rouge">Add / Modify Column Definitions</code>
      <ul>
        <li><code class="language-plaintext highlighter-rouge">Add Definition</code>, <code class="language-plaintext highlighter-rouge">List Identifier(s)</code>, Select Column <code class="language-plaintext highlighter-rouge">A</code></li>
        <li><code class="language-plaintext highlighter-rouge">Add Definition</code>, <code class="language-plaintext highlighter-rouge">URL</code>, Column <code class="language-plaintext highlighter-rouge">F</code></li>
        <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
      </ul>
    </li>
    <li>Set the <strong>Type</strong> in the bottom left to <code class="language-plaintext highlighter-rouge">fasta.gz</code></li>
    <li>Give the upload a name like <code class="language-plaintext highlighter-rouge">Complete genomes</code></li>
    <li><strong>Upload</strong></li>
  </ol>

</blockquote>

<p>Now we have all complete <em>E. coli</em> genomes in Galaxy’s history. It is time to do a few things to our assembly.</p>

<h2 id="preparing-assembly">Preparing assembly</h2>

<p>Before starting any analyses we need to upload the assembly produced in <a href="/training-material/topics/assembly/tutorials/unicycler-assembly/tutorial.html">Unicycler tutorial</a> from Zenodo:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-uploading-i-e-coli-i-assembly-into-galaxy"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Uploading <i>E. coli</i> assembly into Galaxy</div>

  <ol>
    <li><span class="tool" data-tool="upload1" title="Upload tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Upload</strong></span>  :
      <ul>
        <li>Click <strong>Paste/Fetch data</strong> button (Bottom of the interface box)</li>
        <li><strong>Paste</strong> <code class="language-plaintext highlighter-rouge">https://zenodo.org/record/1306128/files/Ecoli_C_assembly.fna</code> into the box.</li>
        <li><em>“Type”</em>: <code class="language-plaintext highlighter-rouge">fasta</code></li>
        <li>Click <strong>Start</strong></li>
      </ul>
    </li>
  </ol>
</blockquote>

<blockquote class="tip">
  <div class="box-title tip-title" id="tip-finding-tools-mentioned-in-this-tutorial"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-finding-tools-mentioned-in-this-tutorial" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true" ></i> <span>Tip: Finding tools mentioned in this tutorial</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
  <p>Galaxy instances contain hundreds of tools. As a result, it can be hard to find tools mentioned in tutorials such as this one. To help with this challenge, Galaxy has a search box at the top of the left panel. Use this box to find the tools mentioned here.</p>
  <figure id="figure-2" style="max-width: 90%;"><img src="../../images/tool_search.png" alt="Tool search. " width="415" height="113" loading="lazy" /><a target="_blank" href="../../images/tool_search.png" rel="noopener noreferrer"><small>Open image in new tab</small></a><br /><br /><figcaption><span class="figcaption-prefix"><strong>Figure 2</strong>:</span> Use search box to find tools!</figcaption></figure>
</blockquote>

<p>The assembly we just uploaded has two issues that need to be addressed before proceeding with our analysis:</p>

<ol>
  <li>It contains two sequences: the one of <em>E. coli</em> C genome (the one we really need) and another representing phage phiX174 (a by product of Illumina sequencing where it is used as a spike-in DNA).</li>
  <li>Sequences have unwieldy names like <code class="language-plaintext highlighter-rouge">&gt;1 length=4576293 depth=1.00x circular=true</code>. We need to rename it to something more meaningful.</li>
</ol>

<p>Let’s fix these two problems.</p>

<p>Because phiX173 is around 5,000bp, we can remove those sequences by setting a minimum length of 10,000:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-fixing-assembly"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Fixing assembly</div>

  <ol>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/devteam/fasta_filter_by_length/fasta_filter_by_length/1.2" title="Filter sequences by length tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Filter sequences by length</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.2)</span> with the following parameters:
      <ul>
        <li><em>“Fasta file”</em>: the dataset you’ve just uploaded. (<code class="language-plaintext highlighter-rouge">https://zenodo.org/record/1306128/files/Ecoli_C_assembly.fna</code>).</li>
        <li><em>“Minimal length”</em>: <code class="language-plaintext highlighter-rouge">10000</code></li>
      </ul>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/1.1.2" title="Replace Text tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Replace Text</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.1.2)</span> in entire line:
      <ul>
        <li><em>“File to process”</em>: the output of the Filter sequences by length <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span></li>
        <li><em>“1: Replacement”</em>
          <ul>
            <li><em>“Find Pattern”</em>: <code class="language-plaintext highlighter-rouge">^&gt;1.*</code></li>
            <li><em>“Replace with”</em>: <code class="language-plaintext highlighter-rouge">&gt;Ecoli_C</code></li>
          </ul>
        </li>
      </ul>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-renaming-a-dataset"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-renaming-a-dataset" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Renaming a dataset</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, change the <strong>Name</strong> field  to <code class="language-plaintext highlighter-rouge">E. coli C</code></li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>

      <blockquote class="tip">
        <div class="box-title tip-title" id="tip-regular-expressions"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-regular-expressions" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true" ></i> <span>Tip: Regular Expressions</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

        <p>The program we just entered is a so-called <a href="https://en.wikipedia.org/wiki/Regular_expression">Regular Expression</a></p>

        <p>The expression <code class="language-plaintext highlighter-rouge">^&gt;1.*</code> contains several pieces that you need to understand. Let’s write it top-to-bottom and explain:</p>

        <ul>
          <li><code class="language-plaintext highlighter-rouge">^</code> - says start looking at <em>the beginning</em> of each line</li>
          <li><code class="language-plaintext highlighter-rouge">&gt;</code> - is the first character we want to match. Remember that name of the sequence in FASTA files starts with <code class="language-plaintext highlighter-rouge">&gt;</code></li>
          <li><code class="language-plaintext highlighter-rouge">1</code> - is the number present is our old name (<code class="language-plaintext highlighter-rouge">&gt;1 length=4576293 depth=1.00x circular=true</code> to <code class="language-plaintext highlighter-rouge">&gt;Ecoli_C</code>)</li>
          <li><code class="language-plaintext highlighter-rouge">.</code> - dot has a special meaning. It signifies <em>any</em> character</li>
          <li><code class="language-plaintext highlighter-rouge">*</code> - is a <em>quantifier</em>. From <a href="https://en.wikipedia.org/wiki/Regular_expression">Wikipedia</a>: “The asterisk indicates zero or more occurrences of the preceding element. For example, ab*c matches <code class="language-plaintext highlighter-rouge">ac</code>, <code class="language-plaintext highlighter-rouge">abc</code>, <code class="language-plaintext highlighter-rouge">abbc</code>, <code class="language-plaintext highlighter-rouge">abbbc</code>, and so on.”</li>
        </ul>

        <p>So in short we are replacing <code class="language-plaintext highlighter-rouge">&gt;1 length=4576293 depth=1.00x circular=true</code> with <code class="language-plaintext highlighter-rouge">&gt;Ecoli_C</code>. The <em>Regular expression</em> <code class="language-plaintext highlighter-rouge">^&gt;1.*</code> is used here to represent <code class="language-plaintext highlighter-rouge">&gt;1 length=4576293 depth=1.00x circular=true</code>.<br />
Detailed description of regular expressions is outside of the scope of this tutorial, but there are other great resources. Start with <a href="http://v4.software-carpentry.org/regexp/index.html">Software Carpentry Regular Expressions tutorial</a>.</p>
      </blockquote>
    </li>
  </ol>

  <blockquote class="question">
    <div class="box-title question-title" id="question-1"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

    <ol>
      <li>What is the meaning of <code class="language-plaintext highlighter-rouge">^</code> character is SED expression?</li>
    </ol>

    <blockquote class="solution">
      <div class="box-title solution-title" id="solution-1"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-1" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

      <ol>
        <li>It tells SED to start matching from the beginning of the string.</li>
      </ol>

    </blockquote>
  </blockquote>

</blockquote>

<h2 id="generating-alignments">Generating alignments</h2>

<p>Now everything is loaded and ready to go. We will now align our assembly against each of the <em>E. coli</em> genomes we have uploaded into the collection. To do this we will use <a href="https://lastz.github.io/lastz/">LASTZ</a>—an aligner designed for long sequences.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-running-lastz"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Running LASTZ</div>
  <ol>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/devteam/lastz/lastz_wrapper_2/1.3.2" title="LASTZ tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>LASTZ</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.3.2)</span> with the following parameters:
      <ul>
        <li><em>“Select TARGET sequence(s) to align against”</em>: <code class="language-plaintext highlighter-rouge">from your history</code></li>
        <li><i class="far fa-folder" aria-hidden="true"></i><span class="visually-hidden">param-collection</span> <em>“Select a reference dataset”</em>: the “Complete genomes” collection we uploaded earlier</li>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select QUERY sequence(s)”</em>: our <em>E. coli</em> assembly which was prepared in the previous step.</li>
        <li><strong>Chaining</strong>
          <ul>
            <li><em>“Perform chaining of HSPs with no penalties”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
          </ul>
        </li>
        <li><strong>Output</strong>
          <ul>
            <li><em>“Specify the output format”</em>: <code class="language-plaintext highlighter-rouge">blastn</code></li>
          </ul>
        </li>
      </ul>
    </li>
  </ol>

</blockquote>

<p>Note that because we started LASTZ on <em>a collection</em> of <em>E. coli</em> genomes, it will output alignment information as <em>a collection</em> as well. A collection is simply a way to represent large sets of similar data in a compact way within Galaxy’s interface.</p>

<blockquote class="warning">
  <div class="box-title warning-title" id="warning-it-will-take-a-while"><i class="fas fa-exclamation-triangle" aria-hidden="true" ></i> Warning: It will take a while!</div>
  <p>Please understand that alignment is not an instantaneous process: allow several hours for these jobs to clear.</p>
</blockquote>

<h2 id="finding-closely-related-assemblies">Finding closely related assemblies</h2>

<h3 id="understanding-lastz-output">Understanding LASTZ output</h3>

<p>LASTZ produced data in so-called <code class="language-plaintext highlighter-rouge">blastn</code> format (because we explicitly told LASTZ to output in this format, see previous step), which looks like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      1          2     3   4  5 6       7       8    9   10      11    12
-------------------------------------------------------------------------
Ecoli_C BA000007.2 66.81 232 51 6 3668174 3668397 5936 6149 3.2e-40 162.7
Ecoli_C BA000007.2 57.77 206 38 8  643802  643962 5945 6146 1.6e-18  90.6
Ecoli_C BA000007.2 67.03 185 32 6 4849373 4849528 5965 6149 2.9e-28 122.9
Ecoli_C BA000007.2 63.06 157 33 3 1874604 1874735 5991 6147 5.8e-26 115.3
</code></pre></div></div>

<p>where columns are:</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">qseqid</code> - query (e.g., gene) sequence id</li>
  <li><code class="language-plaintext highlighter-rouge">sseqid</code> - subject (e.g., reference genome) sequence id</li>
  <li><code class="language-plaintext highlighter-rouge">pident</code> - percentage of identical matches</li>
  <li><code class="language-plaintext highlighter-rouge">length</code> - alignment length</li>
  <li><code class="language-plaintext highlighter-rouge">mismatch</code> - number of mismatches</li>
  <li><code class="language-plaintext highlighter-rouge">gapopen</code> - number of gap openings</li>
  <li><code class="language-plaintext highlighter-rouge">qstart</code> - start of alignment in query</li>
  <li><code class="language-plaintext highlighter-rouge">qend</code> - end of alignment in query</li>
  <li><code class="language-plaintext highlighter-rouge">sstart</code> - start of alignment in subject</li>
  <li><code class="language-plaintext highlighter-rouge">send</code> - end of alignment in subject</li>
  <li><code class="language-plaintext highlighter-rouge">evalue</code> - <a href="https://blast.ncbi.nlm.nih.gov/Blast.cgi?CMD=Web&amp;PAGE_TYPE=BlastDocs&amp;DOC_TYPE=FAQ#expect">expect value</a></li>
  <li><code class="language-plaintext highlighter-rouge">bitscore</code> - <a href="https://www.ncbi.nlm.nih.gov/BLAST/tutorial/Altschul-1.html">bit score</a></li>
</ol>

<p>The alignment information produced by LASTZ is a collection. In this collection each element contains alignment data between each of the <em>E. coli</em> genomes and our assembly:</p>

<figure id="figure-3" style="max-width: 90%;"><img src="../../images/lastz_collection.png" alt="LASTZ collection. " width="312" height="666" loading="lazy" /><a target="_blank" href="../../images/lastz_collection.png" rel="noopener noreferrer"><small>Open image in new tab</small></a><br /><br /><figcaption><span class="figcaption-prefix"><strong>Figure 3</strong>:</span> LASTZ produced a collection where each element corresponds to an alignment between an <i>E. coli</i> genome and our assembly. Here one of the elements is expanded (to expand an element simply click on it).</figcaption></figure>
<p>.</p>

<h2 id="collapsing-collection">Collapsing collection</h2>

<p>Collections are a wonderful way to organize large sets of data and parallelize data processing like we did here with LASTZ. However, at this point we need to combine all data into one dataset. Follow the steps below to accomplish this:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-combining-collection-into-a-single-dataset"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Combining collection into a single dataset</div>
  <ol>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/nml/collapse_collections/collapse_dataset/4.2" title="Collapse Collection tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Collapse Collection</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 4.2)</span> with the following parameters:
      <ul>
        <li><em>“Collection of files to collapse”</em>: the output of <strong>LASTZ</strong> (collecion input)</li>
      </ul>
    </li>
  </ol>
</blockquote>

<p>This will produce one gigantic table (over 12 million lines) containing combined LASTZ output for all genomes.</p>

<h2 id="getting-taste-of-the-alignment-data">Getting taste of the alignment data</h2>

<p>To make further analyses we need to get an idea about alignment data generated with LASTZ. To do this let’s select a random subsample of the large dataset we’ve generated above. This is necessary because processing the entire dataset will take time and will not give us a better insight anyway. So first we will select 10,000 lines from the alignment data:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-selecting-random-subset-of-data"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Selecting random subset of data</div>
  <ol>
    <li><span class="tool" data-tool="random_lines1" title="Select random lines from a file tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Select random lines from a file</strong></span>   with the following parameters:
      <ul>
        <li><em>“Randomly select”</em>: <code class="language-plaintext highlighter-rouge">10000</code></li>
        <li><em>“from”</em>: the output from <code class="language-plaintext highlighter-rouge">Collapse Collection</code></li>
      </ul>
    </li>
  </ol>
</blockquote>

<p>Now we can visualize this dataset to discover generalities:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-graphing-alignment-data"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Graphing alignment data</div>
  <ol>
    <li>Expand random subset of alignment data generated on the previous step by clicking on it.</li>
    <li>You will see “chart” button <i class="fas fa-chart-column" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span>. Click on it.</li>
    <li>In the central panel you will see a list of visualizations. Select <strong>Scatter plot (NVD3)</strong></li>
    <li>Click <strong>Select data</strong> <i class="fas fa-database" aria-hidden="true"></i><span class="visually-hidden">galaxy-chart-select-data</span></li>
    <li>Set <strong>Values for x-axis</strong> to <code class="language-plaintext highlighter-rouge">Column: 3</code> (alignment identity)</li>
    <li>Set <strong>Values for y-axis</strong> to <code class="language-plaintext highlighter-rouge">Column: 4</code> (alignment length)</li>
    <li>You can also click on configuration button <i class="fas fa-cog" aria-hidden="true"></i><span class="visually-hidden">galaxy-gear</span> and specify axis labels etc.</li>
  </ol>
</blockquote>

<p>The relationship between the alignment identity and alignment length looks like this (remember that this is only a subsample of the data):</p>

<figure id="figure-4" style="max-width: 90%;"><img src="../../images/id_vs_len.png" alt="Identity versus length. " width="3795" height="2955" loading="lazy" /><a target="_blank" href="../../images/id_vs_len.png" rel="noopener noreferrer"><small>Open image in new tab</small></a><br /><br /><figcaption><span class="figcaption-prefix"><strong>Figure 4</strong>:</span> Alignment identity (%) versus length (bp). This graph is truncated at the top</figcaption></figure>

<p>You can see that most alignments are short and have relatively low identity. Thus we can filter the original dataset by identity and length. Judging from this graph we can select alignment longer than 10,000 bp with identity above 90%.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-filtering-data"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Filtering data</div>
  <ol>
    <li><span class="tool" data-tool="Filter1" title="Filter tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Filter</strong></span> data on any column using simple expressions:
      <ul>
        <li><em>“Filter”</em>: the full dataset, from the output of the <strong>Collapse Collection</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>.</li>
        <li><em>“With following condition”</em>: <code class="language-plaintext highlighter-rouge">c3 &gt;= 90 and c4 &gt;= 10000</code> (here <code class="language-plaintext highlighter-rouge">c</code> stands for <em>column</em>).</li>
      </ul>
    </li>
  </ol>

  <p>NOTE: You need to select the full dataset; not the down-sampled one, but <a href="#hands-on-combining-collection-into-a-single-dataset">the one generated by the collection collapsing operation</a>.</p>

</blockquote>

<h2 id="aggregating-data">Aggregating data</h2>

<p>Remember, our objective is to find the genomes that are most similar to ours. Given the alignment data in the table we just created we can define similarity as follows:</p>

<blockquote class="quote">
  <p>Genomes that have the smallest number of alignment blocks but the highest overall alignment length are most similar to our assembly. This essentially means that they have longest uninterrupted region of high similarity to our assembly.</p>
</blockquote>

<p>However, to extract this information from our data we need to aggregate it. In other words, for each <em>E. coli</em> genome we need to calculate the total number of alignment blocks, their combined length, and average identity. The following section explains how to do this:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-aggregating-the-data"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Aggregating the data</div>
  <ol>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/iuc/datamash_ops/datamash_ops/1.1.0" title="Datamash (operations on tabular data) tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Datamash (operations on tabular data)</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.1.0)</span>   with the following parameters:
      <ul>
        <li><em>“Input tabular dataset”</em>: output of the previous <code class="language-plaintext highlighter-rouge">Filter</code> step.</li>
        <li><em>“Group by fields”</em>: <code class="language-plaintext highlighter-rouge">2</code>. (column 1 contains name of the <em>E. coli</em> genome we mapped against)</li>
        <li><em>“Sort input”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
        <li><em>“Operation to perform on each group”</em>:
          <ul>
            <li><em>“Type”</em>: <code class="language-plaintext highlighter-rouge">Count</code></li>
            <li><em>“On column”</em>: <code class="language-plaintext highlighter-rouge">Column: 2</code></li>
          </ul>
        </li>
        <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert operation to perform on each group”</em>
          <ul>
            <li><em>“Operation to perform on each group”</em>:
              <ul>
                <li><em>“Type”</em>: <code class="language-plaintext highlighter-rouge">Mean</code></li>
                <li><em>“On column”</em>: <code class="language-plaintext highlighter-rouge">Column: 3</code>.</li>
              </ul>
            </li>
          </ul>
        </li>
        <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert operation to perform on each group”</em>
          <ul>
            <li><em>“Operation to perform on each group”</em>:
              <ul>
                <li><em>“Type”</em>: <code class="language-plaintext highlighter-rouge">Sum</code></li>
                <li><em>“On column”</em>: <code class="language-plaintext highlighter-rouge">Column: 4</code></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ol>
</blockquote>

<h2 id="finding-closest-relatives">Finding closest relatives</h2>

<p>The dataset generated above lists each <em>E. coli</em> genome accession only once and will have aggregate information for the number of alignment blocks, mean identity, and total length. Let’s graph these data:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-graphing-aggregated-data"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Graphing aggregated data</div>
  <ol>
    <li>Expand the aggregated data generated on the previous step by clicking on it.</li>
    <li>You will see “chart” button <i class="fas fa-chart-column" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span>. Click on it.</li>
    <li>In the central panel you will see a list of visualizations. Select <strong>Scatter plot (NVD3)</strong></li>
    <li>Click <strong>Select data</strong> <i class="fas fa-database" aria-hidden="true"></i><span class="visually-hidden">galaxy-chart-select-data</span></li>
    <li>Set <strong>Data point labels</strong> to <code class="language-plaintext highlighter-rouge">Column: 1</code> (Accession number of each <em>E. coli</em> genome)</li>
    <li>Set <strong>Values for x-axis</strong> to <code class="language-plaintext highlighter-rouge">Column: 2</code> (# of alignment blocks)</li>
    <li>Set <strong>Values for y-axis</strong> to <code class="language-plaintext highlighter-rouge">Column: 4</code> (Total alignment length)</li>
    <li>You can also click on configuration button <i class="fas fa-cog" aria-hidden="true"></i><span class="visually-hidden">galaxy-gear</span> and specify axis labels etc.</li>
  </ol>
</blockquote>

<p>The relationship between the number of alignment blocks and total alignment length looks like this:</p>

<figure id="figure-5" style="max-width: 90%;"><img src="../../images/best_genomes_chart.png" alt="Identity versus length. " width="3795" height="2955" loading="lazy" /><a target="_blank" href="../../images/best_genomes_chart.png" rel="noopener noreferrer"><small>Open image in new tab</small></a><br /><br /><figcaption><span class="figcaption-prefix"><strong>Figure 5</strong>:</span> Number of alignment blocks versus total alignment length (bp).</figcaption></figure>

<p>A group of three dots in the upper left corner of this scatter plot represents genomes that are most similar to our assembly: they have a SMALL number of alignment blocks but HIGH total alignment length. Mousing over these three dots (if you set <strong>Data point labels</strong> correctly in the previous step) will reveal their accession numbers: <code class="language-plaintext highlighter-rouge">LT906474.1</code>, <code class="language-plaintext highlighter-rouge">CP024090.1</code>, and <code class="language-plaintext highlighter-rouge">CP020543.1</code>.</p>

<blockquote class="warning">
  <div class="box-title warning-title" id="warning-things-change"><i class="fas fa-exclamation-triangle" aria-hidden="true" ></i> Warning: Things change</div>
  <p>It is possible that when you repeat these steps the set of sequences in NCBI will have changed and you will obtain different accession numbers. Keep this in mind.</p>
</blockquote>

<p>Let’s find table entries corresponding to these:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-extracting-into-about-best-hits"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Extracting into about best hits</div>
  <ol>
    <li><span class="tool" data-tool="Grep1" title="Select lines that match an expression tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Select lines that match an expression</strong></span> with the following parameters:
      <ul>
        <li><em>“Select lines from”</em>: to the output from <code class="language-plaintext highlighter-rouge">Datamash</code></li>
        <li><em>“the pattern”</em>: <code class="language-plaintext highlighter-rouge">LT906474|CP024090|CP020543</code>. (Here <code class="language-plaintext highlighter-rouge">|</code> means <code class="language-plaintext highlighter-rouge">or</code>).</li>
      </ul>
    </li>
  </ol>
</blockquote>

<p>This will generate a short table like this:</p>

<table>
  <tbody>
    <tr>
      <td>CP020543.1</td>
      <td>11</td>
      <td>99.926363636364</td>
      <td>4486976</td>
    </tr>
    <tr>
      <td>CP024090.1</td>
      <td>12</td>
      <td>99.911666666667</td>
      <td>4540487</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>8</td>
      <td>99.94</td>
      <td>4575200</td>
    </tr>
  </tbody>
</table>

<p>From this it appears that <code class="language-plaintext highlighter-rouge">LT906474.1</code> is closest to our assembly because it has eight alignment blocks, the longest total alignment length (4,575,223) and highest mean identity (99.94%).</p>

<h1 id="comparing-genome-architectures">Comparing genome architectures</h1>

<p>Now that we know the three genomes most closely related to ours, let’s take a closer look at them. First we will re-download sequence and annotation data.</p>

<h2 id="getting-sequences-and-annotations">Getting sequences and annotations</h2>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-uploading-sequences-and-annotations"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Uploading sequences and annotations</div>
  <p>Using the three accession listed above we will fetch necessary data from NCBI. We will use the spreadsheet we uploaded at the start to accomplish this.</p>

  <ol>
    <li><span class="tool" data-tool="upload1" title="Upload tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Upload</strong></span> the <em>E. coli</em> C genome if you have not done so already:
      <ul>
        <li>Click <strong>Paste/Fetch data</strong> button (Bottom of the interface box)</li>
        <li><strong>Paste</strong> <code class="language-plaintext highlighter-rouge">https://zenodo.org/record/1306128/files/Ecoli_C_assembly.fna</code> into the box.</li>
        <li><em>“Type”</em>: <code class="language-plaintext highlighter-rouge">fasta</code></li>
        <li>Click <strong>Start</strong></li>
      </ul>
    </li>
    <li><span class="tool" data-tool="Grep1" title="Select lines that match an expression tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Select lines that match an expression</strong></span> with the following parameters:
      <ul>
        <li><em>“Select lines from”</em>: the <code class="language-plaintext highlighter-rouge">genomes.tsv</code> you uploaded earlier</li>
        <li><em>“the pattern”</em>: <code class="language-plaintext highlighter-rouge">LT906474|CP024090|CP020543</code></li>
      </ul>
    </li>
    <li>
      <p><span class="tool" data-tool="Cut1" title="Cut tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Cut</strong></span> columns from a table:</p>

      <ul>
        <li><em>“Cut columns”</em>: <code class="language-plaintext highlighter-rouge">c8,c20</code></li>
        <li>
          <p><em>“From”</em>: the output of the <strong>select lines</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span></p>

          <p>It should look like:</p>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GCA_002079225.1	ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/002/079/225/GCA_002079225.1_ASM207922v1
GCA_002761835.1	ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/002/761/835/GCA_002761835.1_ASM276183v1
GCA_900186905.1	ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/900/186/905/GCA_900186905.1_49923_G01
</code></pre></div>          </div>
        </li>
      </ul>
    </li>
    <li>
      <p>Again <strong>Upload</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> data</p>

      <ol>
        <li>
          <p>Switch to the <code class="language-plaintext highlighter-rouge">Rule-based</code> tab on the right</p>

          <ul>
            <li><em>“Upload data as”</em>: <code class="language-plaintext highlighter-rouge">Collection(s)</code></li>
            <li><em>“Load tabular data from”</em>: <code class="language-plaintext highlighter-rouge">History Dataset</code></li>
            <li><em>“Select dataset to load”</em>: output of the cut tool</li>
          </ul>

          <blockquote class="tip">
            <div class="box-title tip-title" id="tip-dataset-not-there-1"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-dataset-not-there-1" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true" ></i> <span>Tip: dataset not there?</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
            <p>If the dataset doesn’t appear in the select list, refresh your page.</p>
          </blockquote>

          <blockquote class="tip">
            <div class="box-title tip-title" id="tip-take-a-shortcut"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-take-a-shortcut" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true" ></i> <span>Tip: Take a Shortcut</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
            <p>This step is quite long and potentially error prone. If you want to skip those steps, you can copy and paste this bit of text:</p>

            <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="nl">"rules"</span><span class="p">:[{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"add_column_regex"</span><span class="p">,</span><span class="nl">"target_column"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nl">"expression"</span><span class="p">:</span><span class="s2">".*(</span><span class="se">\\</span><span class="s2">/GCA.*$)"</span><span class="p">,</span><span class="nl">"group_count"</span><span class="p">:</span><span class="mi">1</span><span class="p">},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"add_column_concatenate"</span><span class="p">,</span><span class="nl">"target_column_0"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nl">"target_column_1"</span><span class="p">:</span><span class="mi">2</span><span class="p">},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"remove_columns"</span><span class="p">,</span><span class="nl">"target_columns"</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"add_column_value"</span><span class="p">,</span><span class="nl">"value"</span><span class="p">:</span><span class="s2">"_feature_table.txt.gz"</span><span class="p">},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"add_column_value"</span><span class="p">,</span><span class="nl">"value"</span><span class="p">:</span><span class="s2">"_genomic.fna.gz"</span><span class="p">},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"add_column_concatenate"</span><span class="p">,</span><span class="nl">"target_column_0"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nl">"target_column_1"</span><span class="p">:</span><span class="mi">2</span><span class="p">},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"add_column_concatenate"</span><span class="p">,</span><span class="nl">"target_column_0"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nl">"target_column_1"</span><span class="p">:</span><span class="mi">3</span><span class="p">},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"remove_columns"</span><span class="p">,</span><span class="nl">"target_columns"</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"add_column_value"</span><span class="p">,</span><span class="nl">"value"</span><span class="p">:</span><span class="s2">"Genes"</span><span class="p">},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"add_column_value"</span><span class="p">,</span><span class="nl">"value"</span><span class="p">:</span><span class="s2">"DNA"</span><span class="p">},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"add_column_regex"</span><span class="p">,</span><span class="nl">"target_column"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nl">"expression"</span><span class="p">:</span><span class="s2">".*</span><span class="se">\\</span><span class="s2">/(.*)"</span><span class="p">,</span><span class="nl">"group_count"</span><span class="p">:</span><span class="mi">1</span><span class="p">},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"swap_columns"</span><span class="p">,</span><span class="nl">"target_column_0"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nl">"target_column_1"</span><span class="p">:</span><span class="mi">5</span><span class="p">},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"remove_columns"</span><span class="p">,</span><span class="nl">"target_columns"</span><span class="p">:[</span><span class="mi">5</span><span class="p">]},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"split_columns"</span><span class="p">,</span><span class="nl">"target_columns_0"</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="nl">"target_columns_1"</span><span class="p">:[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">]}],</span><span class="nl">"mapping"</span><span class="p">:[{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"list_identifiers"</span><span class="p">,</span><span class="nl">"columns"</span><span class="p">:[</span><span class="mi">0</span><span class="p">],</span><span class="nl">"editing"</span><span class="p">:</span><span class="kc">false</span><span class="p">},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"url"</span><span class="p">,</span><span class="nl">"columns"</span><span class="p">:[</span><span class="mi">1</span><span class="p">]},{</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"collection_name"</span><span class="p">,</span><span class="nl">"columns"</span><span class="p">:[</span><span class="mi">2</span><span class="p">]}]}</span><span class="w">
</span></code></pre></div>            </div>

            <p>You can click the <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> next to the header <strong>Rules</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>, and paste the contents there, before clicking <strong>Apply</strong>, checking “Add nametag for name” and then <strong>Upload</strong>.</p>
          </blockquote>
        </li>
        <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Using a Regular Expression</code>
          <ul>
            <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">B</code></li>
            <li>Select <code class="language-plaintext highlighter-rouge">Create columns matching expression groups</code></li>
            <li><em>“Regular Expression”</em>: <code class="language-plaintext highlighter-rouge">.*(\/GCA.*$)</code></li>
            <li><em>“Number of Groups”</em>: <code class="language-plaintext highlighter-rouge">1</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Concatenate Columns</code>
          <ul>
            <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">B</code></li>
            <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">C</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Rules</strong>, select <code class="language-plaintext highlighter-rouge">Remove Columns(s)</code>
          <ul>
            <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">B</code>, <code class="language-plaintext highlighter-rouge">C</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Fixed Value</code>
          <ul>
            <li><em>“Value”</em>: <code class="language-plaintext highlighter-rouge">_feature_table.txt.gz</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Fixed Value</code>
          <ul>
            <li><em>“Value”</em>: <code class="language-plaintext highlighter-rouge">_genomic.fna.gz</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Concatenate Columns</code>
          <ul>
            <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">B</code></li>
            <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">C</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Concatenate Columns</code>
          <ul>
            <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">B</code></li>
            <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">D</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Rules</strong>, select <code class="language-plaintext highlighter-rouge">Remove Columns(s)</code>
          <ul>
            <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">B</code>, <code class="language-plaintext highlighter-rouge">C</code>, <code class="language-plaintext highlighter-rouge">D</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Fixed Value</code>
          <ul>
            <li><em>“Value”</em>: <code class="language-plaintext highlighter-rouge">Genes</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Fixed Value</code>
          <ul>
            <li><em>“Value”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Column</strong>, select <code class="language-plaintext highlighter-rouge">Using a Regular Expression</code>
          <ul>
            <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">B</code></li>
            <li>Select <code class="language-plaintext highlighter-rouge">Create columns matching expression groups</code></li>
            <li><em>“Regular Expression”</em>: <code class="language-plaintext highlighter-rouge">.*\/(.*)</code></li>
            <li><em>“Number of Groups”</em>: <code class="language-plaintext highlighter-rouge">1</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Rules</strong> menu, select <code class="language-plaintext highlighter-rouge">Swap Column(s)</code>
          <ul>
            <li><em>“Swap Column”</em>: <code class="language-plaintext highlighter-rouge">A</code></li>
            <li><em>“With Column”</em>: <code class="language-plaintext highlighter-rouge">F</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Rules</strong>, select <code class="language-plaintext highlighter-rouge">Remove Columns(s)</code>
          <ul>
            <li><em>“From Column”</em>: <code class="language-plaintext highlighter-rouge">F</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Rules</strong> menu, select <code class="language-plaintext highlighter-rouge">Split Column(s)</code>
          <ul>
            <li><em>“Odd Row Column(s)”</em>: <code class="language-plaintext highlighter-rouge">B</code>, <code class="language-plaintext highlighter-rouge">D</code></li>
            <li><em>“Even Row Column(s)”</em>: <code class="language-plaintext highlighter-rouge">C</code>, <code class="language-plaintext highlighter-rouge">E</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>From <strong>Rules</strong> menu, select <code class="language-plaintext highlighter-rouge">Add / Modify Column Definitions</code>
          <ul>
            <li><code class="language-plaintext highlighter-rouge">Add Definition</code>, <code class="language-plaintext highlighter-rouge">List Identifier(s)</code>, Select Column <code class="language-plaintext highlighter-rouge">A</code></li>
            <li><code class="language-plaintext highlighter-rouge">Add Definition</code>, <code class="language-plaintext highlighter-rouge">URL</code>, Column <code class="language-plaintext highlighter-rouge">B</code></li>
            <li><code class="language-plaintext highlighter-rouge">Add Definition</code>, <code class="language-plaintext highlighter-rouge">Collection Name</code>, Column <code class="language-plaintext highlighter-rouge">C</code></li>
            <li>Click <code class="language-plaintext highlighter-rouge">Apply</code></li>
          </ul>
        </li>
        <li>Check <strong>Add nametag for name</strong></li>
        <li><strong>Upload</strong></li>
      </ol>
    </li>
  </ol>

  <p>At the end of this you should have two collections: one containing genomic sequences and another containing annotations.</p>
</blockquote>

<h2 id="visualizing-rearrangements">Visualizing rearrangements</h2>

<p>Now we will perform alignments between our assembly and the three most closely related genomes to get a detailed look at any possible genome architecture changes. We will again use LASTZ:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-aligning-again"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Aligning again</div>

  <ol>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/devteam/lastz/lastz_wrapper_2/1.3.2" title="LASTZ tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>LASTZ</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.3.2)</span> with the following parameters:
      <ul>
        <li><em>“Select TARGET sequence(s) to align against”</em>: <code class="language-plaintext highlighter-rouge">from your history</code></li>
        <li><i class="far fa-folder" aria-hidden="true"></i><span class="visually-hidden">param-collection</span> <em>“Select a reference dataset”</em>: <code class="language-plaintext highlighter-rouge">DNA</code>, the <em>E. coli</em> genomes we uploaded earlier</li>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select QUERY sequence(s)”</em>: <code class="language-plaintext highlighter-rouge">E. coli C</code> fasta file</li>
        <li><strong>Chaining</strong>
          <ul>
            <li><em>“Perform chaining of HSPs with no penalties”</em>: <code class="language-plaintext highlighter-rouge">Yes</code>
              <blockquote class="tip">
                <div class="box-title tip-title" id="tip-what-does-chaining-do"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-what-does-chaining-do" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true" ></i> <span>Tip: What does chaining do?</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
                <p>For more information about chaining <a href="https://lastz.github.io/lastz/#ex_stages">look here</a></p>
              </blockquote>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ol>

  <ul>
    <li><strong>Output</strong>
      <ul>
        <li><em>“Specify the output format”</em>: <code class="language-plaintext highlighter-rouge">Customized general</code></li>
        <li><em>“Select which fields to include”</em>: select the following
          <ul>
            <li><code class="language-plaintext highlighter-rouge">score</code> alignment score</li>
            <li><code class="language-plaintext highlighter-rouge">name1</code> name of the <em>target</em> sequence</li>
            <li><code class="language-plaintext highlighter-rouge">strand1</code> strand for the <em>target</em> sequence</li>
            <li><code class="language-plaintext highlighter-rouge">zstart1</code> 0-based start of alignment in <em>target</em></li>
            <li><code class="language-plaintext highlighter-rouge">end1</code> end of alignment in <em>target</em></li>
            <li><code class="language-plaintext highlighter-rouge">length1</code> length of alignment in <em>target</em></li>
            <li><code class="language-plaintext highlighter-rouge">name2</code> name of <em>query</em> sequence</li>
            <li><code class="language-plaintext highlighter-rouge">strand2</code> strand for the <em>query</em> sequence</li>
            <li><code class="language-plaintext highlighter-rouge">zstart2</code> 0-based start of alignment in <em>query</em></li>
            <li><code class="language-plaintext highlighter-rouge">end2</code> end of alignment in <em>query</em></li>
            <li><code class="language-plaintext highlighter-rouge">identity</code> alignment identity</li>
            <li><code class="language-plaintext highlighter-rouge">number</code> alignment number</li>
          </ul>
        </li>
        <li><em>“Create a dotplot representation of alignments?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
      </ul>
    </li>
  </ul>

  <ol>
    <li>
      <p>Rename the <code class="language-plaintext highlighter-rouge">LASTZ on collection... mapped reads</code> something more memorable like <code class="language-plaintext highlighter-rouge">LASTZ Alignments</code></p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-renaming-a-collection"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-renaming-a-collection" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Renaming a collection</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ol>   <li>Click on the collection</li>   <li>Click on the name of the collection at the top</li>   <li>Change the name  to <code class="language-plaintext highlighter-rouge">LASTZ Alignments</code></li>   <li>Press <kbd>Enter</kbd></li> </ol> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
  </ol>

</blockquote>

<p>Because we chose to produce Dot Plots as well, LASTZ will generate two collections: one containing alignment data and the other containing DotPlots in PNG format:</p>

<figure id="figure-6" style="max-width: 90%;"><img src="../../images/three_dot_plots.png" alt="Dot Plots. " width="1792" height="630" loading="lazy" /><a target="_blank" href="../../images/three_dot_plots.png" rel="noopener noreferrer"><small>Open image in new tab</small></a><br /><br /><figcaption><span class="figcaption-prefix"><strong>Figure 6</strong>:</span> Dot Plot representations of alignments between three <i>E. coli</i> genomes and our assembly. Target (X-axis) is indicated above each dot plot. Query (Y-axis) is our assembly. Red circle indicates a region deleted in our assembly.</figcaption></figure>

<p>A quick conclusion that can be drawn here is that there is a large inversion in CP020543 and deletion in our assembly.</p>

<blockquote class="details">
  <div class="box-title details-title" id="details-interpreting-dot-plots"><button class="gtn-boxify-button details" type="button" aria-controls="details-interpreting-dot-plots" aria-expanded="true"><i class="fas fa-info-circle" aria-hidden="true" ></i> <span>Details: Interpreting Dot Plots</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
  <p>If you are not sure how to interpret Dot Plots here is a great explanation by <a href="http://schatz-lab.org/">Michael Schatz</a>:</p>

  <figure id="figure-7" style="max-width: 90%;"><img src="../../images/dotplot.png" alt="Interpreting Dot Plots. " width="783" height="907" loading="lazy" /><a target="_blank" href="../../images/dotplot.png" rel="noopener noreferrer"><small>Open image in new tab</small></a><br /><br /><figcaption><span class="figcaption-prefix"><strong>Figure 7</strong>:</span> A quick reference to interpreting Dot Plots. Our case is identical to <i>Insertion into Reference</i> shown in the upper left.</figcaption></figure>
</blockquote>

<p>For a moment let’s leave LASTZ result and create a browser that would allows us to display our results.</p>

<h2 id="producing-a-genome-browser-for-this-experiment">Producing a Genome Browser for this experiment</h2>

<p>The dot plots we’ve produced above are great, but they are static. It would be wonderful to load these data into a genome browser where one can zoom in and out as well as add tracks such as those containing genes. To create a browser we need a genome and a set of tracks. Tracks are features such as genes or SNPs with start and end positions corresponding to a coordinate system provided by the genome. Thus the first thing to do is to create a <em>genome</em> that would represent our experiment. We can create such a genome by simply combining the three genomes of closely related strains with our assembly in a single dataset—a hybrid genome.</p>

<h3 id="collecting-the-genomes">Collecting the genomes</h3>

<p>The first step will be collapsing the collection containing the three genomes into a single file:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-creating-a-single-fasta-dataset-with-all-genomes"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Creating a single FASTA dataset with all genomes</div>

  <ol>
    <li>
      <p><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/nml/collapse_collections/collapse_dataset/4.0" title="Collapse Collection tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Collapse Collection</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 4.0)</span></p>

      <ul>
        <li><i class="far fa-folder" aria-hidden="true"></i><span class="visually-hidden">param-collection</span> <em>“Collection of files to collapse”</em> the three genomes (collection) named <code class="language-plaintext highlighter-rouge">DNA</code></li>
      </ul>
    </li>
    <li>
      <p>Convert the datatype of this output to uncompress it</p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-converting-the-file-format-2"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-converting-the-file-format-2" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Converting the file format</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, click on the <i class="fas fa-cog" aria-hidden="true"></i><span class="visually-hidden">galaxy-gear</span> <strong>Convert</strong> tab on the top</li>   <li>In the upper part <i class="fas fa-cog" aria-hidden="true"></i><span class="visually-hidden">galaxy-gear</span> <strong>Convert</strong>, select <code class="language-plaintext highlighter-rouge">Convert compressed to uncompressed</code></li>   <li>Click the <strong>Create dataset</strong> button to start the conversion.</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_cat/0.1.0" title="Concatenate datasets tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Concatenate datasets</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 0.1.0)</span> tail-to-head (cat):
      <ul>
        <li><em>“Datasets to concatenate”</em>: <code class="language-plaintext highlighter-rouge">Collapse collection ... uncompressed</code>, the output from the uncompression step.</li>
        <li>Click <strong>Insert Dataset</strong> button
          <ul>
            <li><em>“Select”</em>: the <code class="language-plaintext highlighter-rouge">E. coli C</code> file from the start of the history</li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <p>Rename the output to <code class="language-plaintext highlighter-rouge">DNA (E. coli C + Relatives)</code></p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-renaming-a-dataset-1"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-renaming-a-dataset-1" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Renaming a dataset</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, change the <strong>Name</strong> field  to <code class="language-plaintext highlighter-rouge">DNA (E. coli C + Relatives)</code></li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
  </ol>
</blockquote>

<p>The resulting dataset contains four sequences: three genomes plus our assembly.</p>

<h3 id="preparing-the-alignments">Preparing the alignments</h3>

<p>Above we computed alignments using LASTZ. Because we ran LASTZ on a collection containing genomic sequences, LASTZ produced a collection as well (actually two collections: one containing alignments an the other with dot plots). To display alignments in the browser we need to do several things:</p>

<ol>
  <li>Fix unwanted <code class="language-plaintext highlighter-rouge">%</code> signs in LASTZ output</li>
  <li>Create names for alignment blocks</li>
  <li>Convert LASTZ output into <a href="https://genome.ucsc.edu/FAQ/FAQformat.html#format1">BED</a> format</li>
  <li>Create a single BED track containing alignments against all four genomes.</li>
</ol>

<p>To begin, let’s look at the LASTZ output:</p>

<table>
  <thead>
    <tr>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>10</th>
      <th>11</th>
      <th>12</th>
      <th>13</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>10141727</td>
      <td><code class="language-plaintext highlighter-rouge">CP020543.1</code></td>
      <td>+</td>
      <td>48</td>
      <td>106157</td>
      <td>106109</td>
      <td><code class="language-plaintext highlighter-rouge">Ecoli_C</code></td>
      <td>+</td>
      <td>0</td>
      <td>106109</td>
      <td>106107/106109</td>
      <td>100.0%</td>
      <td>1</td>
    </tr>
    <tr>
      <td>5465</td>
      <td><code class="language-plaintext highlighter-rouge">CP020543.1</code></td>
      <td>+</td>
      <td>121267</td>
      <td>121367</td>
      <td>100</td>
      <td><code class="language-plaintext highlighter-rouge">Ecoli_C</code></td>
      <td>+</td>
      <td>109317</td>
      <td>109418</td>
      <td>76/100</td>
      <td>76.0%</td>
      <td>2</td>
    </tr>
    <tr>
      <td>4870</td>
      <td><code class="language-plaintext highlighter-rouge">CP020543.1</code></td>
      <td>+</td>
      <td>159368</td>
      <td>159512</td>
      <td>144</td>
      <td><code class="language-plaintext highlighter-rouge">Ecoli_C</code></td>
      <td>+</td>
      <td>128706</td>
      <td>128828</td>
      <td>95/115</td>
      <td>82.6%</td>
      <td>3</td>
    </tr>
  </tbody>
</table>

<p>One immediate problem is <code class="language-plaintext highlighter-rouge">%</code> character in column 12 (alignment identity). We need to remove it as we will use this for the score column of the BED file, and that must be a normal number and not a percentage.</p>

<p>Column 13 of the fields chosen by us for <a href="#hands-on-aligning-again">LASTZ run</a> is <code class="language-plaintext highlighter-rouge">number</code>. This is an incrementing number given by LASTZ to every alignment block so it can be uniquely identified. The problem is that by running LASTZ on a collection of three genomes it generated a number for each output independently starting with <code class="language-plaintext highlighter-rouge">1</code> each time. So these alignments identified are unique within each individual run but are redundant for multiple runs. We can fix that by pre-pending each alignment identified (column 12) with the name of the target sequence (column 2). This would create alignments that are truly unique. For example, in the case of the LASTZ output shown above alignment identifier <code class="language-plaintext highlighter-rouge">1</code> will become <code class="language-plaintext highlighter-rouge">CP020543.11</code>, <code class="language-plaintext highlighter-rouge">2</code> will become <code class="language-plaintext highlighter-rouge">CP020543.12</code> and so on.</p>

<blockquote class="comment">
  <div class="box-title comment-title" id="comment-bed-format"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment: BED format</div>
  <p>Our goal is to convert this into a format that will be acceptable to the genome browser. One of such formats is <a href="https://genome.ucsc.edu/FAQ/FAQformat.html#format1">BED</a>. In one of its simplest forms (there is one even simpler - 3 column BED) it has six columns:</p>

  <ol>
    <li>Chromosome ID</li>
    <li>Start</li>
    <li>End</li>
    <li>Name of the feature</li>
    <li>Score (must be between 0 and 1000)</li>
    <li>Strand (<code class="language-plaintext highlighter-rouge">+</code>, <code class="language-plaintext highlighter-rouge">-</code>, or <code class="language-plaintext highlighter-rouge">.</code> for no strand data).</li>
  </ol>
</blockquote>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-convert-lastz-output-to-bed"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Convert LASTZ output to BED</div>

  <ol>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/iuc/datamash_ops/datamash_ops/1.1.0" title="Replace Text tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Replace Text</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.1.0)</span> in a specific column:
      <ul>
        <li><i class="far fa-folder" aria-hidden="true"></i><span class="visually-hidden">param-collection</span> <em>“File to process”</em>: output of LASTZ (<code class="language-plaintext highlighter-rouge">LASTZ Alignments</code>)</li>
        <li><em>“in column”</em>: <code class="language-plaintext highlighter-rouge">Column 12</code></li>
        <li><em>“Find pattern”</em>: <code class="language-plaintext highlighter-rouge">%</code></li>
        <li><em>“Replace with”</em>: leave empty</li>
      </ul>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/devteam/merge_cols/mergeCols1/1.0.1" title="Merge Columns together tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Merge Columns together</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.0.1)</span> with the following parameters:
      <ul>
        <li><i class="far fa-folder" aria-hidden="true"></i><span class="visually-hidden">param-collection</span> <em>“Select data”</em>: the output of the previous step, <code class="language-plaintext highlighter-rouge">Replace Text on collection ...</code></li>
        <li><em>“Merge column”</em>: <code class="language-plaintext highlighter-rouge">Column: 2</code> (this is the Target sequence name)</li>
        <li><em>“with column”</em>: <code class="language-plaintext highlighter-rouge">Column: 13</code> (this is the alignment block created by LASTZ)</li>
      </ul>

      <blockquote class="details">
        <div class="box-title details-title" id="details-output-information"><button class="gtn-boxify-button details" type="button" aria-controls="details-output-information" aria-expanded="true"><i class="fas fa-info-circle" aria-hidden="true" ></i> <span>Details: Output information</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
        <p>The tool added a new column (Column 14) containing a merge between the target name and alignment id. Now we can differentiate between alignment blocks that exist between, for example, <code class="language-plaintext highlighter-rouge">CP020543.1</code> and <code class="language-plaintext highlighter-rouge">LT906474.1</code> because they will have accessions embedded within alignment block IDs. For example, the first alignment between <code class="language-plaintext highlighter-rouge">CP020543.1</code> and our assembly <code class="language-plaintext highlighter-rouge">Ecoli_C</code> will have alignment block id <code class="language-plaintext highlighter-rouge">CP020543.11</code>, while the 225th alignment between <code class="language-plaintext highlighter-rouge">LT906474.1</code> and <code class="language-plaintext highlighter-rouge">Ecoli_C</code> will have ID <code class="language-plaintext highlighter-rouge">LT906474.1225</code>. Because of this we can collapse the entire collection of alignments into a single dataset:</p>
      </blockquote>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/nml/collapse_collections/collapse_dataset/4.0" title="Collapse Collection tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Collapse Collection</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 4.0)</span> with the following parameters:
      <ul>
        <li><i class="far fa-folder" aria-hidden="true"></i><span class="visually-hidden">param-collection</span> <em>“Collection of files to collapse”</em>: the output of the previous step, <code class="language-plaintext highlighter-rouge">Merge Columns on collection...</code></li>
      </ul>

      <p>This will produce a single dataset combining all alignment info. We can tell which alignments are between which genomes because we have set identifiers such as <code class="language-plaintext highlighter-rouge">CP020543.13</code>.</p>
    </li>
    <li>
      <p>We will reuse this file later so let’s rename it <code class="language-plaintext highlighter-rouge">Unprocessed Alignments</code></p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-renaming-a-dataset-2"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-renaming-a-dataset-2" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Renaming a dataset</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, change the <strong>Name</strong> field  to <code class="language-plaintext highlighter-rouge">Unprocessed Alignments</code></li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
    <li>
      <p><span class="tool" data-tool="Cut1" title="Cut tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Cut</strong></span> columns from a table:</p>

      <ul>
        <li><em>“Cut columns”</em>: <code class="language-plaintext highlighter-rouge">c2,c4,c5,c14,c12,c8</code></li>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“From”</em>: the output of the previous step (<code class="language-plaintext highlighter-rouge">Unprocessed alignments</code>)</li>
      </ul>

      <blockquote class="details">
        <div class="box-title details-title" id="details-converting-to-bed"><button class="gtn-boxify-button details" type="button" aria-controls="details-converting-to-bed" aria-expanded="true"><i class="fas fa-info-circle" aria-hidden="true" ></i> <span>Details: Converting to BED</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
        <p>Let’s look again at the data we generated in the last step:</p>

        <table>
          <thead>
            <tr>
              <th>1</th>
              <th>2</th>
              <th>4</th>
              <th>4</th>
              <th>5</th>
              <th>6</th>
              <th>7</th>
              <th>8</th>
              <th>9</th>
              <th>10</th>
              <th>11</th>
              <th>12</th>
              <th>13</th>
              <th>14</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>10141727</td>
              <td>CP020543.1</td>
              <td>+</td>
              <td>48</td>
              <td>106157</td>
              <td>106109</td>
              <td>Ecoli_C</td>
              <td>+</td>
              <td>0</td>
              <td>106109</td>
              <td>106107/106109</td>
              <td>100.0</td>
              <td>1</td>
              <td>CP020543.11</td>
            </tr>
            <tr>
              <td>5465</td>
              <td>CP020543.1</td>
              <td>+</td>
              <td>121267</td>
              <td>121367</td>
              <td>100</td>
              <td>Ecoli_C</td>
              <td>+</td>
              <td>109317</td>
              <td>109418</td>
              <td>76/100</td>
              <td>76.0</td>
              <td>2</td>
              <td>CP020543.12</td>
            </tr>
            <tr>
              <td>4870</td>
              <td>CP020543.1</td>
              <td>+</td>
              <td>159368</td>
              <td>159512</td>
              <td>144</td>
              <td>Ecoli_C</td>
              <td>+</td>
              <td>128706</td>
              <td>128828</td>
              <td>95/115</td>
              <td>82.6</td>
              <td>3</td>
              <td>CP020543.13</td>
            </tr>
          </tbody>
        </table>

        <p>Alignments are regions of high similarity between two sequences. Therefore each alignment block has two sets of coordinates associated with it: start/end in the first sequences (target) and start/end in the second sequence (query). But BED only has one set of coordinates. Thus we can create two BEDs: one using coordinates from the target and the other one from query. The first file will depict alignment data from the standpoint of target sequences <code class="language-plaintext highlighter-rouge">CP020543.1</code>, <code class="language-plaintext highlighter-rouge">CP024090.1</code>, <code class="language-plaintext highlighter-rouge">LT906474.1</code> and the second from the standpoint of query - our own assembly <a href="#hands-on-fixing-assembly">we called</a> <code class="language-plaintext highlighter-rouge">Ecoli_C</code>.
In the first BED, column 1 will contain names of targets (<code class="language-plaintext highlighter-rouge">CP020543.1</code>, <code class="language-plaintext highlighter-rouge">CP024090.1</code>, and <code class="language-plaintext highlighter-rouge">LT906474.1</code>).
In the second BED, column 1 will contain name of our assembly: <code class="language-plaintext highlighter-rouge">Ecoli_C</code>.</p>

        <p>To create the first BED we will cut six columns from the dataset produced at the last step. Specifically, to produce the target BED we will cut columns 2, 4, 5, 14, 12, and 8. To produce the query BED columns 7, 9, 10, 14, 12, 8 will be cut.</p>
      </blockquote>

      <blockquote class="warning">
        <div class="box-title warning-title" id="warning-there-are-multiple-b-cut-b-tools"><i class="fas fa-exclamation-triangle" aria-hidden="true" ></i> Warning: There are multiple <b>CUT</b> tools!</div>
        <p>The Hands-On box below uses <strong>Cut</strong> tool. Beware that some Galaxy instances contain multiple <strong>Cut</strong> tools. The one that is used below is called <strong>Cut columns from a table</strong> while the other one, which we will NOT use is called <strong>Cut columns from a table (cut)</strong>. It is a small difference, but the tools are different.</p>
      </blockquote>

      <p>This will produce a dataset looking like this:</p>

      <table>
        <thead>
          <tr>
            <th>1</th>
            <th>2</th>
            <th>3</th>
            <th>4</th>
            <th>5</th>
            <th>6</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>CP020543.1</td>
            <td>48</td>
            <td>106157</td>
            <td>CP020543.11</td>
            <td>100.0</td>
            <td>+</td>
          </tr>
          <tr>
            <td>CP020543.1</td>
            <td>121267</td>
            <td>121367</td>
            <td>CP020543.12</td>
            <td>76.0</td>
            <td>+</td>
          </tr>
          <tr>
            <td>CP020543.1</td>
            <td>159368</td>
            <td>159512</td>
            <td>CP020543.13</td>
            <td>82.6</td>
            <td>+</td>
          </tr>
        </tbody>
      </table>

      <blockquote class="tip">
        <div class="box-title tip-title" id="tip-not-exactly-the-same"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-not-exactly-the-same" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true" ></i> <span>Tip: Not exactly the same?</span><span class="fold-unfold fa fa-minus-square"></span></button></div>
        <p>Depending on the steps and other choices, the genomes may be in a different order here. This is unimportant, as all of the same alignments are contained in the file, just the ordering is different. As long as these columns look correct (start/end in column 2/3 are reasonable, a number between 0-100 in column 5, and a + or - in column 6) then it is OK.</p>
      </blockquote>
    </li>
    <li>
      <p>Rename this “Target Alignments”</p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-renaming-a-dataset-3"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-renaming-a-dataset-3" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Renaming a dataset</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, change the <strong>Name</strong> field  to <code class="language-plaintext highlighter-rouge">Target Alignments</code></li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
    <li><span class="tool" data-tool="Cut1" title="Cut columns from a table tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Cut columns from a table</strong></span> with the following parameters
      <ul>
        <li><em>“Cut columns”</em>: <code class="language-plaintext highlighter-rouge">c7,c9,c10,c14,c12,c8</code> (look at the data shown above and the definition of BED to see why we make these choices.)</li>
        <li><em>“From”</em>: <code class="language-plaintext highlighter-rouge">Unprocessed alignments</code>, the output of <strong>collection collapse</strong></li>
      </ul>
    </li>
    <li>
      <p>Rename this “Query Alignments”</p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-renaming-a-dataset-4"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-renaming-a-dataset-4" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Renaming a dataset</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, change the <strong>Name</strong> field  to <code class="language-plaintext highlighter-rouge">Query Alignments</code></li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
    <li><span class="tool" data-tool="cat1" title="Concatenate datasets tail-to-head tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Concatenate datasets tail-to-head</strong></span>
      <ul>
        <li><em>“Concatenate Dataset”</em>: <code class="language-plaintext highlighter-rouge">Query Alignments</code></li>
        <li>Click “Insert Dataset” button</li>
        <li><em>“1: Dataset”</em>: <code class="language-plaintext highlighter-rouge">Target Alignments</code></li>
      </ul>
    </li>
    <li>
      <p>Change the datatype of the output to BED and rename the output “Target &amp; Query Alignments”</p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-changing-the-datatype"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-changing-the-datatype" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Changing the datatype</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, click <i class="fas fa-database" aria-hidden="true"></i><span class="visually-hidden">galaxy-chart-select-data</span> <strong>Datatypes</strong> tab on the top</li>   <li>In the <i class="fas fa-database" aria-hidden="true"></i><span class="visually-hidden">galaxy-chart-select-data</span> <strong>Assign Datatype</strong>, select <code class="language-plaintext highlighter-rouge">bed</code> from “<em>New type</em>” dropdown     <ul>       <li>Tip: you can start typing the datatype into the field to filter the dropdown menu</li>     </ul>   </li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-renaming-a-dataset-5"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-renaming-a-dataset-5" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Renaming a dataset</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, change the <strong>Name</strong> field  to <code class="language-plaintext highlighter-rouge">Target &amp; Query Alignments</code></li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
  </ol>

</blockquote>

<p>This will produce a dataset looking like this:</p>

<table>
  <thead>
    <tr>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Ecoli_C</td>
      <td>0</td>
      <td>106109</td>
      <td>CP020543.11</td>
      <td>100.0</td>
      <td>+</td>
    </tr>
    <tr>
      <td>Ecoli_C</td>
      <td>109317</td>
      <td>109418</td>
      <td>CP020543.12</td>
      <td>76.0</td>
      <td>+</td>
    </tr>
    <tr>
      <td>Ecoli_C</td>
      <td>128706</td>
      <td>128828</td>
      <td>CP020543.13</td>
      <td>82.6</td>
      <td>+</td>
    </tr>
  </tbody>
</table>

<h3 id="extracting-genes">Extracting Genes</h3>

<p>Earlier we <a href="#hands-on-uploading-sequences-and-annotations">downloaded</a> gene annotations for the three genomes most closely related to our assembly. The data was downloaded as a collection containing annotations for <code class="language-plaintext highlighter-rouge">CP020543.1</code>, <code class="language-plaintext highlighter-rouge">CP024090.1</code>, and <code class="language-plaintext highlighter-rouge">LT906474.1</code>. The annotation data contains multiple columns described by NCBI as follows (you can look at the actual data by finding the annotation collection from above (called <code class="language-plaintext highlighter-rouge">Genes</code>)):</p>

<blockquote class="quote" cite="https://ftp.ncbi.nlm.nih.gov/genomes/genbank/README.txt">
  <p>Tab-delimited text file reporting locations and attributes for a subset of
annotated features. Included feature types are: gene, CDS, RNA (all types),
operon, C/V/N/S_region, and V/D/J_segment.</p>

  <p>The file is tab delimited (including a #header) with the following columns:</p>

  <table>
    <thead>
      <tr>
        <th>Column</th>
        <th>Definition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1</td>
        <td>feature: INSDC feature type</td>
      </tr>
      <tr>
        <td>2</td>
        <td>class: Gene features are subdivided into classes according to the gene biotype computed based on the set of child features for that gene. See the description of the gene_biotype attribute in the GFF3 documentation for more details: ftp://ftp.ncbi.nlm.nih.gov/genomes/README_GFF3.txt ncRNA features are subdivided according to the ncRNA_class. CDS features are subdivided into with_protein and without_protein, depending on whether the CDS feature has a protein accession assigned or not. CDS features marked as without_protein include CDS features for C regions and V/D/J segments of immunoglobulin and similar genes that undergo genomic rearrangement, and pseudogenes.</td>
      </tr>
      <tr>
        <td>3</td>
        <td>assembly: assembly accession.version</td>
      </tr>
      <tr>
        <td>4</td>
        <td>assembly_unit: name of the assembly unit, such as “Primary Assembly”, “ALT_REF_LOCI_1”, or “non-nuclear”</td>
      </tr>
      <tr>
        <td>5</td>
        <td>seq_type: sequence type, computed from the “Sequence-Role” and “Assigned-Molecule-Location/Type” in the <code class="language-plaintext highlighter-rouge">*_assembly_report.txt</code> file. The value is computed as: if an assembled-molecule, then reports the location/type value. e.g. chromosome, mitochondrion, or plasmid if an unlocalized-scaffold, then report “unlocalized scaffold on <type>". e.g. unlocalized scaffold on chromosome else the role, e.g. alternate scaffold, fix patch, or novel patch</type></td>
      </tr>
      <tr>
        <td>6</td>
        <td>chromosome</td>
      </tr>
      <tr>
        <td>7</td>
        <td>genomic_accession</td>
      </tr>
      <tr>
        <td>8</td>
        <td>start: feature start coordinate (base-1). start is always less than end</td>
      </tr>
      <tr>
        <td>9</td>
        <td>end: feature end coordinate (base-1)</td>
      </tr>
      <tr>
        <td>10</td>
        <td>strand</td>
      </tr>
      <tr>
        <td>11</td>
        <td>product_accession: accession.version of the product referenced by this feature, if exists</td>
      </tr>
      <tr>
        <td>12</td>
        <td>non-redundant_refseq: for bacteria and archaea assemblies, the non-redundant <code class="language-plaintext highlighter-rouge">WP_</code> protein accession corresponding to the CDS feature. May be the same as column 11, for RefSeq genomes annotated directly with <code class="language-plaintext highlighter-rouge">WP_</code> RefSeq proteins, or may be different, for genomes annotated with genome-specific protein accessions (e.g. <code class="language-plaintext highlighter-rouge">NP_</code> or <code class="language-plaintext highlighter-rouge">YP_</code> RefSeq proteins) that reference a <code class="language-plaintext highlighter-rouge">WP_</code> RefSeq accession.</td>
      </tr>
      <tr>
        <td>13</td>
        <td>related_accession: for eukaryotic RefSeq annotations, the RefSeq protein accession corresponding to the transcript feature, or the RefSeq transcript accession corresponding to the protein feature.</td>
      </tr>
      <tr>
        <td>14</td>
        <td>name: For genes, this is the gene description or full name. For RNA, CDS, and some other features, this is the product name.</td>
      </tr>
      <tr>
        <td>15</td>
        <td>symbol: gene symbol</td>
      </tr>
      <tr>
        <td>16</td>
        <td>GeneID: NCBI GeneID, for those RefSeq genomes included in NCBI’s Gene resource</td>
      </tr>
      <tr>
        <td>17</td>
        <td>locus_tag</td>
      </tr>
      <tr>
        <td>18</td>
        <td>feature_interval_length: sum of the lengths of all intervals for the feature (i.e. the length without introns for a joined feature)</td>
      </tr>
      <tr>
        <td>19</td>
        <td>product_length: length of the product corresponding to the accession.version in column 11. Protein product lengths are in amino acid units, and do not include the stop codon which is included in column 18. Additionally, product_length may differ from feature_interval_length if the product contains sequence differences vs. the genome, as found for some RefSeq transcript and protein products based on mRNA sequences and also for INSDC proteins that are submitted to correct genome discrepancies.</td>
      </tr>
      <tr>
        <td>20</td>
        <td>attributes: semi-colon delimited list of a controlled set of qualifiers. The list currently includes: partial, pseudo, pseudogene, ribosomal_slippage, trans_splicing, anticodon=NNN (for tRNAs), old_locus_tag=XXX</td>
      </tr>
    </tbody>
  </table>

</blockquote>

<p>Our objective is to convert these data into BED. In this analysis we want to initially concentrate on protein coding regions. To do this let’s select all lines from the annotation datasets that contain the term <code class="language-plaintext highlighter-rouge">CDS</code>, then
we will produce a collection with three datasets just like the original <code class="language-plaintext highlighter-rouge">Genes</code> collection but containing only CDS data. Next we need to cut out only those columns that need to be included in the BED format. There is one problem with this. We are trying to convert these data into <a href="#comment-bed-format">6 column BED</a>. In this format the fifth column (score) must have a value between 0 and 1000. To satisfy this requirement we will create a dummy column that will always have a value of <code class="language-plaintext highlighter-rouge">0</code>.
Finally we can cut necessary columns from these datasets. These columns are 8 (start), 9 (end), 15 (gene symbol), 21 (dummy column we just created), and c10 (strand), and then we can add the genome name.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-extract-cdss-from-annotation-datasets"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Extract CDSs from annotation datasets</div>
  <ol>
    <li><span class="tool" data-tool="Grep1" title="Select lines that match an expression tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Select lines that match an expression</strong></span> with the following parameters:
      <ul>
        <li><i class="far fa-folder" aria-hidden="true"></i><span class="visually-hidden">param-collection</span> <em>“Select lines from”</em>: the collection containing annotations, <code class="language-plaintext highlighter-rouge">Genes</code></li>
        <li><em>“the pattern”</em>: <code class="language-plaintext highlighter-rouge">^CDS</code></li>
      </ul>

      <p>This is because we want to retain all lines that begin (<code class="language-plaintext highlighter-rouge">^</code>) with <code class="language-plaintext highlighter-rouge">CDS</code>.</p>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/devteam/add_value/addValue/1.0.0" title="Add column to an existing dataset tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Add column to an existing dataset</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.0.0)</span>   with the following parameters:
      <ul>
        <li><em>“Add this value”</em>: <code class="language-plaintext highlighter-rouge">0</code></li>
        <li><i class="far fa-folder" aria-hidden="true"></i><span class="visually-hidden">param-collection</span> <em>“to Dataset”</em>: the collection produced by the previous step (<code class="language-plaintext highlighter-rouge">Select on collection...</code>)</li>
      </ul>

      <p>This will be used for the “score” field of the BED file since we do not have a proper “score”</p>
    </li>
    <li>
      <p><span class="tool" data-tool="Cut1" title="Cut columns from a table tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Cut columns from a table</strong></span> with the following parameters:</p>

      <p>We will produce two BED files, one using the product name (e.g. “chromosomal replication initiator protein DnaA”) and one using the symbol (e.g. “thrA”). The product name is much more interesting to see in visualisations, but the symbol is more often used in other analyses and we will use that file later. We will start with the product name:</p>

      <ul>
        <li><em>“Cut columns”</em>: <code class="language-plaintext highlighter-rouge">c8,c9,c14,c21,c10</code></li>
        <li><i class="far fa-folder" aria-hidden="true"></i><span class="visually-hidden">param-collection</span> <em>“From”</em> the collection produced at the previous step (<code class="language-plaintext highlighter-rouge">Add column on collection...</code>)</li>
      </ul>

      <p>This will produce a collection with each element containing data like this:</p>

      <table>
        <thead>
          <tr>
            <th>1</th>
            <th>2</th>
            <th>3</th>
            <th>4</th>
            <th>5</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>49</td>
            <td>1452</td>
            <td>chromosomal replication initiator protein DnaA</td>
            <td>0</td>
            <td>+</td>
          </tr>
          <tr>
            <td>1457</td>
            <td>2557</td>
            <td>DNA polymerase III subunit beta</td>
            <td>0</td>
            <td>+</td>
          </tr>
          <tr>
            <td>2557</td>
            <td>3630</td>
            <td>DNA replication and repair protein RecF</td>
            <td>0</td>
            <td>+</td>
          </tr>
        </tbody>
      </table>

      <p>As we mentioned above these datasets lack genome IDs such as <code class="language-plaintext highlighter-rouge">CP020543.1</code>. However, the individual elements in the collection we’ve created already have genome IDs. We will leverage this when collapsing this collection into a single dataset:</p>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/nml/collapse_collections/collapse_dataset/4.2" title="Collapse Collection tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Collapse Collection</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 4.2)</span>   with the following parameters:
      <ul>
        <li><em>“Collection of files to collapse”</em>: the output of the previous step (<code class="language-plaintext highlighter-rouge">Cut on collection...</code>)</li>
        <li><em>“Prepend File name”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
        <li><em>“Where to add dataset name”</em>: <code class="language-plaintext highlighter-rouge">Same line and each line in dataset</code></li>
      </ul>
    </li>
    <li>
      <p><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_column/1.1.3" title="Replace Text tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Replace Text</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.1.3)</span> in a specific column</p>

      <p>Many bed parsers do not like whitespace in the <code class="language-plaintext highlighter-rouge">Name</code> column, so we will replace that</p>

      <ul>
        <li><i class="far fa-folder" aria-hidden="true"></i><span class="visually-hidden">param-collection</span> <em>“File to process”</em>: output of the previous <strong>Collapse Collection</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> step</li>
        <li><em>“in column”</em>: <code class="language-plaintext highlighter-rouge">Column 4</code></li>
        <li><em>“Find pattern”</em>: <code class="language-plaintext highlighter-rouge">[^A-Za-z0-9_-]</code> (any character that isn’t a number or letter or underscore or minus)</li>
        <li><em>“Replace with”</em>: <code class="language-plaintext highlighter-rouge">_</code></li>
      </ul>
    </li>
    <li>
      <p>Change the datatype of the collection to <code class="language-plaintext highlighter-rouge">bed</code> and rename it to <code class="language-plaintext highlighter-rouge">Genes (E. coli Relatives)</code></p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-changing-the-datatype-1"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-changing-the-datatype-1" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Changing the datatype</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, click <i class="fas fa-database" aria-hidden="true"></i><span class="visually-hidden">galaxy-chart-select-data</span> <strong>Datatypes</strong> tab on the top</li>   <li>In the <i class="fas fa-database" aria-hidden="true"></i><span class="visually-hidden">galaxy-chart-select-data</span> <strong>Assign Datatype</strong>, select <code class="language-plaintext highlighter-rouge">bed</code> from “<em>New type</em>” dropdown     <ul>       <li>Tip: you can start typing the datatype into the field to filter the dropdown menu</li>     </ul>   </li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-renaming-a-dataset-6"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-renaming-a-dataset-6" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Renaming a dataset</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, change the <strong>Name</strong> field  to <code class="language-plaintext highlighter-rouge">Genes (E. coli Relatives)</code></li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>

      <blockquote class="question">
        <div class="box-title question-title" id="question-2"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>
        <p>How does your output look?</p>
        <blockquote class="solution">
          <div class="box-title solution-title" id="solution-2"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-2" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

          <p>The resulting dataset should look like this:</p>

          <table>
            <thead>
              <tr>
                <th>1</th>
                <th>2</th>
                <th>3</th>
                <th>4</th>
                <th>5</th>
                <th>6</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>CP020543.1</td>
                <td>49</td>
                <td>1452</td>
                <td>chromosomal_replication_initiator_protein_DnaA</td>
                <td>0</td>
                <td>+</td>
              </tr>
              <tr>
                <td>CP020543.1</td>
                <td>1457</td>
                <td>2557</td>
                <td>DNA_polymerase_III_subunit_beta</td>
                <td>0</td>
                <td>+</td>
              </tr>
              <tr>
                <td>CP020543.1</td>
                <td>2557</td>
                <td>3630</td>
                <td>DNA_replication_and_repair_protein_RecF</td>
                <td>0</td>
                <td>+</td>
              </tr>
            </tbody>
          </table>

          <p>You can see that the genome ID is now appended at the beginning and this dataset looks like a legitimate BED that can be visualized.</p>
        </blockquote>
      </blockquote>
    </li>
  </ol>

  <p>For the BED file with the symbol:</p>

  <ol>
    <li>
      <p><span class="tool" data-tool="Cut1" title="Cut columns from a table tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Cut columns from a table</strong></span> with the following parameters:</p>

      <p>We will produce two BED files, one using the product name (e.g. “chromosomal replication initiator protein DnaA”) and one using the symbol (e.g. “thrA”). The product name is much more interesting to see in visualisations, but the symbol is more often used in other analyses and we will use that file later. We will start with the product name:</p>

      <ul>
        <li><em>“Cut columns”</em>: <code class="language-plaintext highlighter-rouge">c8,c9,c15,c21,c10</code></li>
        <li><i class="far fa-folder" aria-hidden="true"></i><span class="visually-hidden">param-collection</span> <em>“From”</em> the collection produced at the previous step (<code class="language-plaintext highlighter-rouge">Add column on collection...</code>)</li>
      </ul>

      <p>This will produce a collection with each element containing data like this:</p>

      <table>
        <thead>
          <tr>
            <th>1</th>
            <th>2</th>
            <th>3</th>
            <th>4</th>
            <th>5</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>49</td>
            <td>1452</td>
            <td>dnaA</td>
            <td>0</td>
            <td>+</td>
          </tr>
          <tr>
            <td>1457</td>
            <td>2557</td>
            <td> </td>
            <td>0</td>
            <td>+</td>
          </tr>
          <tr>
            <td>2557</td>
            <td>3630</td>
            <td> </td>
            <td>0</td>
            <td>+</td>
          </tr>
        </tbody>
      </table>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/nml/collapse_collections/collapse_dataset/4.0" title="Collapse Collection tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Collapse Collection</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 4.0)</span> with the following parameters:
      <ul>
        <li><em>“Collection of files to collapse”</em>: the output of the previous step (<code class="language-plaintext highlighter-rouge">Cut on collection...</code>)</li>
        <li><em>“Append File name”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
        <li><em>“Where to add dataset name”</em>: <code class="language-plaintext highlighter-rouge">Same line and each line in dataset</code></li>
      </ul>
    </li>
    <li>
      <p>Change the datatype of the collection to <code class="language-plaintext highlighter-rouge">bed</code> and rename it to <code class="language-plaintext highlighter-rouge">Genes (E. coli Relatives) with Symbol Name</code></p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-changing-the-datatype-2"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-changing-the-datatype-2" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Changing the datatype</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, click <i class="fas fa-database" aria-hidden="true"></i><span class="visually-hidden">galaxy-chart-select-data</span> <strong>Datatypes</strong> tab on the top</li>   <li>In the <i class="fas fa-database" aria-hidden="true"></i><span class="visually-hidden">galaxy-chart-select-data</span> <strong>Assign Datatype</strong>, select <code class="language-plaintext highlighter-rouge">bed</code> from “<em>New type</em>” dropdown     <ul>       <li>Tip: you can start typing the datatype into the field to filter the dropdown menu</li>     </ul>   </li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-renaming-a-dataset-7"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-renaming-a-dataset-7" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Renaming a dataset</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, change the <strong>Name</strong> field  to <code class="language-plaintext highlighter-rouge">Genes (E. coli Relatives) with Symbol Name</code></li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
  </ol>

</blockquote>

<h3 id="extracting-gap-regions">Extracting Gap Regions</h3>

<p>It can be useful to have the complement of the aligned regions, to know which regions are unique.</p>

<figure id="figure-8" style="max-width: 90%;"><img src="../../images/complement.png" alt="Complementing genomic ranges. " width="750" height="245" loading="lazy" /><a target="_blank" href="../../images/complement.png" rel="noopener noreferrer"><small>Open image in new tab</small></a><br /><br /><figcaption><span class="figcaption-prefix"><strong>Figure 8</strong>:</span> Any set of genomic intervals can <i>complemented</i> or converted into a set of intervals that do not overlap the original set (image from BEDTools documentation).</figcaption></figure>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-creating-a-genome-file"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Creating a genome file</div>

  <ol>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/devteam/fasta_compute_length/fasta_compute_length/1.0.1" title="Compute sequence length tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Compute sequence length</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.0.1)</span>:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Compute length for these sequences”</em>: <code class="language-plaintext highlighter-rouge">DNA (E. coli + Relatives)</code>, the FASTA dataset we generated from <strong>Collapse Collection</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span></li>
        <li><em>“Strip fasta description from header”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
      </ul>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sort_header_tool/1.1.1" title="Sort tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Sort</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.1.1)</span> data in ascending or descending order:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Sort Dataset”</em>: the output of the previous step (<code class="language-plaintext highlighter-rouge">Compute sequence length on ...</code>)</li>
        <li><em>“on column”</em>: <code class="language-plaintext highlighter-rouge">Column: 1</code></li>
        <li><em>“with flavor”</em>: <code class="language-plaintext highlighter-rouge">Alphabetical sort</code></li>
        <li><em>“everything in”</em>: <code class="language-plaintext highlighter-rouge">Ascending order</code></li>
      </ul>

      <blockquote class="question">
        <div class="box-title question-title" id="question-3"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>
        <p>How does the output look?</p>
        <blockquote class="solution">
          <div class="box-title solution-title" id="solution-3"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-3" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

          <p>This will generate a dataset that looks like this:</p>

          <table>
            <thead>
              <tr>
                <th>1</th>
                <th>2</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>CP020543.1</td>
                <td>4617024</td>
              </tr>
              <tr>
                <td>CP024090.1</td>
                <td>4592887</td>
              </tr>
              <tr>
                <td>Ecoli_C</td>
                <td>4576293</td>
              </tr>
              <tr>
                <td>LT906474.1</td>
                <td>4625968</td>
              </tr>
            </tbody>
          </table>
        </blockquote>
      </blockquote>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_sortbed/2.27.0.0" title="SortBED order the intervals tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>SortBED order the intervals</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 2.27.0.0)</span> with the following parameters
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Sort the following BED file”</em>: <code class="language-plaintext highlighter-rouge">Target &amp; Query Alignments</code></li>
        <li><em>“Sort by”</em> on its default setting (<code class="language-plaintext highlighter-rouge">chromosome, then by start position (asc)</code>)</li>
      </ul>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_complementbed/2.27.0.0" title="ComplementBed Extract intervals not represented by an interval file tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>ComplementBed Extract intervals not represented by an interval file</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 2.27.0.0)</span> with the following parameters:
      <ul>
        <li><em>“BED/VCF/GFF file”</em>: output of the <strong>SortBED</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> in the previous step</li>
        <li><em>“Genome file”</em>: <code class="language-plaintext highlighter-rouge">Genome file from your history</code>
          <ul>
            <li><em>“Genome file”</em>: sorted genome file we’ve generated two steps age, <code class="language-plaintext highlighter-rouge">Sort on ...</code></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><span class="tool" data-tool="Filter1" title="Filter tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Filter</strong></span>  data on any column using simple expressions
      <ul>
        <li><em>“Filter”</em>: dataset from the last step (<code class="language-plaintext highlighter-rouge">Complement of SortBed on ...</code>)</li>
        <li><em>“With following condition”</em>: <code class="language-plaintext highlighter-rouge">c3-c2&gt;=10000</code></li>
      </ul>

      <p>Note: Here we are computing the length (difference between end (column 3) and start (column 2) and making sure it is above 10,000).</p>

      <blockquote class="question">
        <div class="box-title question-title" id="question-4"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>
        <p>How does your output look?</p>
        <blockquote class="solution">
          <div class="box-title solution-title" id="solution-4"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-4" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

          <p>The resulting dataset should look like this:</p>

          <table>
            <thead>
              <tr>
                <th>1</th>
                <th>2</th>
                <th>3</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>CP020543.1</td>
                <td>1668702</td>
                <td>1697834</td>
              </tr>
              <tr>
                <td>CP020543.1</td>
                <td>1700832</td>
                <td>1742068</td>
              </tr>
              <tr>
                <td>CP020543.1</td>
                <td>3253711</td>
                <td>3288956</td>
              </tr>
              <tr>
                <td>CP020543.1</td>
                <td>3289091</td>
                <td>3304937</td>
              </tr>
              <tr>
                <td>CP024090.1</td>
                <td>3233375</td>
                <td>3283074</td>
              </tr>
              <tr>
                <td>LT906474.1</td>
                <td>3252785</td>
                <td>3288031</td>
              </tr>
              <tr>
                <td>LT906474.1</td>
                <td>3288166</td>
                <td>3304009</td>
              </tr>
            </tbody>
          </table>
        </blockquote>
      </blockquote>
    </li>
  </ol>
</blockquote>

<p>You will notice that all three genomes have a region starting past 3,200,000 and only <code class="language-plaintext highlighter-rouge">CP020543.1</code> has another region starting at 1,668,702. However, this region reflects some unique feature of <code class="language-plaintext highlighter-rouge">CP020543.1</code> rather than that of our assembly. This is why we will concentrate on the <em>common</em> region which is deleted in our genome, but is present in the three closely related <em>E. coli</em> strains:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-restricting-list-of-deleted-regions-to-the-i-common-i-deletion"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Restricting list of deleted regions to the <i>common</i> deletion</div>

  <ol>
    <li><span class="tool" data-tool="Filter1" title="Filter data on any column using simple expressions tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Filter data on any column using simple expressions</strong></span> with the following parameters:
      <ul>
        <li><em>“Filter”</em>: dataset from the last step (<code class="language-plaintext highlighter-rouge">Filter on data...</code>)</li>
        <li><em>“With following condition”</em>: <code class="language-plaintext highlighter-rouge">c2 &gt; 2000000</code>.</li>
      </ul>

      <blockquote class="question">
        <div class="box-title question-title" id="question-5"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>
        <p>How does your output look?</p>
        <blockquote class="solution">
          <div class="box-title solution-title" id="solution-5"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-5" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> <span>Solution</span><span class="fold-unfold fa fa-minus-square"></span></button></div>

          <p>The new set of regions will look like this:</p>

          <table>
            <thead>
              <tr>
                <th>1</th>
                <th>2</th>
                <th>3</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>CP020543.1</td>
                <td>3253711</td>
                <td>3288956</td>
              </tr>
              <tr>
                <td>CP020543.1</td>
                <td>3289091</td>
                <td>3304937</td>
              </tr>
              <tr>
                <td>CP024090.1</td>
                <td>3233375</td>
                <td>3283074</td>
              </tr>
              <tr>
                <td>LT906474.1</td>
                <td>3252785</td>
                <td>3288031</td>
              </tr>
              <tr>
                <td>LT906474.1</td>
                <td>3288166</td>
                <td>3304009</td>
              </tr>
            </tbody>
          </table>
        </blockquote>
      </blockquote>
    </li>
    <li>
      <p>Rename this dataset <code class="language-plaintext highlighter-rouge">Gaps</code></p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-renaming-a-dataset-8"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-renaming-a-dataset-8" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Renaming a dataset</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Click on the <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, change the <strong>Name</strong> field  to <code class="language-plaintext highlighter-rouge">Gaps</code></li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
  </ol>
</blockquote>

<h2 id="visualising-the-genome">Visualising the Genome</h2>

<h3 id="jbrowse">JBrowse</h3>

<p>JBrowse is an interactive genome browser, which has been integrated into Galaxy as a workflow-compatible tool that you can use to summarise all of the datasets we’ve created thusfar:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-view-genomes"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: View genomes</div>
  <ol>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/iuc/jbrowse/jbrowse/1.16.8+galaxy1" title="JBrowse tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>JBrowse</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.16.8+galaxy1)</span> genome browser:
      <ul>
        <li><em>“Reference genome to display”</em>: <code class="language-plaintext highlighter-rouge">Use a genome from history</code>
          <ul>
            <li><em>“Select the reference genome”</em>: <code class="language-plaintext highlighter-rouge">DNA (E. coli C + Relatives)</code></li>
          </ul>
        </li>
        <li><em>“Genetic code”</em>: <code class="language-plaintext highlighter-rouge">11. The Bacterial, Archael and Plant Plastid Code</code></li>
        <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> Insert Track Group
          <ul>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> Insert Annotation Track
              <ul>
                <li><em>“Track Type”</em>: <code class="language-plaintext highlighter-rouge">GFF/GFF3/BED Features</code></li>
                <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“GFF/GFF3/BED Track Data”</em>: <code class="language-plaintext highlighter-rouge">Genes (E. coli Relatives)</code> from <strong>Collapse Collection</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span></li>
                <li><em>“JBrowse Track Type”</em>: <code class="language-plaintext highlighter-rouge">Canvas Features</code></li>
              </ul>
            </li>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> Insert Annotation Track
              <ul>
                <li><em>“Track Type”</em>: <code class="language-plaintext highlighter-rouge">GFF/GFF3/BED Features</code></li>
                <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“GFF/GFF3/BED Track Data”</em>: <code class="language-plaintext highlighter-rouge">Target &amp; Query Alignments</code></li>
                <li><em>“JBrowse Track Type”</em>: <code class="language-plaintext highlighter-rouge">Canvas Features</code></li>
                <li><em>“JBrowse Feature Score Scaling &amp; Colouring Options”</em>
                  <ul>
                    <li><em>“Color Score Algorithm”</em>: <code class="language-plaintext highlighter-rouge">Based on score</code></li>
                    <li><em>“How should minimum and maximum values be determined for the scores of the features”</em>: <code class="language-plaintext highlighter-rouge">Manually Specify</code></li>
                    <li><em>“Minimum expected score”</em>: <code class="language-plaintext highlighter-rouge">0</code></li>
                    <li><em>“Maximum expected score”</em>: <code class="language-plaintext highlighter-rouge">100</code></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> Insert Annotation Track
              <ul>
                <li><em>“Track Type”</em>: <code class="language-plaintext highlighter-rouge">GFF/GFF3/BED Features</code></li>
                <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“GFF/GFF3/BED Track Data”</em>: <code class="language-plaintext highlighter-rouge">Gaps</code></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ol>

</blockquote>

<p>We have embedded a copy of the resulting JBrowse here, if something went wrong during one of the steps you can always just check this output:</p>

<!--SNIPPET-->
<iframe id="embedded_jbrowse" src="/training-material/assets/jbrowse/index.html?data=/training-material/topics/assembly/tutorials/ecoli_comparison/data&amp;trackList=0" border="0" width="100%" height="500px"></iframe>
<p><a href="/training-material/assets/jbrowse/index.html?data=/training-material/topics/assembly/tutorials/ecoli_comparison/data" target="_blank" style="padding: 0.5rem 1rem; background-color: #dfe5f9;border-bottom-left-radius: 8px; border-bottom-right-radius: 8px;">Open JBrowse in a new tab</a></p>
<p><!--END_SNIPPET--></p>

<p>Let’s start by looking at the gaps in our alignments. The deletion from our assembly is easy to see. It looks like a gap in alignments because target genomes are longer than our assembly by the amount equal to the length of the deletion. Clicking on the following links to jump to the right locations in the genome browser above:</p>

<ul>
  <li><!--SNIPPET--> <p><a href="#embedded_jbrowse" onclick="document.getElementById('embedded_jbrowse').src='/training-material/assets/jbrowse/index.html?tracklist=0&amp;data=/training-material/topics/assembly/tutorials/ecoli_comparison/data&amp;loc=LT906474.1:3238836..3318993&amp;tracks=DNA%2C45ccd03761795e5db829b6ab104c6a5a_0%2C0b4cc6e1931ece5bd0f487148c40ba37_0%2C36c31c84288257f526dbf55dc63fac9e_0'">LT906474.1:3238836..3318993</a></p> <!--END_SNIPPET--></li>
  <li><!--SNIPPET--> <p><a href="#embedded_jbrowse" onclick="document.getElementById('embedded_jbrowse').src='/training-material/assets/jbrowse/index.html?tracklist=0&amp;data=/training-material/topics/assembly/tutorials/ecoli_comparison/data&amp;loc=CP020543.1:3246920..3310052&amp;tracks=DNA%2C45ccd03761795e5db829b6ab104c6a5a_0%2C0b4cc6e1931ece5bd0f487148c40ba37_0%2C36c31c84288257f526dbf55dc63fac9e_0'">CP020543.1:3246920..3310052</a></p> <!--END_SNIPPET--></li>
  <li><!--SNIPPET--> <p><a href="#embedded_jbrowse" onclick="document.getElementById('embedded_jbrowse').src='/training-material/assets/jbrowse/index.html?tracklist=0&amp;data=/training-material/topics/assembly/tutorials/ecoli_comparison/data&amp;loc=CP024090.1:3221116..3295268&amp;tracks=DNA%2C45ccd03761795e5db829b6ab104c6a5a_0%2C0b4cc6e1931ece5bd0f487148c40ba37_0%2C36c31c84288257f526dbf55dc63fac9e_0'">CP024090.1:3221116..3295268</a></p> <!--END_SNIPPET--></li>
</ul>

<p>Close ups of deleted region (this region is deleted from our assembly and looks like a gap when our assembly is aligned to genomic sequences shown here). In CP0205543 and LT906474 the continuity of the region is interrupted by a small aligned region that has relatively low identity (~72%). This is a spurious alignment and can be ignored.</p>

<h3 id="circos">Circos</h3>

<p>Alternatively to JBrowse, we can use Circos to create a nice image of the alignments:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-circos"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Circos</div>

  <ol>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/devteam/lastz/lastz_wrapper_2/1.3.2" title="LASTZ tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>LASTZ</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 1.3.2)</span> with the following parameters:
      <ul>
        <li><em>“Select TARGET sequence(s) to align against”</em>: <code class="language-plaintext highlighter-rouge">from your history</code></li>
        <li><i class="far fa-folder" aria-hidden="true"></i><span class="visually-hidden">param-collection</span> <em>“Select a reference dataset”</em>: <code class="language-plaintext highlighter-rouge">DNA</code>, the <em>E. coli</em> genomes we uploaded earlier</li>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select QUERY sequence(s)”</em>: <code class="language-plaintext highlighter-rouge">E. coli C</code> fasta file</li>
        <li><strong>Chaining</strong>
          <ul>
            <li><em>“Perform chaining of HSPs with no penalties”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
          </ul>
        </li>
        <li><strong>Output</strong>
          <ul>
            <li><em>“Specify the output format”</em>: <code class="language-plaintext highlighter-rouge">MAF</code></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/nml/collapse_collections/collapse_dataset/4.2" title="Collapse Collection tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Collapse Collection</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 4.2)</span> with the following parameters:
      <ul>
        <li><em>“Collection of files to collapse”</em>: the MAF output of <strong>LASTZ</strong> (collecion input)</li>
      </ul>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/iuc/circos/circos_aln_to_links/0.69.8+galaxy7" title="Circos: Alignemnts to Links tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Circos: Alignemnts to Links</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 0.69.8+galaxy7)</span> reformats alignment files to prepare for Circos:
      <ul>
        <li><em>“Alignment file”</em>: the output of the <strong>Collapse Collection</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> step</li>
      </ul>
    </li>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/iuc/circos/circos_interval_to_tiles/0.69.8+galaxy7" title="Circos: Interval to Tiles tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Circos: Interval to Tiles</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 0.69.8+galaxy7)</span> reformats interval files for Circos’ use:
      <ul>
        <li><em>“BED File”</em>: <code class="language-plaintext highlighter-rouge">Genes (E. coli Relatives)</code></li>
      </ul>
    </li>
    <li>
      <p><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/iuc/circos/circos/0.69.8+galaxy7" title="Circos tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Circos</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 0.69.8+galaxy7)</span> genome browser:</p>

      <ul>
        <li>In the section <em>“Karyoytype”</em>
          <ul>
            <li><em>“Reference genome source”</em>: <code class="language-plaintext highlighter-rouge">FASTA File from History</code>
              <ul>
                <li><em>“Source FASTA sequence”</em>: <code class="language-plaintext highlighter-rouge">DNA (E. coli + Relatives)</code></li>
              </ul>
            </li>
          </ul>
        </li>
        <li>In the section <em>“Ideogram”</em>
          <ul>
            <li><em>“Limit/Filter Chromosomes”</em>: <code class="language-plaintext highlighter-rouge">Ecoli_C;LT906474.1;CP020543.1;CP024090.1</code> (This specifies the precise ordering in which we wish to see our genomes)</li>
            <li><em>“Reverse these Chromosomes”</em>: <code class="language-plaintext highlighter-rouge">Ecoli_C</code> (It is not readily apparent from the tables or the Genome browser, but the sequence of the E. coli C genome we have is backwards relative to the others)</li>
            <li>In the section <em>“Labels”</em>
              <ul>
                <li><em>“Radius”</em>: <code class="language-plaintext highlighter-rouge">0.125</code></li>
                <li><em>“Font size”</em>: <code class="language-plaintext highlighter-rouge">48</code></li>
              </ul>
            </li>
            <li><em>“Spacing Between Ideograms (in chromosome units)”</em>: <code class="language-plaintext highlighter-rouge">0.1</code></li>
          </ul>
        </li>
        <li>In the section <em>“2D Data Tracks”</em>
          <ul>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> Insert 2D Data Plot
              <ul>
                <li><em>“Outside Radius”</em>: <code class="language-plaintext highlighter-rouge">0.99</code></li>
                <li><em>“Inside Radius”</em>: <code class="language-plaintext highlighter-rouge">0.94</code></li>
                <li><em>“Plot Type”</em>: <code class="language-plaintext highlighter-rouge">Tiles</code></li>
                <li><em>“Tile Data Source”</em>: the output of the <strong>Circos: Interval to Tiles</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> above</li>
                <li>In the section <em>“Plot Format Specific Options”</em>
                  <ul>
                    <li><em>“Fill Colour”</em>: select a nice colour like a middle blue <span style="background-color:rgb(84,141,212);border-radius:3px;border:1px solid #000;width:12px;height:12px;margin-right:5px;">     </span></li>
                    <li><em>“Stroke Thickness”</em>: <code class="language-plaintext highlighter-rouge">0</code></li>
                  </ul>
                </li>
                <li><em>“Orient Inwards”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
              </ul>
            </li>
          </ul>
        </li>
        <li>In the section <em>“Link Tracks”</em>
          <ul>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> Insert Link Data
              <ul>
                <li><em>“Inside Radius”</em>: <code class="language-plaintext highlighter-rouge">0.93</code></li>
                <li><em>“Link Data Source”</em>: the output of the <strong>Circos: Alignments to links</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> above</li>
                <li><em>“Link Type”</em>: <code class="language-plaintext highlighter-rouge">Ribbon</code></li>
                <li><em>“Link Colour”</em>: pick another nice colour you like, it could be a green <span style="background-color:rgb(147,137,83);border-radius:3px;border:1px solid #000;width:12px;height:12px;margin-right:5px;">     </span></li>
                <li><em>“Link Color Transparency”</em>: <code class="language-plaintext highlighter-rouge">0.3</code></li>
              </ul>
            </li>
          </ul>
        </li>
        <li>In the section <em>“Ticks”</em>
          <ul>
            <li><em>“Show Ticks”</em>: <code class="language-plaintext highlighter-rouge">Yes</code>
              <ul>
                <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> Insert Tick Group
                  <ul>
                    <li><em>“Tick Spacing”</em>: <code class="language-plaintext highlighter-rouge">0.05</code></li>
                    <li><em>“Tick Size”</em>: <code class="language-plaintext highlighter-rouge">5.0</code></li>
                    <li><em>“Color”</em>: <code class="language-plaintext highlighter-rouge">grey</code> <span style="background-color:rgb(127,127,126);border-radius:3px;border:1px solid #000;width:12px;height:12px;margin-right:5px;">     </span></li>
                  </ul>
                </li>
                <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> Insert Tick Group
                  <ul>
                    <li><em>“Tick Spacing”</em>: <code class="language-plaintext highlighter-rouge">0.5</code></li>
                    <li><em>“Tick Size”</em>: <code class="language-plaintext highlighter-rouge">10.0</code></li>
                    <li><em>“Color”</em>: <code class="language-plaintext highlighter-rouge">black</code> <span style="background-color:black;border-radius:3px;border:1px solid #000;width:12px;height:12px;margin-right:5px;">     </span></li>
                    <li><em>“Show Tick Labels”</em>: <code class="language-plaintext highlighter-rouge">Yes</code>
                      <ul>
                        <li><em>“Label Format”</em>: <code class="language-plaintext highlighter-rouge">Float (one decmial)</code></li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ol>

</blockquote>

<p>This should produce a lovely Circos plot of your data:</p>

<figure id="figure-9" style="max-width: 90%;"><img src="../../images/ecoli-comparison.png" alt="Circos plot. " width="3000" height="3000" loading="lazy" /><a target="_blank" href="../../images/ecoli-comparison.png" rel="noopener noreferrer"><small>Open image in new tab</small></a><br /><br /><figcaption><span class="figcaption-prefix"><strong>Figure 9</strong>:</span> Circos plot of the four genomes. The insertion in the related genomes is visible around the 3.2Mb region</figcaption></figure>

<h2 id="extracting-genes-programmatically">Extracting genes programmatically</h2>

<p>Above we’ve been able to look at genes that appear to be deleted in our assembly. But what we really need is to create a list that can be interrogated further. For example, which of these genes are essential? We can easily create such a list by overlapping coordinates of genes with coordinates of our deletion. But to do this we first need to create a set of coordinates corresponding to the deletion. We could do this by inspecting the genome browser, or we can do it automatically by intersecting the gap regions with the list of genes:</p>

<figure id="figure-10" style="max-width: 90%;"><img src="../../images/intersect.png" alt="Intersect between two BED datasets. " width="751" height="347" loading="lazy" /><a target="_blank" href="../../images/intersect.png" rel="noopener noreferrer"><small>Open image in new tab</small></a><br /><br /><figcaption><span class="figcaption-prefix"><strong>Figure 10</strong>:</span> Computing intersect means finding overlapping regions in two BED datasets (image from BEDTools documentation).</figcaption></figure>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-finding-genes-deleted-in-our-assembly"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Finding genes deleted in our assembly</div>

  <ol>
    <li><span class="tool" data-tool="toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_intersectbed/2.27.0.2" title="Intersect intervals find overlapping intervals in various ways tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Intersect intervals find overlapping intervals in various ways</strong> (<i class="fas fa-cubes" aria-hidden="true"></i> Galaxy version 2.27.0.2)</span> with the following parameters:
      <ul>
        <li><em>“File A to intersect with B”</em>: <code class="language-plaintext highlighter-rouge">Gaps</code></li>
        <li><em>“File(s) B to intersect with A”</em>: <code class="language-plaintext highlighter-rouge">Genes (E. coli Relatives) with Symbol Name</code></li>
        <li><em>“What should be written to the output file?”</em>: <code class="language-plaintext highlighter-rouge">Write the original A and B entries plus the number of base pairs of overlap between the two features. Only A features with overlap are reported. Restricted by the fraction- and reciprocal option (-wo)</code></li>
      </ul>
    </li>
  </ol>
</blockquote>

<p>As a result we will get a list of all genes that overlap with the positions of the deletion. Because of the parameters we have selected, the tool joins rows from the two datasets if their coordinates overlap:</p>

<table>
  <thead>
    <tr>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>10</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>CP020543.1</td>
      <td>3253711</td>
      <td>3288956</td>
      <td>CP020543.1</td>
      <td>3253690</td>
      <td>3253887</td>
      <td> </td>
      <td>0</td>
      <td>-</td>
      <td>176</td>
    </tr>
    <tr>
      <td>CP020543.1</td>
      <td>3253711</td>
      <td>3288956</td>
      <td>CP020543.1</td>
      <td>3254070</td>
      <td>3256175</td>
      <td> </td>
      <td>0</td>
      <td>-</td>
      <td>2105</td>
    </tr>
    <tr>
      <td>CP020543.1</td>
      <td>3253711</td>
      <td>3288956</td>
      <td>CP020543.1</td>
      <td>3256356</td>
      <td>3256769</td>
      <td> </td>
      <td>0</td>
      <td>-</td>
      <td>413</td>
    </tr>
    <tr>
      <td>CP020543.1</td>
      <td>3253711</td>
      <td>3288956</td>
      <td>CP020543.1</td>
      <td>3256772</td>
      <td>3257518</td>
      <td> </td>
      <td>0</td>
      <td>-</td>
      <td>746</td>
    </tr>
    <tr>
      <td>CP020543.1</td>
      <td>3253711</td>
      <td>3288956</td>
      <td>CP020543.1</td>
      <td>3257518</td>
      <td>3258375</td>
      <td> </td>
      <td>0</td>
      <td>-</td>
      <td>857</td>
    </tr>
    <tr>
      <td>CP020543.1</td>
      <td>3253711</td>
      <td>3288956</td>
      <td>CP020543.1</td>
      <td>3258389</td>
      <td>3259999</td>
      <td>entE</td>
      <td>0</td>
      <td>-</td>
      <td>1610</td>
    </tr>
  </tbody>
</table>

<h2 id="are-any-of-these-genes-essential">Are any of these genes essential?</h2>

<p>Goodall et al. have recently published a list of essential genes for <em>E. coli</em> K-12 (<span class="citation"><a href="#Goodall2018">Goodall <i>et al.</i> 2018</a></span>). We can use their data to answer this question. This paper contains a supplementary file in Excel format listing genes and whether they are essential or not. We have converted this to a <kbd>tab</kbd> delimited file for you, but you could do this in any spreadsheet application:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-import-data"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Import data</div>

  <ol>
    <li>
      <p>Import the table:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://zenodo.org/record/3382053/files/inline-supplementary-material-7.tsv
</code></pre></div>      </div>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-importing-via-links-1"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-importing-via-links-1" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> <span>Tip: Importing via links</span><span class="fold-unfold fa fa-minus-square"></span></button></div>   <ul>   <li>Copy the link location</li>   <li>     <p>Click <i class="fas fa-upload" aria-hidden="true"></i><span class="visually-hidden">galaxy-upload</span> <strong>Upload Data</strong> at the top of the tool panel</p>   </li>   <li>Select <i class="fa fa-edit" aria-hidden="true"></i><span class="visually-hidden">galaxy-wf-edit</span> <strong>Paste/Fetch Data</strong></li>   <li>     <p>Paste the link(s) into the text field</p>   </li>   <li>     <p>Press <strong>Start</strong></p>   </li>   <li><strong>Close</strong> the window</li> </ul> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
  </ol>

</blockquote>

<p>This dataset will look like this:</p>

<table>
  <thead>
    <tr>
      <th>Gene</th>
      <th>Insertion Index Score</th>
      <th>Log Likelihood Ratio</th>
      <th>Essential</th>
      <th>Non-essential</th>
      <th>Unclear</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>thrL</td>
      <td>0.242424242</td>
      <td>54.62640955</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>thrA</td>
      <td>0.149817296</td>
      <td>32.64262069</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>thrB</td>
      <td>0.177920686</td>
      <td>39.389847</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>

<p>The two truly important columns here are 1 (gene name) and 4 (is gene essential?). Let’s join the results of the intersection with this list:</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-are-there-essential-genes"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Are there essential genes?</div>

  <ol>
    <li><span class="tool" data-tool="join1" title="Join two Datasets tool" aria-role="button"><i class="fas fa-wrench" aria-hidden="true"></i> <strong>Join two Datasets</strong></span> side by side on a specified field:
      <ul>
        <li><em>“Join”</em>: the results of the <a href="#hands-on-finding-genes-deleted-in-our-assembly">intersect operation</a>(<code class="language-plaintext highlighter-rouge">Intersect intervals on data...</code>)</li>
        <li><em>“using column”</em>: <code class="language-plaintext highlighter-rouge">Column: 7</code> (because it contains gene names. If it is not a drop down enter <code class="language-plaintext highlighter-rouge">7</code>.)</li>
        <li><em>“with”</em>: the newly uploaded dataset with essential gene data</li>
        <li><em>“and column”</em>: <code class="language-plaintext highlighter-rouge">Column: 1</code> (as in this dataset the first column contains gene names)</li>
      </ul>
    </li>
  </ol>
</blockquote>

<p>Once the tool is finished we will find that every gene found in the gap regions is non-essential so our version of <em>E. coli</em> C is safe!</p>

<table style="display:block">
  <tbody>
    <tr>
      <td>Chrom</td>
      <td>Gap Start</td>
      <td>Gap End</td>
      <td>Chrom</td>
      <td>Start</td>
      <td>End</td>
      <td>Name</td>
      <td>Score</td>
      <td>Strand</td>
      <td>Overlap</td>
      <td>Gene</td>
      <td>Insertion Index Score</td>
      <td>Log Likelihood Ratio</td>
      <td>Essential</td>
      <td>Non-essential</td>
      <td>Unclear</td>
    </tr>
    <tr>
      <td>CP020543.1</td>
      <td>3253711</td>
      <td>3288956</td>
      <td>CP020543.1</td>
      <td>3258389</td>
      <td>3259999</td>
      <td>entE</td>
      <td>0</td>
      <td>-</td>
      <td>1610</td>
      <td>entE</td>
      <td>0.105524519</td>
      <td>21.7755231717594</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>CP020543.1</td>
      <td>3253711</td>
      <td>3288956</td>
      <td>CP020543.1</td>
      <td>3268031</td>
      <td>3271912</td>
      <td>entF</td>
      <td>0</td>
      <td>-</td>
      <td>3881</td>
      <td>entF</td>
      <td>0.121329212</td>
      <td>25.6956722811455</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>CP020543.1</td>
      <td>3289091</td>
      <td>3304937</td>
      <td>CP020543.1</td>
      <td>3303016</td>
      <td>3305253</td>
      <td>nfrB</td>
      <td>0</td>
      <td>+</td>
      <td>1921</td>
      <td>nfrB</td>
      <td>0.124218052</td>
      <td>26.4064112702847</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>CP024090.1</td>
      <td>3233375</td>
      <td>3283074</td>
      <td>CP024090.1</td>
      <td>3238053</td>
      <td>3239663</td>
      <td>entE</td>
      <td>0</td>
      <td>-</td>
      <td>1610</td>
      <td>entE</td>
      <td>0.105524519</td>
      <td>21.7755231717594</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>CP024090.1</td>
      <td>3233375</td>
      <td>3283074</td>
      <td>CP024090.1</td>
      <td>3247695</td>
      <td>3251576</td>
      <td>entF</td>
      <td>0</td>
      <td>-</td>
      <td>3881</td>
      <td>entF</td>
      <td>0.121329212</td>
      <td>25.6956722811455</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>CP024090.1</td>
      <td>3233375</td>
      <td>3283074</td>
      <td>CP024090.1</td>
      <td>3282681</td>
      <td>3284918</td>
      <td>nfrB</td>
      <td>0</td>
      <td>+</td>
      <td>393</td>
      <td>nfrB</td>
      <td>0.124218052</td>
      <td>26.4064112702847</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3252764</td>
      <td>3252961</td>
      <td>ybdD</td>
      <td>0</td>
      <td>-</td>
      <td>176</td>
      <td>ybdD</td>
      <td>0.045454545</td>
      <td>5.96222628062725</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3253144</td>
      <td>3255249</td>
      <td>cstA</td>
      <td>0</td>
      <td>-</td>
      <td>2105</td>
      <td>cstA</td>
      <td>0.126305793</td>
      <td>26.9190653824143</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3255430</td>
      <td>3255843</td>
      <td>entH</td>
      <td>0</td>
      <td>-</td>
      <td>413</td>
      <td>entH</td>
      <td>0.120772947</td>
      <td>25.5586264884819</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3255846</td>
      <td>3256592</td>
      <td>entA</td>
      <td>0</td>
      <td>-</td>
      <td>746</td>
      <td>entA</td>
      <td>0.104417671</td>
      <td>21.4987263249306</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3256592</td>
      <td>3257449</td>
      <td>entB</td>
      <td>0</td>
      <td>-</td>
      <td>857</td>
      <td>entB</td>
      <td>0.088578089</td>
      <td>17.4977059908147</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3257463</td>
      <td>3259073</td>
      <td>entE</td>
      <td>0</td>
      <td>-</td>
      <td>1610</td>
      <td>entE</td>
      <td>0.105524519</td>
      <td>21.7755231717594</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3259083</td>
      <td>3260258</td>
      <td>entC</td>
      <td>0</td>
      <td>-</td>
      <td>1175</td>
      <td>entC</td>
      <td>0.102891156</td>
      <td>21.1164388080323</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3260633</td>
      <td>3261589</td>
      <td>fepB</td>
      <td>0</td>
      <td>+</td>
      <td>956</td>
      <td>fepB</td>
      <td>0.056426332</td>
      <td>9.03336948257186</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3261593</td>
      <td>3262843</td>
      <td>entS</td>
      <td>0</td>
      <td>-</td>
      <td>1250</td>
      <td>entS</td>
      <td>0.10871303</td>
      <td>22.5711161654709</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3262954</td>
      <td>3263958</td>
      <td>fepD</td>
      <td>0</td>
      <td>+</td>
      <td>1004</td>
      <td>fepD</td>
      <td>0.058706468</td>
      <td>9.65601430679132</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3263955</td>
      <td>3264947</td>
      <td>fepG</td>
      <td>0</td>
      <td>+</td>
      <td>992</td>
      <td>fepG</td>
      <td>0.057401813</td>
      <td>9.30031146997753</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3264944</td>
      <td>3265759</td>
      <td>fepC</td>
      <td>0</td>
      <td>+</td>
      <td>815</td>
      <td>fepC</td>
      <td>0.053921569</td>
      <td>8.34384946192657</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3265756</td>
      <td>3266889</td>
      <td>fepE</td>
      <td>0</td>
      <td>-</td>
      <td>1133</td>
      <td>fepE</td>
      <td>0.207231041</td>
      <td>46.3482820150569</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3267105</td>
      <td>3270986</td>
      <td>entF</td>
      <td>0</td>
      <td>-</td>
      <td>3881</td>
      <td>entF</td>
      <td>0.121329212</td>
      <td>25.6956722811455</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3271204</td>
      <td>3272406</td>
      <td>fes</td>
      <td>0</td>
      <td>-</td>
      <td>1202</td>
      <td>fes</td>
      <td>0.073150457</td>
      <td>13.5095101001907</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3272649</td>
      <td>3274889</td>
      <td>fepA</td>
      <td>0</td>
      <td>+</td>
      <td>2240</td>
      <td>fepA</td>
      <td>0.115573405</td>
      <td>24.274540471134</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3274941</td>
      <td>3275684</td>
      <td>entD</td>
      <td>0</td>
      <td>+</td>
      <td>743</td>
      <td>entD</td>
      <td>0.111111111</td>
      <td>23.1678124325764</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3277760</td>
      <td>3278878</td>
      <td>ybdK</td>
      <td>0</td>
      <td>+</td>
      <td>1118</td>
      <td>ybdK</td>
      <td>0.124218052</td>
      <td>26.4064112702847</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3280480</td>
      <td>3281727</td>
      <td>mscM</td>
      <td>0</td>
      <td>+</td>
      <td>1247</td>
      <td>mscM</td>
      <td>0.189530686</td>
      <td>42.1543534360729</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3281795</td>
      <td>3283171</td>
      <td>pheP</td>
      <td>0</td>
      <td>-</td>
      <td>1376</td>
      <td>pheP</td>
      <td>0.12345679</td>
      <td>26.2192754708456</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3252785</td>
      <td>3288031</td>
      <td>LT906474.1</td>
      <td>3286428</td>
      <td>3287651</td>
      <td>cusB</td>
      <td>0</td>
      <td>-</td>
      <td>1223</td>
      <td>cusB</td>
      <td>0.14624183</td>
      <td>31.7775137251818</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>LT906474.1</td>
      <td>3288166</td>
      <td>3304009</td>
      <td>LT906474.1</td>
      <td>3288157</td>
      <td>3289530</td>
      <td>cusC</td>
      <td>0</td>
      <td>-</td>
      <td>1364</td>
      <td>cusC</td>
      <td>0.237991266</td>
      <td>53.5875038409488</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>

                </section>

                <section aria-label="Tutorial Footer, Feedback, Citation" id="tutorial-footer">
                        <h3>You've Finished the Tutorial</h3>
                        <button id="tutorial-finish-button" class="btn btn-primary" onclick="tutorial_finish()">I finished this tutorial 👍</button>
                        <p style="display: none" id="tutorial-finish-text">Please also consider filling out the <a href="#gtn-feedback">Feedback Form</a> as well!</p>
                        <script>
                        function tutorial_finish() {
                          if(typeof plausible !== 'undefined'){
                            // Plausible may be undefined (script blocked)
                            // or it may be defined, but opted-out (select box/DNT), 
                            // which means `plausible()` will work but not send data, *nor* execute the callback.
                            plausible('TutorialComplete', {props: {path: document.location.pathname}})
                          }
                          // since the callback is completely cosmetic, we'll just issue it optimistically.
                          tutorial_finish_finish();
                        }
                        function tutorial_finish_finish() {
                          document.getElementById("tutorial-finish-button").innerText = 'Congrats! Thanks for letting us know! 🎉'
                          document.getElementById("tutorial-finish-button").disabled = true
                          document.getElementById("tutorial-finish-button").disabled = true
                          document.getElementById("tutorial-finish-text").style.display = 'block'
                        }
                        </script>

                
                <blockquote class="key_points">
                    <div class="box-title"><i class="fas fa-key" aria-hidden="true"></i> Key points</div>
                    <ul>
                        
                        <li><p>We learned how to download large sets of completed genomes from NCBI</p>
</li>
                        
                        <li><p>We learned how to use Galaxy’s rule-based collection builder</p>
</li>
                        
                        <li><p>We learned how to use a combination of Galaxy tools to create complex views of genome comparisons</p>
</li>
                        
                        <li><p>We learned about idiosyncrasies of data formats and how to deal with them using Galaxy tools</p>
</li>
                        
                    </ul>
                </blockquote>
                

                <h1>Frequently Asked Questions</h1>
                Have questions about this tutorial? Check out the <a href="faqs/">tutorial FAQ page</a> or the  <a href="/training-material/topics/assembly/faqs/">FAQ page for the Assembly topic</a> to see if your question is listed there.
                If not, please ask your question on the <a href="https://gitter.im/Galaxy-Training-Network/Lobby">GTN Gitter Channel</a> or the
                <a href="https://help.galaxyproject.org">Galaxy Help Forum</a>

                

                


                
                <h1 id="bibliography">References</h1>
                <ol class="bibliography"><li id="Goodall2018">Goodall, E. C. A., A. Robinson, I. G. Johnston, S. Jabbari, K. A. Turner <i>et al.</i>, 2018 <b>The Essential Genome of Escherichia coli K-12</b> (S. L. Chen &amp; K. A. Kline, Eds.). mBio 9: <a href="https://doi.org/10.1128/mbio.02096-17">10.1128/mbio.02096-17</a></li></ol>
                

                

                <h1 id="gtn-feedback">Feedback</h1>
                <p class="text-muted">Did you use this material as an instructor? Feel free to give us feedback on <a href="https://github.com/galaxyproject/training-material/issues/1452">how it went</a>.
                <br>Did you use this material as a learner or student? Click the form below to leave feedback.<i class="fas fa-hand-point-down"></i>
                </p>

                <iframe id="feedback-google" class="google-form" src="https://docs.google.com/forms/d/e/1FAIpQLSd4VZptFTQ03kHkMz0JyW9b6_S8geU5KjNE_tLM0dixT3ZQmA/viewform?embedded=true&entry.1235803833=assembly/ecoli_comparison"><a href="https://docs.google.com/forms/d/e/1FAIpQLSd4VZptFTQ03kHkMz0JyW9b6_S8geU5KjNE_tLM0dixT3ZQmA/viewform?embedded=true&entry.1235803833=assembly/ecoli_comparison">Feedback Form</a></iframe>

                <h1>Citing this Tutorial</h1>
                <p>
                    <ol>
                        <li id="citation-text">
                            Anton Nekrutenko, Delphine Lariviere, Helena Rasche,  <b>Making sense of a newly assembled genome (Galaxy Training Materials)</b>. <a href="https://training.galaxyproject.org/training-material/topics/assembly/tutorials/ecoli_comparison/tutorial.html">https://training.galaxyproject.org/training-material/topics/assembly/tutorials/ecoli_comparison/tutorial.html</a> Online; accessed TODAY
                        </li>
                        <li>
                        Hiltemann, Saskia, Rasche, Helena et al., 2023 <b>Galaxy Training: A Powerful Framework for Teaching!</b> PLOS Computational Biology <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1010752">10.1371/journal.pcbi.1010752</a>
                        </li>
                        <li>
                        Batut et al., 2018 <b>Community-Driven Data Analysis Training for Biology</b> Cell Systems <a href="https://doi.org/10.1016%2Fj.cels.2018.05.012">10.1016/j.cels.2018.05.012</a>
                        </li>
                    </ol>
                </p>

                <!-- collapsible boxcontaining the BibTeX-formatted citation -->
                <blockquote class="details">

                  <div id="citation-bibtex" class="box-title">
                    <button type="button" aria-controls="citation-bibtex" aria-expanded="false">
                      <i class="fas fa-info-circle" aria-hidden="true"></i>
                      <span class="visually-hidden"></span> BibTeX<span role="button" class="fold-unfold fa fa-minus-square" aria-hidden="true"></span>
                    </button>
                   </div>
                   <p style="display: none;">

                   <div class="highlighter-rouge"><div class="highlight"><pre class="highlight">


<code id="citation-code">@misc{assembly-ecoli_comparison,
author = "Anton Nekrutenko and Delphine Lariviere and Helena Rasche",
	title = "Making sense of a newly assembled genome (Galaxy Training Materials)",
	year = "",
	month = "",
	day = ""
	url = "\url{https://training.galaxyproject.org/training-material/topics/assembly/tutorials/ecoli_comparison/tutorial.html}",
	note = "[Online; accessed TODAY]"
}
@article{Hiltemann_2023,
	doi = {10.1371/journal.pcbi.1010752},
	url = {https://doi.org/10.1371%2Fjournal.pcbi.1010752},
	year = 2023,
	month = {jan},
	publisher = {Public Library of Science ({PLoS})},
	volume = {19},
	number = {1},
	pages = {e1010752},
	author = {Saskia Hiltemann and Helena Rasche and Simon Gladman and Hans-Rudolf Hotz and Delphine Larivi{\`{e}}re and Daniel Blankenberg and Pratik D. Jagtap and Thomas Wollmann and Anthony Bretaudeau and Nadia Gou{\'{e}} and Timothy J. Griffin and Coline Royaux and Yvan Le Bras and Subina Mehta and Anna Syme and Frederik Coppens and Bert Droesbeke and Nicola Soranzo and Wendi Bacon and Fotis Psomopoulos and Crist{\'{o}}bal Gallardo-Alba and John Davis and Melanie Christine Föll and Matthias Fahrner and Maria A. Doyle and Beatriz Serrano-Solano and Anne Claire Fouilloux and Peter van Heusden and Wolfgang Maier and Dave Clements and Florian Heyl and Björn Grüning and B{\'{e}}r{\'{e}}nice Batut and},
	editor = {Francis Ouellette},
	title = {Galaxy Training: A powerful framework for teaching!},
	journal = {PLoS Comput Biol} Computational Biology}
}
</code>
                   </pre></div></div>
                   </p>
                </blockquote>

		<h2 id="funding">Funding</h2>
		<p>These individuals or organisations provided funding support for the development of this resource</p>
                


<script>
// update the date on load, or leave fallback of 'today'
const citationTodaysDate = new Date();
document.getElementById("citation-code").innerHTML = document.getElementById("citation-code").innerHTML.replace("TODAY", citationTodaysDate.toDateString());
document.getElementById("citation-text").innerHTML = document.getElementById("citation-text").innerHTML.replace("TODAY", citationTodaysDate.toDateString());
</script>

                <i class="far fa-thumbs-up" aria-hidden="true"></i> Congratulations on successfully completing this tutorial!

                

                

		
                <blockquote class="details follow-up" id="admins-install-missing-tools">
                  <div id="admin-missing-tools" class="box-title">
                    <button type="button" aria-controls="admin-missing-tools" aria-expanded="false">
                      <i class="fas fa-info-circle" aria-hidden="true"></i>
                      <span class="visually-hidden"></span> Galaxy Administrators: Install the missing tools<span role="button" class="fold-unfold fa fa-minus-square" aria-hidden="true"></span>
                    </button>
                   </div>


			<p>You can use Ephemeris's <code>shed-tools install</code> command to install the tools used in this tutorial.</p>
<div class="highlight"><pre class="highlight"><code>shed-tools install [-g GALAXY] [-a API_KEY] -t &lt;(curl https://training.galaxyproject.org/training-material/api/topics/assembly/tutorials/ecoli_comparison/tutorial.json | jq .admin_install_yaml -r)</code></pre></div>
<p>Alternatively you can copy and paste the following YAML</p>
<div class="highlight"><pre class="highlight"><code>---
install_tool_dependencies: true
install_repository_dependencies: true
install_resolver_dependencies: true
tools:
- name: text_processing
  owner: bgruening
  revisions: ddf54b12c295
  tool_panel_section_label: Text Manipulation
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: text_processing
  owner: bgruening
  revisions: d698c222f354
  tool_panel_section_label: Text Manipulation
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: text_processing
  owner: bgruening
  revisions: d698c222f354
  tool_panel_section_label: Text Manipulation
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: text_processing
  owner: bgruening
  revisions: d698c222f354
  tool_panel_section_label: Text Manipulation
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: text_processing
  owner: bgruening
  revisions: d698c222f354
  tool_panel_section_label: Text Manipulation
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: text_processing
  owner: bgruening
  revisions: d698c222f354
  tool_panel_section_label: Text Manipulation
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: add_value
  owner: devteam
  revisions: 745871c0b055
  tool_panel_section_label: Text Manipulation
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: fasta_compute_length
  owner: devteam
  revisions: de2db1bdfbf8
  tool_panel_section_label: FASTA/FASTQ
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: fasta_filter_by_length
  owner: devteam
  revisions: e626b3ff9922
  tool_panel_section_label: FASTA/FASTQ
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: fasta_filter_by_length
  owner: devteam
  revisions: 8cacfcf96a52
  tool_panel_section_label: FASTA/FASTQ
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: lastz
  owner: devteam
  revisions: e7f19d6a9af8
  tool_panel_section_label: Mapping
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: merge_cols
  owner: devteam
  revisions: f2aac0c5c60d
  tool_panel_section_label: Text Manipulation
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: bedtools
  owner: iuc
  revisions: e19bebe96cd2
  tool_panel_section_label: BED
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: bedtools
  owner: iuc
  revisions: e19bebe96cd2
  tool_panel_section_label: BED
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: bedtools
  owner: iuc
  revisions: e19bebe96cd2
  tool_panel_section_label: BED
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: circos
  owner: iuc
  revisions: df7356989ac1
  tool_panel_section_label: Graph/Display Data
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: circos
  owner: iuc
  revisions: df7356989ac1
  tool_panel_section_label: Graph/Display Data
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: datamash_ops
  owner: iuc
  revisions: 562f3c677828
  tool_panel_section_label: Join, Subtract and Group
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: jbrowse
  owner: iuc
  revisions: fd5dbf0f732e
  tool_panel_section_label: Graph/Display Data
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: collapse_collections
  owner: nml
  revisions: 25136a2b0cfe
  tool_panel_section_label: Collection Operations
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: collapse_collections
  owner: nml
  revisions: 830961c48e42
  tool_panel_section_label: Collection Operations
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
</code></pre></div>
                </blockquote>
		

		<blockquote class="details hide-when-printing" id="feedback-responses">
                  <div id="feedback-response-c" class="box-title">
                    <button type="button" aria-controls="feedback-response-c" aria-expanded="false">
                      <i class="fas fa-info-circle" aria-hidden="true"></i>
                      <span class="visually-hidden"></span> Feedback<span role="button" class="fold-unfold fa fa-minus-square" aria-hidden="true"></span>
                    </button>
                   </div>

		   <p>
		   
		   <table class="charts-css bar show-labels" style="--labels-size: 8rem; overflow-y: hidden">
		   
			<tr>
				<th scope="row"><span class="sr-only">2 stars</span><i class="fa fa-star" aria-hidden="true"></i><i class="fa fa-star" aria-hidden="true"></i></th>
				<td style="--size: 1.0">1</td>
			</tr>
		   
		   </table>
		   </p>
		
        
        
		    
		    <b>April 2020</b>
		    <ul>
				
				<li>
					<span class="sr-only">2 stars</span><i class="fa fa-star" aria-hidden="true"></i><i class="fa fa-star" aria-hidden="true"></i>:
					
					<b>Disliked</b>: I miss some screenshot of how my data should look. At one point, in one of the steps where I had to choose some columns from a matrix to work on, I kept getting a wrong result. And I think the reason was, that I had something different in some of the columns than what I should have (so if for example I was asked to choose column 1, the data I was trying to get was actually in column 2) - if there were some screenshots of what the data should look like, I might have been able to see if I had a column too much
				</li>
				
		    </ul>
		    
        
		</blockquote>

		


		
		
		

                </section>

            </div>
        </div>
    </div>
</article>
<br/>
<br/>
<br/>

        </div>
        <footer>
	<hr />
	<div class="container">
		<div class="row">
			<div class="col-sm-3">
				<span style="font-size: 2em">GTN</span>
				<p>
					The GTN provides researchers with a free, open repository of online training
					materials, with a focus on hands-on training that aims to be directly applicable for learners.
					We aim to connect researchers and learners with local trainers, and events worldwide.
				</p>
				<p>
					We promote FAIR and Open Science practices worldwide, are committed to the accessibility of this platform and training for everyone.
				</p>
			</div>
			<div class="col-sm-3">
				<span style="font-size: 1.3em">About Us</span>
				<ul class="no-bullets">
					<li><a href="/training-material/faqs/gtn/gtn-what-is-it.html">About</a></li>
					<li><a rel="code-of-conduct" href="https://galaxyproject.org/community/coc/">Code of Conduct</a></li>
					<li><a href="/training-material/accessibility.html">Accessibility</a></li>
					<li><a href="/training-material/faqs/gtn/fair_training.html">100% FAIR Training</a></li>
					<li><a href="/training-material/faqs/gtn/collaborative_development.html">Collaborative Development</a></li>
				</ul>
				<span style="font-size: 1.3em">Page</span>
				<ul class="no-bullets">
					
					<li><i class="fas fa-fingerprint" aria-hidden="true"></i><span class="visually-hidden">purl</span><abbr title="Persistent URL">PURL</abbr>: <a href="https://gxy.io/GTN:T00032">gxy.io/GTN:T00032</a></li>
					

					

					<li>
						<a rel="license" href="https://spdx.org/licenses/CC-BY-4.0">
							Content licensed under Creative Commons Attribution 4.0 International License
						</a>
					</li>
					<li>
						<a href="https://github.com/galaxyproject/training-material/edit/main/topics/assembly/tutorials/ecoli_comparison/tutorial.md">
						<i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Edit on GitHub
						</a>
					</li>
					<li>
						<a href="https://github.com/galaxyproject/training-material/commits/main/topics/assembly/tutorials/ecoli_comparison/tutorial.md">
						<i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> View Changes on GitHub
						</a>
					</li>
				</ul>
			</div>
			<div class="col-sm-3">
				<span style="font-size: 1.3em">Support</span>
				<ul class="no-bullets">
					<li><a rel="me" href="/training-material/faqs/galaxy/">Galaxy FAQs</a></li>
					<li><a rel="me" href="https://help.galaxyproject.org">Galaxy Help Forum</a></li>
					<li><a rel="me" href="http://gxy.io/gtn-slack">GTN Slack Chat</a></li>
					<li><a rel="me" href="https://matrix.to/#/%23Galaxy-Training-Network_Lobby%3Agitter.im">GTN Matrix Chat</a></li>
					<li><a rel="me" href="https://matrix.to/#/#galaxyproject_Lobby:gitter.im">Galaxy Matrix Chat</a></li>
				</ul>
				<span style="font-size: 1.3em">Framework</span>
				<ul class="no-bullets">
					<li>Revision <a href="https://github.com/galaxyproject/training-material/commit/e763a425f5a79c336fbd46da5e6624bf46cd580f">e763a42</a></li>
					<li><a rel="license" href="https://github.com/galaxyproject/training-material/blob/main/LICENSE.md">MIT</a> Licensed</li>
					<li><a href="https://jekyllrb.com/">Jekyll(4.3.2 | production)</a></li>
				</ul>
			</div>
			<div class="col-sm-3">
				<span style="font-size: 1.3em">Follow Us!</span>
				<ul class="no-bullets">
					<li><span style="fill: var(--hyperlink);"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg   width="1em"   height="1em"   viewBox="0 0 8.4937906 9.1084023"   version="1.1"   id="svg356"   xmlns="http://www.w3.org/2000/svg"   xmlns:svg="http://www.w3.org/2000/svg">  <g     id="layer1"     transform="translate(-70.566217,-144.26757)">    <path       style="fill-opacity:1;stroke:none;stroke-width:0.0179182"       d="m 76.39081,152.24155 c -0.737138,0.20763 -1.554999,0.29101 -2.311453,0.14333 -0.475335,-0.0928 -0.891898,-0.32923 -1.031589,-0.82423 -0.04356,-0.15434 -0.06132,-0.32388 -0.06142,-0.48378 0.353724,0.0457 0.702251,0.1304 1.057176,0.17407 0.701338,0.0864 1.394702,0.0784 2.096434,0.008 0.744056,-0.0745 1.433711,-0.21546 2.060598,-0.64854 0.243974,-0.16855 0.474672,-0.39133 0.603487,-0.66252 0.181421,-0.38195 0.175886,-0.89336 0.204447,-1.30803 0.0923,-1.34029 0.20588,-2.98599 -1.076708,-3.846 -0.499561,-0.33497 -1.208891,-0.39913 -1.791824,-0.45742 -0.987026,-0.0987 -1.971078,-0.0946 -2.956509,0.0338 -0.841146,0.10961 -1.595223,0.31468 -2.1065,1.0443 -0.493296,0.70396 -0.509564,1.52563 -0.509564,2.34729 0,1.37831 -0.05534,2.87744 0.595934,4.13911 0.504703,0.97774 1.498709,1.29589 2.52184,1.41832 0.473239,0.0566 0.96049,0.0849 1.434158,0.0172 0.328853,-0.0471 0.650325,-0.0999 0.966886,-0.20511 0.08957,-0.0298 0.266911,-0.0614 0.322027,-0.14486 0.04089,-0.0618 0.0099,-0.15812 0.0035,-0.22545 -0.01611,-0.16924 -0.02094,-0.34967 -0.02096,-0.51963 m -1.594723,-5.48298 c 0.214822,-0.25951 0.315898,-0.56088 0.60922,-0.75705 0.687899,-0.46006 1.692038,-0.11202 1.992096,0.63161 0.214571,0.5317 0.140174,1.15913 0.140174,1.72017 v 1.03925 c 0,0.0911 0.04009,0.30954 -0.01842,0.38339 -0.04193,0.053 -0.173018,0.0287 -0.232436,0.0287 h -0.698809 v -1.88142 c 0,-0.28413 0.04813,-0.63823 -0.09912,-0.89591 -0.234746,-0.4108 -0.875019,-0.36105 -1.092116,0.0358 -0.123368,0.22555 -0.116792,0.50369 -0.116792,0.75257 v 1.0751 h -0.931726 v -1.05718 c 0,-0.2555 0.0024,-0.53932 -0.121773,-0.77049 -0.21432,-0.39919 -0.857782,-0.44403 -1.090217,-0.0358 -0.147324,0.25871 -0.09604,0.61056 -0.09604,0.89591 v 1.88142 H 72.09042 v -1.98893 c 0,-0.4711 -0.01604,-0.95902 0.233201,-1.3797 0.585269,-0.98786 2.133584,-0.74836 2.472454,0.32253 z"       id="path2318" />  </g></svg></span> <a rel="me" href="https://mstdn.science/@gtn">Mastodon</a></li>
					<li><span style="fill: var(--hyperlink);"><svg  viewBox="0 0 64 57" width="1em" ><path style="fill-opacity:1;stroke:none;stroke-width:0.0179182" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805ZM50.127 3.805C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745Z"></path></svg></span><a rel="me" href="https://bsky.app/profile/galaxytraining.bsky.social"> Bluesky</a></li>
				</ul>
			</div>
		</div>
	</div>
</footer>


        <script  async defer src='/training-material/assets/js/bundle.main.40d4e218.js'></script>

	
	

    </body>
</html>