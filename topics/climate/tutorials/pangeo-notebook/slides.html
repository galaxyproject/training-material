---
layout: tutorial_slides
logo: "GTN"
title: "The Pangeo ecosystem"
video: false
questions:
- What is Pangeo?
- What is the Pangeo Software Ecosystem?
- What is ARCO (Analysis Ready, Cloud Optimized) Data?
- What is Pangeo forge?
- What is STAC?
- Why and how to use STAC?
- How do Pangeo forge and STAC relate to each other?
- How can I use and/or contribute to Pangeo?
- Where to go to learn more about Pangeo?
objectives:
  - Understand Pangeo, its community, software ecosystem, infrastructure and cloud optimized data ecosystem.
  - Understand SpatioTemporal Asset Catalog (STAC) and how it relates to Pangeo.
  - Understand how to use and contribute to Pangeo.
  - Learn about Pangeo in Galaxy.
time_estimation: "15m"
key_points:
  - Pangeo is an inclusive community promoting open, reproducible and scalable science.
contributors:
  - BasileGoussard
  - rabernat
  - annefou
tags:
  - climate
---

## About this presentation

.left[ This presentation is a summary of: ]

- [Unlocking the Potential of Cloud Native Science with Pangeo](https://speakerdeck.com/rabernat/unlocking-the-potential-of-cloud-native-science-with-pangeo) by Ryan Abernathey (Co-founder of Pangeo);
- [Introduction to DASK](https://docs.google.com/presentation/d/e/2PACX-1vSTH2kAR0DCR0nw8pFBe5kuYbOk3inZ9cQfZbzOIRjyzQoVaOoMfI2JONGBz-qsvG_P6g050ddHxSXT/pub?start=false&loop=false&delayms=60000&slide=id.g646705d04f_0_0) by the Dask Community;
- [STAC for Earth Observation](https://doi.org/10.5281/zenodo.5896445) by Basile Goussard ([netCarbon](https://www.netcarbon.fr/)).

---

## Pangeo in a nutshell

**A Community platform for Big Data geoscience**

- Open Community
- Open Source Software
- Open Source Infrastructure

**Funders**

<div class="centre"><img src="https://upload.wikimedia.org/wikipedia/commons/1/12/NSF.svg" alt="NSF Logo" width="120">
  <img src="https://static.wixstatic.com/media/a8b87d_92e16cb7795f467b8c105af31fded270~mv2.png" alt="EarthCube Logo" width="300">
  <img src="https://upload.wikimedia.org/wikipedia/commons/e/e5/NASA_logo.svg" alt="NASA Logo" width="120">
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Moore_Foundation_Logo.jpg/1920px-Moore_Foundation_Logo.jpg" alt="MOORE Logo By Gordon and Betty Moore Foundation - Own work, Public Domain" width="250">
</div>


???

Pangeo is first and foremost a community promoting open, reproducible, and scalable science.
This community provides documentation, develops and maintains software, and deploys computing infrastructure to make scientific research and programming easier.
The Pangeo software ecosystem involves open source tools such as xarray, iris, dask, jupyter, and many other packages. There is no single software package called pangeo; rather, the Pangeo project serves as a coordination point between scientists, software, and computing infrastructure.

---

## Motivations

.left[ There are several building crises facing the geoscience community: ]

.left[- *Big Data*: datasets are growing too rapidly and legacy software tools for scientific analysis can’t handle them. This is a major obstacle to scientific progress.]
.left[- *Technology Gap*: a growing gap between the technological sophistication of industry solutions (high) and scientific software (low).]
.left[- *Reproducibility*: a fragmentation of software tools and environments renders most geoscience research effectively unreproducible and prone to failure.]

---

## Goals

Pangeo aims to address these challenges through a unified, collaborative effort.

*The mission of Pangeo is to cultivate an ecosystem in which the next generation of open-source analysis tools for ocean, atmosphere 
and climate science can be developed, distributed, and sustained. These tools must be scalable in order to meet the current and future 
challenges of big data, and these solutions should leverage the existing expertise outside of the geoscience community.*

???

---

## The Pangeo Software Ecosystem

![Pangeo approach](../../images/pangeo-ecosystem-2020.png )

*Source*: [Pangeo Tutorial - Ocean Sciences 2020](https://speakerdeck.com/rabernat/pangeo-tutorial-ocean-sciences-2020?slide=28) by Ryan Abernathey, February 17, 2020.

???

---

## Xarray 

*Xarray is an open source project and Python package that makes working with labelled multi-dimensional arrays simple, efficient, and fun!*

<img src="../../images/dataset-diagram-logo.png" alt="Xarray logo" width="400"/>


???


---

## What is Xarray?


.left[Xarray expands on NumPy arrays and pandas. Xarray has two core data structures:]

.left[- `DataArray` is our implementation of a labeled, N-dimensional array. It is an N-D generalization of a `pandas.Series`.]
.left[- `Dataset` is a multi-dimensional, in-memory array database. It is a dict-like container of `DataArray` objects aligned along any number of shared dimensions, and serves a similar purpose in xarray to the `pandas.DataFrame`.]

.left[*Source*: [Xarray documentation](https://xarray.pydata.org/en/stable/getting-started-guide/why-xarray.html)]


???

---

## Example


<img src="../../images/xarray-concept.png" alt="Xarray concept" width="500"/>


<img src="../../images/xarray-dataset.png" alt="Xarray dataset" width="500"/>


???

---

## iris

*A powerful, format-agnostic, community-driven Python package for analysing and visualising Earth science data.*

.pull-left[
- Data model based on the [CF conventions](http://cfconventions.org/);
- Unit conversion;
- visualization interface base on [matplotlib](https://matplotlib.org/) and [cartopy](https://scitools.org.uk/cartopy/docs/latest/);
- efficient from single-machine through to multi-core clusters and HPC. 
]

.pull-right[

.image-40[
![IRIS logo](https://scitools-iris.readthedocs.io/en/latest/_static/iris-logo-title.png) 
]

]

.left[*Source:* [Scitools Iris documentation](https://scitools-iris.readthedocs.io/en/latest/#)]
---

## Dask


.pull-left[

*Enabling performance at scale for the tools you love*

- **Powerful**: Leading platform today for analytics
- **Scalable**: Natively scales to clusters and cloud
- **Flexible**: Bridges prototyping to production

**Dask accelerates the existing Python ecosystem (Numpy, Pandas, Scikit-learn)**
]

.pull-right[

.image-40[
![DASK logo](https://docs.dask.org/en/stable/_images/dask_stacked.svg
) 
]

]

.left[*Source*: [Dask documentation](https://docs.dask.org/en/stable/)]

???

---

## How does Dask accelerate Numpy?

.image-40[
![Dask and Numpy](https://examples.dask.org/_images/dask-array-black-text.svg) 
]

.pull-left[
```python
import numpy as np

x = np.ones((1000, 1000))
x + x.T - x.mean(axis=0)
```
]


.pull-right[

```python
import dask.array as da

x = da.ones((1000, 1000))
x + x.T - x.mean(axis=0)
```
]


---

## How does Dask accelerate Pandas?

.image-25[
![Dask and Pandas](https://examples.dask.org/_images/dask-dataframe.svg) 
]

.pull-left[

```python
import pandas as pd

df = pd.read_csv("file.csv")
df.groupby("x").y.mean()
```
]


.pull-right[

```python
import dask.dataframe as dd

df = dd.read_csv("s3://*.csv")
df.groupby("x").y.mean()
```
]

---

## How does Dask accelerate Scikit-Learn?

.image-40[
![Dask and Scikit-Learn](https://scikit-learn.org/stable/_images/sphx_glr_plot_classifier_comparison_001.png) 
]

.pull-left[

```python
from scikit_learn.linear_model import LogisticRegression

lr = LogisticRegression()
lr.fit(data, labels)
```
]

.pull-right[

```python
from dask_ml.linear_model import LogisticRegression

lr = LogisticRegression()
lr.fit(data, labels)
```
]

???

---

## jupyter



.pull-left[

*Free software, open standards, and web services for interactive computing across all programming languages*

- **Jupyter notebook**: a  simple, streamlined web application for creating and sharing computational documents;
- **JupyterLab**: Next generation of Jupyter notebook interface that is flexible and easier to customize and extend;
- **JupyterHub**: A multi-user version of the notebook
]

.pull-right[

.image-40[
![Jupyter logo](https://jupyter.org/assets/homepage/main-logo.svg)
]
]

.left[*Source*: [Jupyter documentation](https://jupyter.org/)]

???

---

## jupyterLab

**This is what you get in Galaxy**:

- Several JupyterLab computing environment available including Pangeo Galaxy
- Can be added as a step in your Galaxy Workflows

---

## Pangeo Cloud Data Catalog

Pangeo maintains an experimental catalog of analysis-ready cloud-based data at [catalog.pangeo.io](https://catalog.pangeo.io/).

Pangeo project is actively researching different approaches to storing and cataloging data in the cloud. Some important technologies currently in use include

- [Spatiotemporal Asset Catalog](https://stacspec.org/): A common language to describe a range of geospatial information, so it can more easily be indexed and discovered.
- [Intake](https://intake.readthedocs.io/en/latest/): A python package for finding, investigating, loading and disseminating data.

???

---

## Analysis Ready, Cloud Optimized Data (ARCO)

- What is "Analysis Ready"?
  - Think in "Datasets" not "data files"
  - No need for tedious homogenizing / cleaning setup_guides
  - Curated and cataloged

- What is "Cloud Optimized"?
  - Compatible with object storage e.g. access via HTTP
  - Supports lazy access and intelligent subsetting
  - Integrates with high-level analysis libraries and distributed frameworks

???

---

## Example of ARCO Data

![Arco data](../../images/arco_data.png)


???

---

## Pangeo Forge

<img src="https://pangeo-forge.readthedocs.io/en/latest/_static/pangeo-forge-logo-blue.png" alt="Pangeo Forge Logo" width="400">

[https://pangeo-forge.org](https://pangeo-forge.org)

Pangeo Forge is an open source platform for data **Extraction**, **Transformation**, and **Loading** (ETL).
The goal of *Pangeo Forge* is to make it easy to extract data from traditional data repositories and deposit in cloud
object storage in analysis-ready, cloud optimized (ARCO) format.

Pangeo Forge is inspired directly by Conda Forge, a community-led collection of recipes for building conda packages.

???

---

## How does it work?



.image-40[
![pangeo forge explained](https://pangeo-forge.org/img/pangeo-forge-diagram.b8332f39.png)
]

---

## How do we create new dataset?


.image-40[
![pangeo forge recipe](../../images/pangeo-forge-detail.png)
]

---

## STAC

.center[STAC stands for **SpatioTemporal Asset Catalog**.]

---

## Why STAC?

*Each provider has its <span style="color:green">catalog and interface</span>*.

.pull-left[

Just searching the relevant data for your project could be a tough work...

- **Lot of data providers …**
- **Each interface is unique …**

]

.pull-right[ ![Why STAC](../../images/why_STAC.png) ]

---

## Why STAC?

*Each provider has its own <span style="color:green">Application Programming Interface (API)</span>*.

.pull-left[

If you are a programmer that’s exactly the same...

You should design a new data connector each time...

- **Lot of data providers …**
- **Each API is unique …**

]

.pull-right[ ![Why STAC](../../images/why_STAC-API.png) ]

---


## Why STAC?

*Let's work <span style="color:green">together</span>*.

.pull-left[

The main purpose of STAC is:

- **Build an commun language to catalog geospatial data**

]

.pull-right[ ![STAC](../../images/STAC-logo.png) ]

---

## Why STAC?

*Let's work <span style="color:green">together</span>*.

.pull-left[

It’s extremely simple, STAC catalogs are composed of three layers :  

- **Catalogs**
    - **Collections**
        - **Items**

]

.pull-right[ 

**It’s already used for Sentinel 2 in AWS**

.image-90[
![Sentinel 2](../../images/sentinel2_AWS.png) 
]

**It’s already used for Landsat 8 in MICROSOFT**

.image-90[
![Landsat 8](../../images/landsat8_microsoft.png) 
]

]

---


## How to use STAC

*Depending on <span style="color:green">your needs</span>*.

.pull-left[
**Storing your data**

.image-40[
   ![Storing data](../../images/storing_data.png) 
  ]
]

.pull-right[

**Searching data**

.image-40[
   ![Searching data](../../images/searching_data.png) 
  ]

]
---

## Searching data

*Let's search data over the main region (France) between the 1st January 2019 and the 4th June 2019*.

.image-100[
   ![Search data over main and specific dates](../../images/search_maine_data.png) 
  ]


---

## Searching and processing
  

  .image-100[
     ![Search and process](../../images/search_process.png) 
    ]


---

## STAC ecosystem
    
*A lot of project are now build around <span style="color:green">STAC</span>*.

- All the STAC Catalog available are at [https://stacindex.org/catalogs](https://stacindex.org/catalogs)
- Lot of tutorial can be found at [https://stacindex.org/learn](https://stacindex.org/learn)
- All packages that rely or work extremely well with STAC are at [https://stacindex.org/ecosystem](https://stacindex.org/ecosystem)

---

## A lot of contributors!

Join and contrinute to STAC: [https://github.com/radiantearth/stac-spec](https://github.com/radiantearth/stac-spec)

.image-100[
     ![STAC contributors](../../images/STAC_contributors.png) 
    ]

---

## STAC and Pangeo Forge

- Pangeo-forge supports the creation of analysis-ready cloud optimized (ARCO) data in cloud object storage from "classical" data repositories;
- STAC is used to create catalog and goes beyond the Pangeo ecosystem;
- It is important for Pangeo to use STAC and make sure data generated with Pangeo-forge are correctly "referenced" in STAC.

???

---
## Using and/or contributing to Pangeo

.left[The pangeo project is completely open to involvement from anyone with interest. 

There are many ways to get involved:]

- *Science users*: read the [Guide for Scientists](https://pangeo.io/quickstart.html#quickstart), browse the [Pangeo Gallery](https://pangeo.io/gallery.html#use-cases), read about the [Packages](https://pangeo.io/packages.html#packages), or try it yourself on Galaxy!
- *Developers / system administrators*: learn about the [Technical Architecture](https://pangeo.io/architecture.html#architecture) or read the [Deployment Setup Guides](https://pangeo.io/setup_guides/index.html#setup-guides).

For more information, consult the [Frequently Asked Questions](https://pangeo.io/faq.html#faq).

???

---

## Pangeo Resources for users

- [Pangeo Showcase Webinar Series](https://pangeo.io/pangeo-showcase.html) is part of the [Pangeo Weekly Community Meeting](https://pangeo.io/meeting-notes.html#meeting-notes);
- [Pangeo Gallery](http://gallery.pangeo.io/)

???

---

## Learn more

- Web: [https://pangeo.io](https://pangeo.io/)
- Discourse: [https://discourse.pangeo.io/](https://discourse.pangeo.io/)
- Github: [https://github.com/pangeo-data](https://github.com/pangeo-data)
- Twitter: [@pangeo_data](https://twitter.com/pangeo_data)

???
