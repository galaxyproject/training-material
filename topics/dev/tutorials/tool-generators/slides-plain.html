<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Introduction to the ToolFactory tutorial.</title>
        
            <script async defer data-domain="training.galaxyproject.org" src="https://plausible.galaxyproject.eu/js/plausible.js"></script>

        
        <link rel="stylesheet" href="/training-material/assets/css/bootstrap.min.css?v=3">
        <link rel="stylesheet" href="/training-material/assets/css/bootstrap-toc.min.css">
        <link rel="stylesheet" href="/training-material/assets/css/main.css?v=2">
        <script src="https://kit.fontawesome.com/67b3f98409.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="/training-material/assets/css/academicons.css">
        <link rel="stylesheet" href="/training-material/assets/css/syntax_highlighting.css">
        <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon" />
        <link rel="alternate" type="application/atom+xml" href="/training-material/feed.xml" />

        
        
        
        
        
        <meta name="description" content="Galaxy is an open-source project. Everyone can contribute..." />
        <meta property="og:title" content="Galaxy Training: Introduction to the ToolFactory tutorial." />
        <meta property="og:description" content="Galaxy is an open-source project. Everyone can contribute..." />
        <meta property="og:image" content="/training-material/assets/images/GTNLogo1000.png" />
    </head>
    <body data-spy="scroll" data-target="#toc">
        <header>
    <nav class="navbar navbar-expand-md navbar-dark" aria-label="Site Navigation">
        <div class="container">
            <a class="navbar-brand" href="/training-material/">
                <img src="/training-material/assets/images/GTN-60px.png" height="30" alt="Galaxy Training Network logo">
                Galaxy Training!
            </a>

            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-navbar" aria-controls="top-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        
                        <a class="nav-link" href="/training-material/hall-of-fame" title="Hall of Fame">
                           <i class="fas fa-users" aria-hidden="true"></i><span class="visually-hidden">hall-of-fame</span> Contributors
                        </a>
                        
                    </li>
                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Help">
        <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">help</span> Help
    </a>
    <div class="dropdown-menu dropdown-menu-right">
        <!-- disable Tess for now
        <form method="get" action="https://tess.elixir-europe.org/materials">
            <input type="text" id="search" name="q" value="" style="margin-left: 0.5em;/*! border-radius: 0px; */">
            <input type="hidden" value="Galaxy Training" name="content_provider">
            <input type="submit" value="Search on TeSS" style="width: 92%;border-radius: 0px;margin: 0.5em;background: #f47d20;border: 0px;padding: 0.25em;" class="">
        </form>
        -->

        <a class="dropdown-item" href="/training-material/faq" title="Check our FAQs">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> FAQs
        </a>
        
        <a class="dropdown-item" href="/training-material/topics/dev/faqs/" title="Check our FAQs for the Development in Galaxy topic">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Topic FAQs
        </a>
        
        <a class="dropdown-item" href="https://help.galaxyproject.org/" title="Discuss on Galaxy Help">
            <i class="far fa-comments" aria-hidden="true"></i><span class="visually-hidden">feedback</span> Galaxy Help Forum
        </a>
        <a class="dropdown-item" href="https://gitter.im/Galaxy-Training-Network/Lobby" title="Discuss on gitter">
           <i class="fab fa-gitter" aria-hidden="true"></i><span class="visually-hidden">gitter</span> Discuss on Gitter
        </a>
    </div>
</li>


                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Extras">
        <i class="far fa-star" aria-hidden="true"></i><span class="visually-hidden">galaxy-star</span> Extras
    </a>
    <div class="dropdown-menu dropdown-menu-right">

        
        <a class="dropdown-item" href="https://github.com/galaxyproject/training-material/edit/main/topics/dev/tutorials/tool-generators/slides-plain.md" title="Edit on GitHub">
          <i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Edit on GitHub
        </a>

        <a class="dropdown-item" href="/training-material/stats.html" title="Show view statistics about this repository">
            <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN statistics
        </a>

        <a class="dropdown-item" href="https://plausible.galaxyproject.eu/training.galaxyproject.org?period=12mo&page=/training-material/topics/dev/tutorials/tool-generators/slides-plain.html" title="Show view statistics of this page">
            <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> Page Metrics
        </a>

        
            <a class="dropdown-item" href="/training-material/feedback.html" title="Show feedback statistics about this repository">
                <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN feedback
            </a>
        

        <div class="dropdown-item">
            <div>
                <i class="fas fa-language" aria-hidden="true"></i><span class="visually-hidden">language</span> Translate this page
            </div>

            <div id="lang-selector">
                
                <strong>Automatic Translations</strong>

<a class="btn btn-info" href="https://translate.google.com/translate?hl=jp&sl=en&tl=fr&u=https%3A%2F%2Ftraining.galaxyproject.org/topics/dev/tutorials/tool-generators/slides-plain.html&edit-text=&act=url">
                Fran√ßais
                </a>
                
<a class="btn btn-info" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ja&u=https%3A%2F%2Ftraining.galaxyproject.org/topics/dev/tutorials/tool-generators/slides-plain.html&edit-text=&act=url">
                Êó•Êú¨Ë™û
                </a>
                
<a class="btn btn-info" href="https://translate.google.com/translate?hl=jp&sl=en&tl=es&u=https%3A%2F%2Ftraining.galaxyproject.org/topics/dev/tutorials/tool-generators/slides-plain.html&edit-text=&act=url">
                Espa√±ol
                </a>
                
<a class="btn btn-info" href="https://translate.google.com/translate?hl=jp&sl=en&tl=pt&u=https%3A%2F%2Ftraining.galaxyproject.org/topics/dev/tutorials/tool-generators/slides-plain.html&edit-text=&act=url">
                Portugu√™s
                </a>
                
<a class="btn btn-info" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ar&u=https%3A%2F%2Ftraining.galaxyproject.org/topics/dev/tutorials/tool-generators/slides-plain.html&edit-text=&act=url">
                ÿßŸÑÿπÿ±ÿ®Ÿäÿ©
                </a>
                
                <a class="btn btn-info" href="https://translate.google.com/translate?hl=jp&sl=en&tl=&u=https%3A%2F%2Ftraining.galaxyproject.org/topics/dev/tutorials/tool-generators/slides-plain.html&edit-text=&act=url" title="">
                And more!
                </a>
            </div>
        </div>

        <div class="dropdown-item">
            <div>
                <i class="fas fa-palette" aria-hidden="true"></i><span class="visually-hidden">gtn-theme</span> Theme
            </div>

            <div id="theme-selector" data-toggle="buttons">
                <label data-value="default" class="btn btn-secondary">
                    <input type="radio" name="options" id="default" autocomplete="off"> Default
                </label>
                <label data-value="night" class="btn btn-secondary">
                    <input type="radio" name="options" id="night" autocomplete="off"> Night
                </label>
                <label data-value="midnight" class="btn btn-secondary">
                    <input type="radio" name="options" id="midnight" autocomplete="off"> Midnight
                </label>
                <label data-value="rainbow" class="btn btn-secondary">
                    <input type="radio" name="options" id="rainbow" autocomplete="off"> Rainbow
                </label>
                <label data-value="progress" class="btn btn-secondary">
                    <input type="radio" name="options" id="progress" autocomplete="off">üè≥Ô∏è‚Äçüåà
                </label>
                <label data-value="halloween" class="btn btn-secondary">
                    <input type="radio" name="options" id="halloween" autocomplete="off"> üéÉ
                </label>
                <label data-value="straya" class="btn btn-secondary">
                    <input type="radio" name="options" id="downunder" autocomplete="off"> üá¶üá∫
                </label>
            </div>

        </div>

        <div class="dropdown-item">
            <div>
                <i class="fas fa-history" aria-hidden="true"></i><span class="visually-hidden">galaxy-rulebuilder-history</span> Previous Versions
            </div>

            
            <div id="archive-selector">
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/2021-10-01/topics/dev/tutorials/tool-generators/slides-plain.html" title="Version 2021-10-01">2021-10-01</a>
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/2021-09-01/topics/dev/tutorials/tool-generators/slides-plain.html" title="Version 2021-09-01">2021-09-01</a>
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/2021-08-01/topics/dev/tutorials/tool-generators/slides-plain.html" title="Version 2021-08-01">2021-08-01</a>
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/" title="Older Versions">Older Versions</a>
            </div>

        </div>

    </div>
</li>


                    <!-- Search bar-->
                    <li class="nav-item">
                      <div id="navbarSupportedContent" role="search">
                        <!-- Search form -->
                        <form class="form-inline mr-auto" method="GET" action="/training-material/search">
                          <i class="fas fa-search nav-link" aria-hidden="true"></i>
                          <div class="md-form mb-2">
                            <input name="query" class="form-control nicer" type="text" placeholder="Search Tutorials" aria-label="Search">
                          </div>
                        </form>
                      </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

        <div class="container main-content" role="main">
        <section class="tutorial">
	<a href="https://github.com/galaxyproject/training-material/blob/main//topics/dev/tutorials/tool-generators/slides.html">View markdown source on GitHub</a>
	<h1>Introduction to the ToolFactory tutorial.</h1>
		<h2>Contributors</h2>
		<a href="/training-material/hall-of-fame/fubar2/" class="contributor-badge contributor-fubar2"><img src="https://avatars.githubusercontent.com/fubar2?s=27" alt="Avatar">Ross Lazarus</a>

		

		
		<h2>Objectives</h2>
		<ul>
		
		<li><p>This session introduces the ToolFactory and explains how it might be useful for programmers new to Galaxy</p>
</li>
		
		</ul>
		

		

		<div><strong> <i class="far fa-calendar" aria-hidden="true"></i><span class="visually-hidden">last_modification</span> Last modification:</strong> Jun 9, 2021 </div>

	<hr />


	<h1 id="what-is-the-toolfactory">What is the ToolFactory?</h1>

<ul>
  <li>The ToolFactory is a Galaxy tool.</li>
  <li>It generates new tools from working command line scripts.</li>
  <li>Generated tools work exactly the same way as manually prepared Galaxy tools.</li>
  <li>They can be installed from a toolshed and used in workflows.</li>
  <li>The script is ‚Äúwrapped‚Äù so it runs whenever the tool is executed.</li>
</ul>

<p><span>Speaker Notes</span></p>

<p>The ToolFactory is a Galaxy tool for developers and scientists who routinely write their own analysis code.
It generates fully functional, toolshed-ready tools.
Supplied with a working command line script, it can generate a new Galaxy tool that ‚Äúwraps‚Äù that script.
Scripts useful to other scientists can be widely shared through any toolshed.</p>

<hr />

<h1 id="byo-programming-skills">BYO programming skills</h1>

<ul>
  <li>If you write useful scripts and want to make them into new tools, the ToolFactory can help.</li>
  <li>Programming and scripting skills are needed to make new analysis scripts.</li>
  <li>Useful new analysis scripts are required inputs for the ToolFactory.</li>
  <li>Scripting skills are needed for this training material to be useful.</li>
</ul>

<p><span>Speaker Notes</span></p>

<p>Programming skills are needed to make any new Galaxy tool.
The ToolFactory automatically generates wrapper code, but does not write the script.
If you routinely create generalisable, working analysis code, the ToolFactory can help share your work as real Galaxy tools.</p>

<hr />

<h1 id="the-toolfactory-needs-a-working-command-line-script-to-be-useful">The ToolFactory needs a <strong>working command line script</strong> to be useful</h1>

<ul>
  <li>Bash, Rscript, Python,‚Ä¶,Lisp. Any interpreter available in Conda.</li>
  <li>Parameter settings, data input file paths and output file paths are passed to the script on the command line.</li>
  <li><code class="language-plaintext highlighter-rouge">Argparse</code> (named) or <code class="language-plaintext highlighter-rouge">positional</code> parameter passing can be used.</li>
  <li>For example: <code class="language-plaintext highlighter-rouge">python mangiare.py --food zitti.pasta --cooked "al dente" --sauce "tomato+basil"</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">mangiare.py</code> is executed as a Python script.</li>
      <li>Parameters are passed in <code class="language-plaintext highlighter-rouge">argparse</code> format</li>
      <li>Code must deal correctly with the parameters
        <ul>
          <li><code class="language-plaintext highlighter-rouge">food</code> set to ‚Äúzitti.pasta‚Äù</li>
          <li><code class="language-plaintext highlighter-rouge">cooked</code> set to ‚Äúal dente‚Äù</li>
          <li>and so on.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>It <strong>works</strong> if you can run a command like the one above in a Linux shell and get useful, correct outputs.</li>
</ul>

<p><span>Speaker Notes</span></p>

<p>The ToolFactory can help turn working scripts into new Galaxy tools.
Any scripting language available in Conda will work.
Positional or ‚ÄúArgparse‚Äù style command line parameter passing can be used.
The generated tool will not work if the script was broken to start with.
Without a working script, it is about as useful as a chocolate teapot.</p>

<hr />

<h1 id="what-does-the-developer-need-to-do-">What does the developer need to do ?</h1>

<ul>
  <li>Debug the script so it works correctly on the command line.</li>
  <li>Upload the test data samples into a new Galaxy history.</li>
  <li>Start the ToolFactory tool.
    <ul>
      <li>Paste the script</li>
      <li>Describe the inputs, outputs and parameters.</li>
    </ul>
  </li>
  <li>A completed ToolFactory form specifies a new tool.</li>
  <li>Each input is defined with a small sample selected from the history.
    <ul>
      <li>This sample is used in the generated tool test.</li>
    </ul>
  </li>
</ul>

<p><span>Speaker Notes</span></p>

<p>The developer prepares a working script and input samples.
The sample input files are uploaded to a Galaxy history.
The completed ToolFactory form collects all the information needed to generate a new tool.
The samples become the inputs for the built-in test.</p>

<hr />

<h1 id="what-happens-when-the-toolfactory-is-executed">What happens when the ToolFactory is executed?</h1>

<ul>
  <li>The information from the form drives a code generator.</li>
  <li>The galaxyxml library generates the wrapper XML</li>
  <li>A new XML wrapper is created in the history</li>
  <li>The new tool is installed in the local Galaxy.</li>
</ul>

<p><span>Speaker Notes</span></p>

<p>An XML tool wrapper is generated in the history.
The new tool is installed in the local server.
It is ready to run locally.
It looks and acts just like any manually prepared Galaxy tool.</p>

<hr />

<h1 id="what-happens-when-a-new-tool-is-updated-with-the-planemo_test-tool-">What happens when a new tool is updated with the <code class="language-plaintext highlighter-rouge">planemo_test</code> tool ?</h1>

<ul>
  <li>Planemo generates the tool test outputs and then tests the finalised tool.</li>
  <li>Test reports and the updated toolshed archive are written to the history</li>
  <li>If the tool is useful to others, it can be shared through any toolshed.</li>
</ul>

<p><span>Speaker Notes</span></p>

<p>The Planemo test and lint reports and a copy of the generated XML wrapper and a log file are returned.
The tested toolshed archive is ready to share if the tests and linting passed.</p>

<hr />

<h1 id="easy-and-quick-to-learn-but-limited-compared-to-manual-tool-wrapping">Easy and quick to learn, but limited compared to manual tool wrapping.</h1>

<ul>
  <li>Automated code generators are limited in scope in comparison to a skilled programmer.</li>
  <li>Galaxy developers maintain a separate, comprehensive manual tool development infrastructure.</li>
  <li>The ToolFactory is limited to simple scripts but it takes far less time for a developer to become productive.</li>
  <li>Scripts involving conditional parameter complexities must deal with them internally, otherwise a manually prepared tool wrapper must be written.</li>
  <li>The job that generates a tool can be re-run like any other persistent Galaxy job</li>
  <li>This allows the tool form to be adjusted and the generated tool updated at any time if changes are needed.</li>
</ul>

<p><span>Speaker Notes</span></p>

<p>Although a code generator is easy to learn to use, it is limited to relatively simple scripts.
Many Conda packages require complexities that no code generator can provide. Hand written code is required.
Scripts can sometimes be adapted to work around the many limitations of the code generator.</p>

<hr />

<h1 id="the-big-picture">The big picture</h1>

<p><img src="../../images/ToolFactory_big_picture.png" alt="Galaxy as an IDE for tools with the ToolFactory" /></p>

<p><span>Speaker Notes</span></p>

<p>Galaxy can serve as a persistent integrated tool development environment.
The developer supplies all the details for the new tool on the form, including a known good script with test data.
Clicking ‚ÄúExecute‚Äù on the form runs a Galaxy job.
It generates the new tool wrapper, writing it to the history and installing it in the local Galaxy.
ToolFactory jobs are like any other jobs - clicking the redo button will recreate the form used.
The developer can return to adjust the form and generate an updated tool at any time.
In this way, tools can easily be maintained as long as the job that generates them is saved.</p>

<hr />

<h1 id="if-you-got-this-far">If you got this far</h1>

<ul>
  <li><a href="./tutorial.html">There is a tutorial to follow</a></li>
  <li>It introduces the ToolFactory in more detail, shows how to run your own and how to explore the samples to learn how to use it.</li>
</ul>

<p><span>Speaker Notes</span></p>

<p>If you would like to learn more about the ToolFactory, there is a far more detailed introduction and hands-on tutorial available.
We hope you will enjoy learning about and using the ToolFactory in your work.</p>


	<hr />


<h2>Key Points</h2>

<ul>

<li>The ToolFactory is a specialised Galaxy tool for users who routinely write their own analysis code</li>

<li>It turns useful, working command line scripts into shareable, toolshed-ready tools.</li>

<li>A code generator is easy to learn but only simple requirements can be fully automated</li>

</ul>







<h2>Thank you!</h2>

This material is the result of a collaborative work. Thanks to the <a href="https://training.galaxyproject.org" aria-label="Visit the GTN">Galaxy Training Network</a> and all the contributors!




<img src="/training-material/assets/images/GTN.png" alt="Galaxy Training Network" style="height: 100px;"/>


This material is licensed under the <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
</section>

        </div>
        
            <footer>
    <div class="container">
        <br><br>
        <p>
            The <a href="https://galaxyproject.org/teach/gtn/">Galaxy Training Network</a>
            provides researchers with online training materials, connects them with local trainers, and helps promoting open data analysis practices worldwide.
        </p>
        <p>
The content of the tutorials is licensed under the <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. The website and infrastructure is licensed under <a rel="license" href="https://github.com/galaxyproject/training-material/blob/main/LICENSE.md">MIT</a>.
</p>
        <p>This is revision <a href="https://github.com/galaxyproject/training-material/commit/b2e71ef908d4ec335aa82cc51a8eda70ef39e230">b2e71ef908d4ec335aa82cc51a8eda70ef39e230</a></p>
    </div>
</footer>

        
    </body>
    <script type="text/javascript" src="/training-material/assets/js/jquery.slim.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/popper.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/bootstrap.min.js?v=3"></script>
    <script type="text/javascript" src="/training-material/assets/js/details-element-polyfill.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="/training-material/assets/js/bootstrap-toc.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/main.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/theme.js"></script>

    <script type="text/javascript" src="/training-material/assets/js/clipboard.min.js"></script>
    <script type="text/javascript">
    var snippets=document.querySelectorAll('div.highlight');
    [].forEach.call(snippets,function(snippet){
        snippet.firstChild.insertAdjacentHTML('beforebegin','<button class="btn btn-light" data-clipboard-snippet><i class="fa fa-copy"></i>&nbsp;Copy</button>');
    });

    var clipboardSnippets=new ClipboardJS('[data-clipboard-snippet]',{
        target:function(trigger){return trigger.nextElementSibling;
    }});
    </script>
    

    <script type="text/javascript">
        if(window.location.hostname === "galaxyproject.github.io") {
            // Redirect
            var redirect = "https://training.galaxyproject.org" + window.location.pathname + window.location.search;
            $('div.container.main-content').prepend("<div class='alert alert-warning'><strong>Note: </strong>This content has a new home at <a href=\"" + redirect + "\">" + redirect + "</a>, which you will be redirected to in 5 seconds.</div>");

            window.setTimeout(function(){
                window.location.href = redirect;
            }, 5000)

        }
    </script>
</html>
