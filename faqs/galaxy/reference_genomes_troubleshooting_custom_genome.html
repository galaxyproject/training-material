<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>FAQ: Troubleshooting Custom Genome fasta</title>
        
            <meta name="google-site-verification" content="9mOXn2JL833-i7-aioCCEuIdG4_tb6qjwUozB5GJnPQ" />

<!-- JavaScript Error Monitoring, and performance tracking. -->
<script
  src="https://browser.sentry-cdn.com/7.52.1/bundle.tracing.min.js"
  integrity="sha384-muuFXKS3752PNA4rPm9Uq6BLvOfV4CXyr9MHDBPvozOJJUWLKkogEFWOIRoVps43"
  crossorigin="anonymous"
></script>
<script type="text/javascript">
if(localStorage.getItem('sentry-opt-out') !== 'opt-out' && navigator.doNotTrack !== "1") {
	console.log("Sentry: opt-in");
	Sentry.init({
		dsn: "https://45e0ec6e4373462b92969505df37cf40@sentry.galaxyproject.org/10",
		release: "galaxy-training-network@337705899a491dc778343fac56fef8720dd20a6d",
		integrations: [new Sentry.BrowserTracing(), new Sentry.Replay()],
		sampleRate: 0.1,
		tracesSampleRate: 0.1,
		// Capture Replay for no sessions by default
		replaysSessionSampleRate: 0.01,
		// plus for 1% of sessions with an error
		replaysOnErrorSampleRate: 0.01,
		// PII OFF
		sendDefaultPii: false, // Off by default but just in case.
		environment: "production",
	});
}
</script>

<!-- Page view tracking -->
<script async defer data-domain="training.galaxyproject.org" src="https://plausible.galaxyproject.eu/js/plausible.js"></script>
<script>
if(localStorage.getItem('plausible-opt-out') !== 'opt-out' && navigator.doNotTrack !== "1") {
	localStorage.removeItem("plausible_ignore")
	console.log("Plausible: opt-in");
} else {
	// if they're opting-out, or DNT
	// we might get one page by accident but we won't get future ones.
	localStorage.setItem("plausible_ignore", "true")
}
</script>

        
        <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon">
        <link rel="alternate" type="application/atom+xml" href="/training-material/feed.xml">
        <link rel="canonical" href="https://training.galaxyproject.org/training-material/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html">
        <link rel="license" href="https://spdx.org/licenses/CC-BY-4.0">
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Regular-102a.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Bold-102a.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Italic-102a.woff2" as="font" type="font/woff2" crossorigin>
        
        <link rel="preload" href="/training-material/assets/css/main.css?v=3" as="style">
        <link rel='preload' href='/training-material/assets/js/bundle.f1f2de89.js?v=1706782310' as='script'>
<link rel='preload' href='/training-material/assets/js/bundle.03aefefa.js?v=1706782310' as='script'>
        <link rel="stylesheet" href="/training-material/assets/css/main.css?v=3">
        <link rel="manifest" href="/training-material/manifest.json">
        <meta name="theme-color" content="#2c3143"/>
	
	<link rel="alternate" type="application/json+oembed" href="https://oembed.apps.galaxyproject.eu/oembed?format=json&url=https://training.galaxyproject.org/training-material/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html" title="oEmbed Profile" />
	

        <meta name="DC.identifier" content="https://github.com/galaxyproject/training-material">
<meta name="DC.type" content="text">
<meta name="DC.title" content="Troubleshooting Custom Genome fasta">
<meta name="DC.publisher" content="Galaxy Training Network">
<meta name="DC.date" content="2023-09-28 11:56:59 +0000">
<meta name="DC.creator" content="Jennifer Hillman-Jackson">
<meta name="DC.creator" content="Nurzhamalyrys"><meta name="description" content="If a custom genome/transcriptome/exome dataset is producing errors, double check the format and that the chromosome identifiers between **ALL** inputs. Clicking on the bug icon {% icon galaxy-bug %} will often provide a description of the problem. This does not automatically submit a bug report, and it is not always necessary to do so, but it is a good way to get some information about [why a job is failing]({% link faqs/galaxy/analysis_troubleshooting.md %}).   - Custom genome not assigned as FASTA format     - **Symptoms include**: Dataset not included in custom genome "From history" pull down menu on tool forms.    - **Solution**: Check datatype assigned to dataset and assign **fasta** format.    - **How**: Click on the dataset's pencil icon {% icon galaxy-pencil %} to reach the "Edit Attributes" form, and in the Datatypes tab > [redetect the datatype]({% link faqs/galaxy/datasets_detect_datatype.md %}).    - If `fasta` is not assigned, there is a format problem to correct.     -...">
        <meta property="og:site_name" content="Galaxy Training Network">
	<meta property="og:title" content="FAQ: Troubleshooting Custom Genome fasta">
        <meta property="og:description" content="If a custom genome/transcriptome/exome dataset is producing errors, double check the format and that the chromosome identifiers between **ALL** inputs. Clicking on the bug icon {% icon galaxy-bug %} will often provide a description of the problem. This does not automatically submit a bug report, and it is not always necessary to do so, but it is a good way to get some information about [why a job is failing]({% link faqs/galaxy/analysis_troubleshooting.md %}).   - Custom genome not assigned as FASTA format     - **Symptoms include**: Dataset not included in custom genome "From history" pull down menu on tool forms.    - **Solution**: Check datatype assigned to dataset and assign **fasta** format.    - **How**: Click on the dataset's pencil icon {% icon galaxy-pencil %} to reach the "Edit Attributes" form, and in the Datatypes tab > [redetect the datatype]({% link faqs/galaxy/datasets_detect_datatype.md %}).    - If `fasta` is not assigned, there is a format problem to correct.     -...">
        
        <meta property="og:image" content="/training-material/assets/images/GTNLogo1000.png"></head>
    <body data-spy="scroll" data-target="#toc" data-brightness="auto" data-contrast="auto">
        <script src='/training-material/assets/js/bundle.f1f2de89.js?v=1706782310'></script>
        <header>
    <nav class="navbar navbar-expand-md navbar-dark" aria-label="Site Navigation">
        <div class="container">
            <a class="navbar-brand" href="/training-material/">
                <img src="/training-material/assets/images/GTN-60px.png" height="30" alt="Galaxy Training Network logo">
                
                    Galaxy Training!
                
            </a>

            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-navbar" aria-controls="top-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        
			

                        
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="/training-material/learning-pathways" title="Learning Pathways">
                           <i class="fas fa-graduation-cap" aria-hidden="true"></i><span class="visually-hidden">curriculum</span> Learning Pathways
                        </a>
                    </li>

                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Help">
        <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">help</span> Help
    </a>
    <div class="dropdown-menu dropdown-menu-right">
        <!-- disable Tess for now
        <form method="get" action="https://tess.elixir-europe.org/materials">
            <input type="text" id="search" name="q" value="" style="margin-left: 0.5em;/*! border-radius: 0px; */">
            <input type="hidden" value="Galaxy Training" name="content_provider">
            <input type="submit" value="Search on TeSS" style="width: 92%;border-radius: 0px;margin: 0.5em;background: #f47d20;border: 0px;padding: 0.25em;" class="">
        </form>
        -->

	<a class="dropdown-item" href="/training-material/faqs/index.html" title="Check our FAQs">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> FAQs
        </a>
        
        <a class="dropdown-item" href="https://help.galaxyproject.org/" title="Discuss on Galaxy Help">
            <i class="far fa-comments" aria-hidden="true"></i><span class="visually-hidden">feedback</span> Galaxy Help Forum
        </a>
        <a class="dropdown-item" href="https://gitter.im/Galaxy-Training-Network/Lobby" title="Discuss on gitter">
           <i class="fab fa-gitter" aria-hidden="true"></i><span class="visually-hidden">gitter</span> Discuss on Gitter
        </a>
    </div>
</li>


                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Settings">
	<i class="fas fa-cog" aria-hidden="true"></i><span class="visually-hidden">galaxy-gear</span> Settings
    </a>
    <div class="dropdown-menu dropdown-menu-right">

	<h6 class="dropdown-header">Preferences</h6>

	<a href="/training-material/user/theme.html" class="dropdown-item">
		<i class="fas fa-palette" aria-hidden="true"></i><span class="visually-hidden">gtn-theme</span> Theme
	</a>

	<a href="/training-material/user/privacy.html" class="dropdown-item">
		<i class="fas fa-lock" aria-hidden="true"></i><span class="visually-hidden">pref-dataprivate</span> Data Privacy
	</a>

	<div class="dropdown-divider"></div>

	<h6 class="dropdown-header">For Everyone</h6>

        <a class="dropdown-item" href="https://github.com/galaxyproject/training-material/edit/main/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.md">
          <i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Propose a change or correction
        </a>

	<h6 class="dropdown-header">Instructor Utilities</h6>

        <a class="dropdown-item" href="/training-material/stats.html">
            <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN statistics
        </a>

        <a class="dropdown-item" href="https://plausible.galaxyproject.eu/training.galaxyproject.org?period=12mo&page=/training-material/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html">
            <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> Page View Metrics
        </a>

        <!-- link to feedback -->
        
            <a class="dropdown-item" href="/training-material/feedback.html">
                <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN feedback
            </a>
        

        <div class="dropdown-item">
            <div>
                <i class="fas fa-history" aria-hidden="true"></i><span class="visually-hidden">galaxy-rulebuilder-history</span> Previous Versions
            </div>

            <div id="archive-selector">
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/smorgasbord2023/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html">smorgasbord2023</a>
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/2024-02-01/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html">2024-02-01</a>
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/2024-01-01/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html">2024-01-01</a>
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/">Older Versions</a>
            </div>

        </div>

    </div>
</li>


                    <!-- Search bar-->
                    <li class="nav-item">
                      <div id="navbarSupportedContent" role="search">
                        <!-- Search form -->
                        <form class="form-inline mr-auto" method="GET" action="/training-material/search2">
                          <i class="fas fa-search nav-link" aria-hidden="true"></i>
                          <div class="md-form mb-2">
                            <input name="query" class="form-control nicer" type="text" placeholder="Search Tutorials" aria-label="Search">
                          </div>
                        </form>
                      </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

        
        <div class="container main-content" role="main">
        <div itemscope itemtype="https://schema.org/FAQPage">

<section class="tutorial" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">

  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/training-material/faqs">All FAQs</a></li>

      

      <li class="breadcrumb-item"><a href="/training-material/faqs/galaxy/">Galaxy FAQs</a></li>

      
      

      <li class="breadcrumb-item active" aria-current="page">FAQ</li>

    </ol>
  </nav>
  <h1 itemprop="name">Troubleshooting Custom Genome fasta</h1>

    
    <div class="contributors-line" style="font-size:1rem;">Authors: <a href="/training-material/hall-of-fame/jennaj/" class="contributor-badge contributor-jennaj"><img src="/training-material/assets/images/orcid.png" alt="orcid logo" width="36" height="36"/><img src="https://avatars.githubusercontent.com/jennaj?s=36" alt="Jennifer Hillman-Jackson avatar" width="36" class="avatar" />
    Jennifer Hillman-Jackson</a><a href="/training-material/hall-of-fame/Nurzhamalyrys/" class="contributor-badge contributor-Nurzhamalyrys"><img src="https://avatars.githubusercontent.com/Nurzhamalyrys?s=36" alt="Nurzhamalyrys avatar" width="36" class="avatar" />
    Nurzhamalyrys</a><a href="https://training.galaxyproject.org/training-material/topics/contributing/" class="contributor-badge contributor-newcontributors"><i class="fas fa-users" aria-hidden="true"></i><span class="visually-hidden">hall-of-fame</span>Add Contributions!</a></div>
    <hr>
    

    <div class="container">
      <div class="row" itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
        <div class="col-md-8" itemprop="text">
           


           

<p>If a custom genome/transcriptome/exome dataset is producing errors, double check the format and that the chromosome identifiers between <strong>ALL</strong> inputs. Clicking on the bug icon <i class="fas fa-bug" aria-hidden="true"></i><span class="visually-hidden">galaxy-bug</span> will often provide a description of the problem. This does not automatically submit a bug report, and it is not always necessary to do so, but it is a good way to get some information about <a href="/training-material/faqs/galaxy/analysis_troubleshooting.html">why a job is failing</a>.</p>

<ul>
  <li>
    <p>Custom genome not assigned as FASTA format</p>

    <ul>
      <li><strong>Symptoms include</strong>: Dataset not included in custom genome “From history” pull down menu on tool forms.</li>
      <li><strong>Solution</strong>: Check datatype assigned to dataset and assign <strong>fasta</strong> format.</li>
      <li><strong>How</strong>: Click on the dataset’s pencil icon <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> to reach the “Edit Attributes” form, and in the Datatypes tab &gt; <a href="/training-material/faqs/galaxy/datasets_detect_datatype.html">redetect the datatype</a>.</li>
      <li>If <code class="language-plaintext highlighter-rouge">fasta</code> is not assigned, there is a format problem to correct.</li>
    </ul>
  </li>
  <li>
    <p>Incomplete Custom genome file load</p>

    <ul>
      <li><strong>Symptoms include</strong>: Tool errors result the first time you use the Custom genome.</li>
      <li><strong>Solution</strong>: Use <strong>Text Manipulation → Select last lines from a dataset</strong> to check last 10 lines to see if file is truncated.</li>
      <li><strong>How</strong>: Reload the dataset (switch to <a href="https://galaxyproject.org/ftp-upload/">FTP</a> if not using already). Check your FTP client logs to make sure the load is complete.</li>
    </ul>
  </li>
  <li>
    <p>Extra spaces, extra lines, inconsistent line wrapping, or any deviation from strict FASTA format</p>

    <ul>
      <li><strong>Symptoms include: RNA-seq tools (Cufflinks, Cuffcompare, Cuffmerge, Cuffdiff)</strong> fails with error <code class="language-plaintext highlighter-rouge">Error: sequence lines in a FASTA record must have the same length!.</code></li>
      <li><strong>Solution</strong>: File tested and corrected locally then re-upload or test/fix within Galaxy, then re-run.</li>
      <li><strong>How</strong>:
        <ul>
          <li><strong>Quick re-formatting</strong> Run the tool through the tool <strong>NormalizeFasta</strong> using the options to wrap sequence lines at 80 bases and to trim the title line at the first whitespace.</li>
          <li><strong>Optional Detailed re-formatting</strong> Start with <strong>FASTA manipulation → FASTA Width formatter</strong> with a value between 40-80 (60 is common) to reformat wrapping. Next, use Filter and Sort → Select with “&gt;” to examine identifiers. Use a combination of <strong>Convert Formats → FASTA-to-Tabular, Text Manipulation</strong> tools, then <strong>Tabular-to-FASTA</strong> to correct.</li>
          <li><strong>With either of the above</strong>, finish by using <strong>Filter and Sort → Select</strong> with <code class="language-plaintext highlighter-rouge">^\w*$</code> to search for empty lines (use “NOT matching” to remove these lines and output a properly format fasta dataset).</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Inconsistent line wrapping, common if merging chromosomes from various Genbank records (e.g. primary chroms with mito)</p>

    <ul>
      <li><strong>Symptoms include</strong>: Tools (<strong>SAMTools, Extract Genomic DNA</strong>, but rarely alignment tools) may complain about unexpected line lengths/missing identifiers. Or they may just fail for what appears to be a cluster error.</li>
      <li><strong>Solution</strong>: File tested and corrected locally then re-upload or test/fix within Galaxy.</li>
      <li><strong>How</strong>: Use <strong>NormalizeFasta</strong> using the options to wrap sequence lines at 80 bases and to trim the title line at the first whitespace. Finish by using <strong>Filter and Sort → Select</strong> with <code class="language-plaintext highlighter-rouge">^\w*$</code> to search for empty lines (use “NOT matching” to remove these lines and output a properly format fasta dataset).</li>
    </ul>
  </li>
  <li>
    <p>Unsorted fasta genome file</p>

    <ul>
      <li><strong>Symptoms include</strong>: Tools such as <strong>Extract Genomic DNA</strong> report problems with sequence lengths.</li>
      <li><strong>Solution</strong>: First try sorting and re-formatting in Galaxy then re-run.</li>
      <li><strong>How</strong>: To sort, follow instructions for <a href="/training-material/faqs/galaxy/reference_genomes_sorting_reference_genome.html">Sorting</a> a Custom Genome.</li>
    </ul>
  </li>
  <li>
    <p>Identifier and Description in “&gt;” title lines used inconsistently by tools in the same analysis</p>

    <ul>
      <li><strong>Symptoms include</strong>: Will generally manifest as a false genome-mismatch problem.</li>
      <li><strong>Solution</strong>: Remove the description content and re-run all tools/workflows that used this input. Mapping tools will usually not fail, but downstream tools will. When this comes up, it usually means that an analysis needs to be started over from the mapping step to correct the problems. No one enjoys redoing this work. Avoid the problems by formatting the genome, by double checking that the same reference genome was used for all steps, and by making certain the ‘identifiers’ are a match between all planned inputs (including reference annotation such as GTF data) <strong>before using your custom genome</strong>.</li>
      <li><strong>How</strong>: To drop the title line description content, use <strong>NormalizeFasta</strong> using the options to wrap sequence lines at 80 bases and to trim the title line at the first whitespace. Next, double check that the chromosome identifiers are an exact match between all inputs.</li>
    </ul>
  </li>
  <li>
    <p>Unassigned database</p>

    <ul>
      <li><strong>Symptoms include</strong>: Tools report that no build is available for the assigned reference genome.</li>
      <li><strong>Solution</strong>: This occurs with tools that require an assigned database metadata attribute. <strong>SAMTools and Picard</strong> often require this assignment.</li>
      <li><strong>How</strong>: Create a <a href="/training-material/faqs/galaxy/analysis_add_custom_build.html">Custom Build</a> and assign it to the dataset.</li>
    </ul>
  </li>
</ul>

        </div>
        <div class="col-md-4">
          <h5>Still have questions?</h5>

          <!--
add a button, include configuration options:

 link: "https://example.com"
 label: this text goes on button
 size: small/medium/large/extralarge
 colour:  blue/purple/green/red/yellow/lightblue/white/black
 square: false , if you want a regular rectangular button
-->




<a href="https://gitter.im/Galaxy-Training-Network/Lobby" class="btn btn-square-medium btn-yellow"><div>Gitter Chat Support</div></a>


          <!--
add a button, include configuration options:

 link: "https://example.com"
 label: this text goes on button
 size: small/medium/large/extralarge
 colour:  blue/purple/green/red/yellow/lightblue/white/black
 square: false , if you want a regular rectangular button
-->




<a href="https://help.galaxyproject.org" class="btn btn-square-medium btn-purple"><div>Galaxy Help Forum</div></a>



          <h5>Want to embed this snippet (FAQ) in your GTN Tutorial?</h5>
<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{% snippet  faqs/galaxy/reference_genomes_troubleshooting_custom_genome.md %}
</code></pre></div></div>

	  
          <h5>Persistent URL</h5>
	  Resource <i class="fas fa-fingerprint" aria-hidden="true"></i><span class="visually-hidden">purl</span><abbr title="Persistent URL">PURL</abbr>: <a class="badge badge-info" href="https://gxy.io/GTN:F00089">https://gxy.io/GTN:F00089</a>
	  



        </div>
      </div>
    </div>

    

</section>
</div>

        </div>
        <footer>
	<hr />
	<div class="container">
		<div class="row">
			<div class="col-sm-6" style="text-align: left">
				<p>
					The <a href="https://galaxyproject.org/teach/gtn/">Galaxy Training Network</a>
					provides researchers with online training materials, connects them with local trainers, and helps promoting FAIR and Open Science practices worldwide. All contributions are subject to the <a rel="code-of-conduct" href="https://galaxyproject.org/community/coc/">Galaxy Project Code of Conduct</a>.
				</p>
				<p>
				The GTN infrastructure is licensed under <a rel="license" href="https://github.com/galaxyproject/training-material/blob/main/LICENSE.md">MIT</a>
				</p>
				<p>
				Revision <a href="https://github.com/galaxyproject/training-material/commit/337705899a491dc778343fac56fef8720dd20a6d">3377058</a>, built with Jekyll (4.3.2 | production)
				</p>
			</div>
			<div class="col-sm-6" style="text-align: right">
				
				<p>
					Resource <i class="fas fa-fingerprint" aria-hidden="true"></i><span class="visually-hidden">purl</span><abbr title="Persistent URL">PURL</abbr>: <a href="https://gxy.io/GTN:F00089">https://gxy.io/GTN:F00089</a>
				</p>
				
				<p>
					<i>This Material</i>:
					
					is licensed under
					<a rel="license" href="https://spdx.org/licenses/CC-BY-4.0">
						Creative Commons Attribution 4.0 International License
					</a>
				</p>
				<p>
					<a href="https://github.com/galaxyproject/training-material/edit/main/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.md" title="Edit on GitHub">
					<i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Edit on GitHub
					</a>
				</p>
			</div>
		</div>
	</div>
</footer>


        <script src='/training-material/assets/js/bundle.03aefefa.js?v=1706782310'></script>
        
    </body>
</html>
