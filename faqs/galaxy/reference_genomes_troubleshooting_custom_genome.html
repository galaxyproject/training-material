<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Troubleshooting Custom Genome fasta</title>
        
            <script async defer data-domain="training.galaxyproject.org" src="https://plausible.galaxyproject.eu/js/plausible.js"></script>

        
        <link rel="stylesheet" href="/training-material/assets/css/bootstrap.min.css?v=3">
        <link rel="stylesheet" href="/training-material/assets/css/bootstrap-toc.min.css">
        <link rel="stylesheet" href="/training-material/assets/css/main.css?v=2">
        <script src="https://kit.fontawesome.com/67b3f98409.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="/training-material/assets/css/academicons.css">
        <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon" />
        <link rel="alternate" type="application/atom+xml" href="/training-material/feed.xml" />
        <link rel="canonical" href="https://training.galaxyproject.org/training-material/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html" />
        <link rel="license" href="https://creativecommons.org/licenses/by/4.0/" />

        <meta name="DC.identifier" content="https://github.com/galaxyproject/training-material" />
<meta name="DC.type" content="text" />
<meta name="DC.title" content="Troubleshooting Custom Genome fasta" />
<meta name="DC.publisher" content="Galaxy Training Network" />
<meta name="DC.date" content="2022-05-10 08:43:55 +0000" />
<meta name="DC.creator" content="Jennifer Hillman-Jackson" />
<meta name="DC.creator" content="Nurzhamalyrys" />

        
        
        
        
        <meta name="description" content="Collection of tutorials developed and maintained by the w..." />
        <meta property="og:site_name" content="Galaxy Training Network" />
        <meta property="og:title" content="Galaxy Training: Troubleshooting Custom Genome fasta" />
        <meta property="og:description" content="Collection of tutorials developed and maintained by the w..." />
        <meta property="og:image" content="/training-material/assets/images/GTNLogo1000.png" />

        
    </head>
    <body data-spy="scroll" data-target="#toc">
        <header>
    <nav class="navbar navbar-expand-md navbar-dark" aria-label="Site Navigation">
        <div class="container">
            <a class="navbar-brand" href="/training-material/">
                <img src="/training-material/assets/images/GTN-60px.png" height="30" alt="Galaxy Training Network logo">
                Galaxy Training!
            </a>

            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-navbar" aria-controls="top-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        
                        <a class="nav-link" href="/training-material/hall-of-fame" title="Hall of Fame">
                           <i class="fas fa-users" aria-hidden="true"></i><span class="visually-hidden">hall-of-fame</span> Contributors
                        </a>

                        
                    </li>

                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Languages">
                            <i class="fas fa-language" aria-hidden="true"></i><span class="visually-hidden">language</span> Languages
                        </a>
                        <div class="dropdown-menu dropdown-menu-right">
                            
                              <strong class="dropdown-header">Automatic Translations</strong>
            
            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=fr&u=https%3A%2F%2Ftraining.galaxyproject.org/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html&edit-text=&act=url">
                            Fran√ßais
                            </a>
                            
            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ja&u=https%3A%2F%2Ftraining.galaxyproject.org/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html&edit-text=&act=url">
                            Êó•Êú¨Ë™û
                            </a>
                            
            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=es&u=https%3A%2F%2Ftraining.galaxyproject.org/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html&edit-text=&act=url">
                            Espa√±ol
                            </a>
                            
            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=pt&u=https%3A%2F%2Ftraining.galaxyproject.org/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html&edit-text=&act=url">
                            Portugu√™s
                            </a>
                            
            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ar&u=https%3A%2F%2Ftraining.galaxyproject.org/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html&edit-text=&act=url">
                            ÿßŸÑÿπÿ±ÿ®Ÿäÿ©
                            </a>
                            
                            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=&u=https%3A%2F%2Ftraining.galaxyproject.org/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html&edit-text=&act=url" title="">
                            And more!
                            </a>
                        </div>
                    </li>

                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Help">
        <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">help</span> Help
    </a>
    <div class="dropdown-menu dropdown-menu-right">
        <!-- disable Tess for now
        <form method="get" action="https://tess.elixir-europe.org/materials">
            <input type="text" id="search" name="q" value="" style="margin-left: 0.5em;/*! border-radius: 0px; */">
            <input type="hidden" value="Galaxy Training" name="content_provider">
            <input type="submit" value="Search on TeSS" style="width: 92%;border-radius: 0px;margin: 0.5em;background: #f47d20;border: 0px;padding: 0.25em;" class="">
        </form>
        -->

        <a class="dropdown-item" href="/training-material/faq" title="Check our FAQs">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> FAQs
        </a>
        
        <a class="dropdown-item" href="https://help.galaxyproject.org/" title="Discuss on Galaxy Help">
            <i class="far fa-comments" aria-hidden="true"></i><span class="visually-hidden">feedback</span> Galaxy Help Forum
        </a>
        <a class="dropdown-item" href="https://gitter.im/Galaxy-Training-Network/Lobby" title="Discuss on gitter">
           <i class="fab fa-gitter" aria-hidden="true"></i><span class="visually-hidden">gitter</span> Discuss on Gitter
        </a>
    </div>
</li>


                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Extras">
        <i class="far fa-star" aria-hidden="true"></i><span class="visually-hidden">galaxy-star</span> Extras
    </a>
    <div class="dropdown-menu dropdown-menu-right">

        
        <a class="dropdown-item" href="https://github.com/galaxyproject/training-material/edit/main/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.md" title="Edit on GitHub">
          <i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Edit on GitHub
        </a>

        <a class="dropdown-item" href="/training-material/stats.html" title="Show view statistics about this repository">
            <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN statistics
        </a>

        <a class="dropdown-item" href="https://plausible.galaxyproject.eu/training.galaxyproject.org?period=12mo&page=/training-material/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html" title="Show view statistics of this page">
            <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> Page Metrics
        </a>

        <!-- link to feedback -->
        
            <a class="dropdown-item" href="/training-material/feedback.html" title="Show feedback statistics about this repository">
                <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN feedback
            </a>
        

        <div class="dropdown-item">
            <div>
                <i class="fas fa-palette" aria-hidden="true"></i><span class="visually-hidden">gtn-theme</span> Theme
            </div>

            <div id="theme-selector" data-toggle="buttons">
                    <button class="btn" data-theme="default">Default</button>
                    <button class="btn" data-theme="night">Night</button>
                    <button class="btn" data-theme="midnight">Midnight</button>
                    <button class="btn" data-theme="rainbow">Rainbow</button>
                    <button class="btn" data-theme="blm">‚úäüèø</button>
                    <button class="btn" data-theme="progress" >üè≥Ô∏è‚Äçüåà</button>
                    <button class="btn" data-theme="halloween">üéÉ</button>
                    <button class="btn" data-theme="downunder">üá¶üá∫</button>
            </div>

        </div>

        <div class="dropdown-item">
            <div>
                <i class="fas fa-history" aria-hidden="true"></i><span class="visually-hidden">galaxy-rulebuilder-history</span> Previous Versions
            </div>

            <div id="archive-selector">
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/2023-02-01/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html" title="Version 2023-02-01">2023-02-01</a>
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/2023-01-01/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html" title="Version 2023-01-01">2023-01-01</a>
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/2022-12-01/faqs/galaxy/reference_genomes_troubleshooting_custom_genome.html" title="Version 2022-12-01">2022-12-01</a>
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/" title="Older Versions">Older Versions</a>
            </div>

        </div>

    </div>
</li>


                    <!-- Search bar-->
                    <li class="nav-item">
                      <div id="navbarSupportedContent" role="search">
                        <!-- Search form -->
                        <form class="form-inline mr-auto" method="GET" action="/training-material/search">
                          <i class="fas fa-search nav-link" aria-hidden="true"></i>
                          <div class="md-form mb-2">
                            <input name="query" class="form-control nicer" type="text" placeholder="Search Tutorials" aria-label="Search">
                          </div>
                        </form>
                      </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

        <div class="container main-content" role="main">
        
<section class="tutorial">

  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/training-material/faqs">All FAQs</a></li>

      

      <li class="breadcrumb-item"><a href="/training-material/faqs/galaxy/">Galaxy FAQs</a></li>

      
      

      <li class="breadcrumb-item active" aria-current="page">FAQ</li>

    </ol>
  </nav>

  <h1>Troubleshooting Custom Genome fasta</h1>

    
    <div class="contributors-line" style="font-size:1rem;">Authors: <a href="/training-material/hall-of-fame/jennaj/" class="contributor-badge contributor-jennaj"><img src="/training-material/assets/images/orcid.png" alt="orcid logo"/><img src="https://avatars.githubusercontent.com/jennaj?s=27" alt="Avatar">Jennifer Hillman-Jackson</a><a href="/training-material/hall-of-fame/Nurzhamalyrys/" class="contributor-badge contributor-Nurzhamalyrys"><img src="https://avatars.githubusercontent.com/Nurzhamalyrys?s=27" alt="Avatar">Nurzhamalyrys</a><a href="https://training.galaxyproject.org/training-material/topics/contributing/" class="contributor-badge contributor-newcontributors"><i class="fas fa-users" aria-hidden="true"></i><span class="visually-hidden">hall-of-fame</span>Add Contributions!</a></div>
    <hr>
    

    <div class="container">
      <div class="row">
        <div class="col-md-8">
           


           

<p>If a custom genome/transcriptome/exome dataset is producing errors, double check the format and that the chromosome identifiers between <strong>ALL</strong> inputs. Clicking on the bug icon <i class="fas fa-bug" aria-hidden="true"></i><span class="visually-hidden">galaxy-bug</span> will often provide a description of the problem. This does not automatically submit a bug report, and it is not always necessary to do so, but it is a good way to get some information about <a href="https://training.galaxyproject.org/training-material/faqs/galaxy/analysis_troubleshooting.html">why a job is failing</a>.</p>

<ul>
  <li>
    <p>Custom genome not assigned as FASTA format</p>

    <ul>
      <li><strong>Symptoms include</strong>: Dataset not included in custom genome ‚ÄúFrom history‚Äù pull down menu on tool forms.</li>
      <li><strong>Solution</strong>: Check datatype assigned to dataset and assign <strong>fasta</strong> format.</li>
      <li><strong>How</strong>: Click on the dataset‚Äôs pencil icon <i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">galaxy-pencil</span> to reach the ‚ÄúEdit Attributes‚Äù form, and in the Datatypes tab &gt; <a href="/training-material/faqs/galaxy/datasets_detect_datatype.html">redetect the datatype</a>.</li>
      <li>If <code class="language-plaintext highlighter-rouge">fasta</code> is not assigned, there is a format problem to correct.</li>
    </ul>
  </li>
  <li>
    <p>Incomplete Custom genome file load</p>

    <ul>
      <li><strong>Symptoms include</strong>: Tool errors result the first time you use the Custom genome.</li>
      <li><strong>Solution</strong>: Use <strong>Text Manipulation ‚Üí Select last lines from a dataset</strong> to check last 10 lines to see if file is truncated.</li>
      <li><strong>How</strong>: Reload the dataset (switch to <a href="https://galaxyproject.org/ftp-upload/">FTP</a> if not using already). Check your FTP client logs to make sure the load is complete.</li>
    </ul>
  </li>
  <li>
    <p>Extra spaces, extra lines, inconsistent line wrapping, or any deviation from strict FASTA format</p>

    <ul>
      <li><strong>Symptoms include: RNA-seq tools (Cufflinks, Cuffcompare, Cuffmerge, Cuffdiff)</strong> fails with error <code class="language-plaintext highlighter-rouge">Error: sequence lines in a FASTA record must have the same length!.</code></li>
      <li><strong>Solution</strong>: File tested and corrected locally then re-upload or test/fix within Galaxy, then re-run.</li>
      <li><strong>How</strong>:
        <ul>
          <li><strong>Quick re-formatting</strong> Run the tool through the tool <strong>NormalizeFasta</strong> using the options to wrap sequence lines at 80 bases and to trim the title line at the first whitespace.</li>
          <li><strong>Optional Detailed re-formatting</strong> Start with <strong>FASTA manipulation ‚Üí FASTA Width formatter</strong> with a value between 40-80 (60 is common) to reformat wrapping. Next, use Filter and Sort ‚Üí Select with ‚Äú&gt;‚Äù to examine identifiers. Use a combination of <strong>Convert Formats ‚Üí FASTA-to-Tabular, Text Manipulation</strong> tools, then <strong>Tabular-to-FASTA</strong> to correct.</li>
          <li><strong>With either of the above</strong>, finish by using <strong>Filter and Sort ‚Üí Select</strong> with <code class="language-plaintext highlighter-rouge">^\w*$</code> to search for empty lines (use ‚ÄúNOT matching‚Äù to remove these lines and output a properly format fasta dataset).</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Inconsistent line wrapping, common if merging chromosomes from various Genbank records (e.g. primary chroms with mito)</p>

    <ul>
      <li><strong>Symptoms include</strong>: Tools (<strong>SAMTools, Extract Genomic DNA</strong>, but rarely alignment tools) may complain about unexpected line lengths/missing identifiers. Or they may just fail for what appears to be a cluster error.</li>
      <li><strong>Solution</strong>: File tested and corrected locally then re-upload or test/fix within Galaxy.</li>
      <li><strong>How</strong>: Use <strong>NormalizeFasta</strong> using the options to wrap sequence lines at 80 bases and to trim the title line at the first whitespace. Finish by using <strong>Filter and Sort ‚Üí Select</strong> with <code class="language-plaintext highlighter-rouge">^\w*$</code> to search for empty lines (use ‚ÄúNOT matching‚Äù to remove these lines and output a properly format fasta dataset).</li>
    </ul>
  </li>
  <li>
    <p>Unsorted fasta genome file</p>

    <ul>
      <li><strong>Symptoms include</strong>: Tools such as <strong>Extract Genomic DNA</strong> report problems with sequence lengths.</li>
      <li><strong>Solution</strong>: First try sorting and re-formatting in Galaxy then re-run.</li>
      <li><strong>How</strong>: To sort, follow instructions for <a href="/training-material/faqs/galaxy/reference_genomes_sorting_reference_genome.html">Sorting</a> a Custom Genome.</li>
    </ul>
  </li>
  <li>
    <p>Identifier and Description in ‚Äú&gt;‚Äù title lines used inconsistently by tools in the same analysis</p>

    <ul>
      <li><strong>Symptoms include</strong>: Will generally manifest as a false genome-mismatch problem.</li>
      <li><strong>Solution</strong>: Remove the description content and re-run all tools/workflows that used this input. Mapping tools will usually not fail, but downstream tools will. When this comes up, it usually means that an analysis needs to be started over from the mapping step to correct the problems. No one enjoys redoing this work. Avoid the problems by formatting the genome, by double checking that the same reference genome was used for all steps, and by making certain the ‚Äòidentifiers‚Äô are a match between all planned inputs (including reference annotation such as GTF data) <strong>before using your custom genome</strong>.</li>
      <li><strong>How</strong>: To drop the title line description content, use <strong>NormalizeFasta</strong> using the options to wrap sequence lines at 80 bases and to trim the title line at the first whitespace. Next, double check that the chromosome identifiers are an exact match between all inputs.</li>
    </ul>
  </li>
  <li>
    <p>Unassigned database</p>

    <ul>
      <li><strong>Symptoms include</strong>: Tools report that no build is available for the assigned reference genome.</li>
      <li><strong>Solution</strong>: This occurs with tools that require an assigned database metadata attribute. <strong>SAMTools and Picard</strong> often require this assignment.</li>
      <li><strong>How</strong>: Create a <a href="/training-material/faqs/galaxy/analysis_add_custom_build.html">Custom Build</a> and assign it to the dataset.</li>
    </ul>
  </li>
</ul>


        </div>
        <div class="col-md-4">
          <h5>Still have questions?</h5>

          <!--
add a button, include configuration options:

 link: "https://example.com"
 label: this text goes on button
 size: small/medium/large/extralarge
 colour:  blue/purple/green/red/yellow/lightblue/white/black
 square: false , if you want a regular rectangular button
-->




<a href="https://gitter.im/Galaxy-Training-Network/Lobby" class="btn btn-square-medium btn-yellow"><div>Gitter Chat Support</div></a>


          <!--
add a button, include configuration options:

 link: "https://example.com"
 label: this text goes on button
 size: small/medium/large/extralarge
 colour:  blue/purple/green/red/yellow/lightblue/white/black
 square: false , if you want a regular rectangular button
-->




<a href="https://help.galaxyproject.org" class="btn btn-square-medium btn-purple"><div>Galaxy Help Forum</div></a>



          <h5>Want to embed this snippet (FAQ) in your GTN Tutorial?</h5>
<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{% snippet  faqs/galaxy/reference_genomes_troubleshooting_custom_genome.md %}
</code></pre></div></div>

        </div>
      </div>
    </div>

    

</section>

        </div>
        
            <footer>
    <div class="container">
        <br><br>
        <p>
            The <a href="https://galaxyproject.org/teach/gtn/">Galaxy Training Network</a>
            provides researchers with online training materials, connects them with local trainers, and helps promoting open data analysis practices worldwide.
        </p>
        <p>
        The content of the tutorials is licensed under the <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. The website and infrastructure is licensed under <a rel="license" href="https://github.com/galaxyproject/training-material/blob/main/LICENSE.md">MIT</a>.
        </p>

        <p>This is revision <a href="https://github.com/galaxyproject/training-material/commit/34e83fef5849d18c0e977cff7beb952ca1471cff">34e83fef5849d18c0e977cff7beb952ca1471cff</a></p>
    </div>
</footer>

        
        <script type="text/javascript" src="/training-material/assets/js/jquery.slim.min.js"></script>
        <script type="text/javascript" src="/training-material/assets/js/popper.min.js"></script>
        <script type="text/javascript" src="/training-material/assets/js/bootstrap.min.js?v=3"></script>
        <script type="text/javascript" src="/training-material/assets/js/details-element-polyfill.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/javascript" src="/training-material/assets/js/bootstrap-toc.min.js"></script>
        <script type="text/javascript" src="/training-material/assets/js/main.js"></script>
        <script type="text/javascript" src="/training-material/assets/js/theme.js"></script>
        <script type="text/javascript" src="/training-material/assets/js/clipboard.min.js"></script>
        <script type="text/javascript">
        var snippets=document.querySelectorAll('div.highlight');
        [].forEach.call(snippets,function(snippet){
            snippet.firstChild.insertAdjacentHTML('beforebegin','<button class="btn btn-light" data-clipboard-snippet><i class="fa fa-copy"></i>&nbsp;Copy</button>');
        });

        var clipboardSnippets=new ClipboardJS('[data-clipboard-snippet]',{
            target:function(trigger){return trigger.nextElementSibling;
        }});
        </script>
        

        <script type="text/javascript">
            if(window.location.hostname === "galaxyproject.github.io") {
                // Redirect
                var redirect = "https://training.galaxyproject.org" + window.location.pathname + window.location.search;
                $('div.container.main-content').prepend("<div class='alert alert-warning'><strong>Note: </strong>This content has a new home at <a href=\"" + redirect + "\">" + redirect + "</a>, which you will be redirected to in 5 seconds.</div>");

                window.setTimeout(function(){
                    window.location.href = redirect;
                }, 5000)

            }
        </script>
    </body>
</html>
