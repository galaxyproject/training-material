{"layout":"tutorial_hands_on","title":"M. tuberculosis Variant Analysis","subtopic":"one-health","zenodo_link":"https://doi.org/10.5281/zenodo.3496437","questions":["How do we detect differences between a set of reads from _M. tuberculosis_ (Mtb) and the Mtb reference genome"],"objectives":["How should we filter those variants","How can we predict drug resistance from those variants","How do we annotate those variants"],"time_estimation":"2h","level":"Intermediate","key_points":["variants in _M. tuberculosis_ sequencing data can be discovered using common microbial bioinformatics tools","it is not enough to just call variants, variant calling involves multiple quality control steps","the choice of reference genome and some quality control procedures are species-specific, and require knowledge of the organism in question","batches of samples can be processed using Galaxy dataset collections and workflows"],"contributors":[{"name":"Peter van Heusden","twitter":"pvanheus","orcid":"0000-0001-6553-5274","joined":"2017-09","bio":"Research at the South African National Bioinformatics Institute","id":"pvanheus","url":"https://training.galaxyproject.org/training-material/api/contributors/pvanheus.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/pvanheus/"},{"name":"Simon Gladman","email":"simon.gladman@unimelb.edu.au","joined":"2017-09","elixir_node":"au","orcid":"0000-0002-6100-4385","in_memoriam":"<a href=\"https://www.biocommons.org.au/news/simon-gladman\">Simon Gladman, system administrator of UseGalaxy.org.au, passed away on November 26, 2022</a>\n\n<a href=\"https://galaxyproject.org/news/2022-11-28-simon-gladman/\">He was a fantastic teacher, tutorial author, system administrator, and warm and welcoming friend.</a> He contributed heavily to the Galaxy Training Network and especially the Galaxy Administration community over the years, we will miss him dearly. The GTN and GAT would not be what they are today, without him.\n\n“Have I told you about my watch?”","id":"slugger70","url":"https://training.galaxyproject.org/training-material/api/contributors/slugger70.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/slugger70/"},{"name":"Thoba Lose","joined":"2019-11","id":"thobalose","url":"https://training.galaxyproject.org/training-material/api/contributors/thobalose.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/thobalose/"}],"tags":["prokaryote","one-health","microgalaxy","tuberculosis"],"edam_ontology":["topic_0622","topic_3301","topic_0196","topic_0199","topic_3305","topic_3324"],"recordings":[{"captioners":["pvanheus","nagoue","hexylena"],"date":"2021-02-15","galaxy_version":"21.01","length":"40M","youtube_id":"G1DmquX6Wh8","speakers":["pvanheus"]},{"captioners":["pvanheus"],"date":"2024-06-11","galaxy_version":"24.0","length":"1H17M","youtube_id":"-nJPngFk36c","speakers":["pvanheus"]}],"js_requirements":{"mathjax":null,"mermaid":false},"short_id":"T00319","url":"/topics/variant-analysis/tutorials/tb-variant-analysis/tutorial.html","topic_name":"variant-analysis","tutorial_name":"tb-variant-analysis","dir":"topics/variant-analysis/tutorials/tb-variant-analysis","symlink":null,"id":"variant-analysis/tb-variant-analysis","hands_on":true,"slides":false,"mod_date":"2024-07-26 07:10:40 +0000","pub_date":"2020-07-25 20:58:54 +0000","version":30,"workflows":[{"workflow":"tb-variant-analysis.ga","tests":true,"url":"https://training.galaxyproject.org/training-material/topics/variant-analysis/tutorials/tb-variant-analysis/workflows/tb-variant-analysis.ga","url_html":"https://training.galaxyproject.org/training-material/topics/variant-analysis/tutorials/tb-variant-analysis/workflows/tb-variant-analysis.html","path":"topics/variant-analysis/tutorials/tb-variant-analysis/workflows/tb-variant-analysis.ga","wfid":"variant-analysis-tb-variant-analysis","wfname":"tb-variant-analysis","trs_endpoint":"https://training.galaxyproject.org/training-material/api/ga4gh/trs/v2/tools/variant-analysis-tb-variant-analysis/versions/tb-variant-analysis","license":"AGPL-3.0-or-later","parent_id":"variant-analysis/tb-variant-analysis","topic_id":"variant-analysis","tutorial_id":"tb-variant-analysis","creators":[{"class":"Person","identifier":"0000-0001-6553-5274","name":"Peter van Heusden"}],"name":"TB Variant Analysis v1.0","title":"TB Variant Analysis v1.0","version":7,"description":"Predict variants and drug resistance from M. tuberculosis sequence samples (Illumina)","tags":["pathogen","tuberculosis"],"features":{"report":{"markdown":"\n# Workflow Execution Report\n\n## Workflow Inputs\n```galaxy\ninvocation_inputs()\n```\n\n## Workflow Outputs\n```galaxy\ninvocation_outputs()\n```\n\n## Workflow\n```galaxy\nworkflow_display()\n```\n"},"subworkflows":false,"comments":false,"parameters":true},"workflowhub_id":"1069","history":[{"hash":"c0042e7f333bb9758580a564dbf559e83396a6d3","unix":"1718025591","message":"Update to address comments from wm","short_hash":"c0042e7f3","num":14},{"hash":"01cf3d5e27fb411603014ca3e0729b2daacc0a0d","unix":"1717788409","message":"Add snippers for running workflow from workflowhub.eu and jbrowse vis","short_hash":"01cf3d5e2","num":13},{"hash":"d3db4cd3e349677c907c71a761fde1b2935928d2","unix":"1717771237","message":"Update the M. tuberculosis variant analysis tutorial * Update all tools to latest versions * Change to fastp instead of Trimmomatic * Add section on running workflow * Update workflow and workflow test","short_hash":"d3db4cd3e","num":12},{"hash":"d61d5645fa6b21c25cd5d09f540c4e584b35f2c2","unix":"1695643686","message":"Update tb_variant_filter to v. 0.4.0","short_hash":"d61d5645f","num":11},{"hash":"c89f11fe32c66c1da9f058ec3fa522e8b18cba82","unix":"1682624753","message":"Update some tools in tuberculosis variant analysis tutorial (#4070)","short_hash":"c89f11fe3","num":10},{"hash":"fa9e9fb000ef9d2ab91acc67c4f338c213d641e2","unix":"1672566129","message":"New variant of tb_variant_filter and tbprofiler, more detail on tb_variant_filter","short_hash":"fa9e9fb00","num":9},{"hash":"6e9c1860b186754249a0a90d9957dbace653e9ac","unix":"1648048765","message":"Restore workflow indentation and fix WF step order","short_hash":"6e9c1860b","num":8},{"hash":"354e9edf1340c37133b7d1834cea608895acebc0","unix":"1648028595","message":"Use correct snippy wrapper version everywhere","short_hash":"354e9edf1","num":7},{"hash":"6f476a03271eeabffcf0877e8a402f7af815deba","unix":"1647976648","message":"Update snippy to 4.6.0","short_hash":"6f476a032","num":6},{"hash":"946f6f60f8e068a147f03d89f369f19e552793da","unix":"1647938051","message":"Generate cleaner intermediate diff","short_hash":"946f6f60f","num":5},{"hash":"8e46a42b5a664cf72ea7e2aae61739348f64dfea","unix":"1647929062","message":"Autoupdate workflow, change Kraken2 test","short_hash":"8e46a42b5","num":4},{"hash":"f98407ff47fe6ea903372a39b09530ae075d65b3","unix":"1595713523","message":"tb-variant-analysis: label workflow outputs and add test","short_hash":"f98407ff4","num":3},{"hash":"392830f9b51662e8028b8984f48f827be8a10aed","unix":"1595707349","message":"Reformat tb-variant-analysis workflow","short_hash":"392830f9b","num":2},{"hash":"2e73bb7aa538d3fb94e7f7ca21bfc6078d35e73f","unix":"1595705571","message":"Update M. tuberculosis variant analysis tutorial with new data and workflow","short_hash":"2e73bb7aa","num":1}],"test_results":null,"modified":"2024-09-26 07:31:06 +0000","mermaid":"flowchart TD\n  0[\"ℹ️ Input Collection\\nReads\"];\n  style 0 stroke:#2c3143,stroke-width:4px;\n  1[\"ℹ️ Input Dataset\\nReference Genome\"];\n  style 1 stroke:#2c3143,stroke-width:4px;\n  2[\"ℹ️ Input Parameter\\nMinimum depth of coverage\"];\n  style 2 fill:#ded,stroke:#393,stroke-width:4px;\n  3[\"ℹ️ Input Parameter\\nMinimum variant allele frequency\"];\n  style 3 fill:#ded,stroke:#393,stroke-width:4px;\n  4[\"ℹ️ Input Parameter\\nAdditional BWA-MEM options\"];\n  style 4 fill:#ded,stroke:#393,stroke-width:4px;\n  5[\"fastp\"];\n  0 -->|output| 5;\n  6[\"seqret\"];\n  1 -->|output| 6;\n  7[\"snippy\"];\n  4 -->|output| 7;\n  2 -->|output| 7;\n  3 -->|output| 7;\n  5 -->|output_paired_coll| 7;\n  1 -->|output| 7;\n  8[\"Kraken2\"];\n  5 -->|output_paired_coll| 8;\n  c7abf2bf-ed4c-433e-a695-9eca61282bb5[\"Output\\nreport_output\"];\n  8 --> c7abf2bf-ed4c-433e-a695-9eca61282bb5;\n  style c7abf2bf-ed4c-433e-a695-9eca61282bb5 stroke:#2c3143,stroke-width:4px;\n  083a0e51-7780-4c91-a071-dc0e4641d060[\"Output\\noutput\"];\n  8 --> 083a0e51-7780-4c91-a071-dc0e4641d060;\n  style 083a0e51-7780-4c91-a071-dc0e4641d060 stroke:#2c3143,stroke-width:4px;\n  9[\"QualiMap BamQC\"];\n  7 -->|snpsbam| 9;\n  10[\"mosdepth\"];\n  2 -->|output| 10;\n  7 -->|snpsbam| 10;\n  11[\"TB Variant Filter\"];\n  7 -->|snpvcf| 11;\n  12[\"TB-Profiler Profile\"];\n  7 -->|snpsbam| 12;\n  335635b4-a4de-4980-ad02-68f0035daeaa[\"Output\\noutput_txt\"];\n  12 --> 335635b4-a4de-4980-ad02-68f0035daeaa;\n  style 335635b4-a4de-4980-ad02-68f0035daeaa stroke:#2c3143,stroke-width:4px;\n  13[\"TB Variant Filter\"];\n  7 -->|snpvcf| 13;\n  14[\"Flatten collection\"];\n  9 -->|raw_data| 14;\n  15[\"Text reformatting\"];\n  10 -->|output_quantized_bed| 15;\n  16[\"Text transformation\"];\n  11 -->|output1| 16;\n  007df8c2-bd13-495f-8904-abf31d4594d0[\"Output\\nFinal annotated VCF\"];\n  16 --> 007df8c2-bd13-495f-8904-abf31d4594d0;\n  style 007df8c2-bd13-495f-8904-abf31d4594d0 stroke:#2c3143,stroke-width:4px;\n  17[\"MultiQC\"];\n  5 -->|report_json| 17;\n  14 -->|output| 17;\n  59528235-7525-4ef9-8810-36f1ed0f01f6[\"Output\\nhtml_report\"];\n  17 --> 59528235-7525-4ef9-8810-36f1ed0f01f6;\n  style 59528235-7525-4ef9-8810-36f1ed0f01f6 stroke:#2c3143,stroke-width:4px;\n  18[\"bcftools consensus\"];\n  13 -->|output1| 18;\n  6 -->|out_file1| 18;\n  15 -->|outfile| 18;\n  c71b135d-35f9-44d0-a20e-f25528e518af[\"Output\\nconsensus_genome\"];\n  18 --> c71b135d-35f9-44d0-a20e-f25528e518af;\n  style c71b135d-35f9-44d0-a20e-f25528e518af stroke:#2c3143,stroke-width:4px;\n  19[\"TB Variant Report\"];\n  16 -->|output| 19;\n  12 -->|results_json| 19;\n  959528d2-f8f2-4440-99cf-44fddd6c5069[\"Output\\ndrug_resistance_report_html\"];\n  19 --> 959528d2-f8f2-4440-99cf-44fddd6c5069;\n  style 959528d2-f8f2-4440-99cf-44fddd6c5069 stroke:#2c3143,stroke-width:4px;\n  4d9636eb-075b-4fd2-a1e4-1a7c37a17fc0[\"Output\\nvariants_report_html\"];\n  19 --> 4d9636eb-075b-4fd2-a1e4-1a7c37a17fc0;\n  style 4d9636eb-075b-4fd2-a1e4-1a7c37a17fc0 stroke:#2c3143,stroke-width:4px;","graph_dot":"digraph main {\n  node [fontname=\"Atkinson Hyperlegible\", shape=box, color=white,style=filled,color=peachpuff,margin=\"0.2,0.2\"];\n  edge [fontname=\"Atkinson Hyperlegible\"];\n  0[color=lightblue,label=\"ℹ️ Input Collection\\nReads\"]\n  1[color=lightblue,label=\"ℹ️ Input Dataset\\nReference Genome\"]\n  2[color=lightgreen,label=\"ℹ️ Input Parameter\\nMinimum depth of coverage\"]\n  3[color=lightgreen,label=\"ℹ️ Input Parameter\\nMinimum variant allele frequency\"]\n  4[color=lightgreen,label=\"ℹ️ Input Parameter\\nAdditional BWA-MEM options\"]\n  5[label=\"fastp\"]\n  0 -> 5 [label=\"output\"]\n  6[label=\"seqret\"]\n  1 -> 6 [label=\"output\"]\n  7[label=\"snippy\"]\n  4 -> 7 [label=\"output\"]\n  2 -> 7 [label=\"output\"]\n  3 -> 7 [label=\"output\"]\n  5 -> 7 [label=\"output_paired_coll\"]\n  1 -> 7 [label=\"output\"]\n  8[label=\"Kraken2\"]\n  5 -> 8 [label=\"output_paired_coll\"]\n  kc7abf2bfed4c433ea6959eca61282bb5[color=lightseagreen,label=\"Output\\nreport_output\"]\n  8 -> kc7abf2bfed4c433ea6959eca61282bb5\n  k083a0e5177804c91a071dc0e4641d060[color=lightseagreen,label=\"Output\\noutput\"]\n  8 -> k083a0e5177804c91a071dc0e4641d060\n  9[label=\"QualiMap BamQC\"]\n  7 -> 9 [label=\"snpsbam\"]\n  10[label=\"mosdepth\"]\n  2 -> 10 [label=\"output\"]\n  7 -> 10 [label=\"snpsbam\"]\n  11[label=\"TB Variant Filter\"]\n  7 -> 11 [label=\"snpvcf\"]\n  12[label=\"TB-Profiler Profile\"]\n  7 -> 12 [label=\"snpsbam\"]\n  k335635b4a4de4980ad0268f0035daeaa[color=lightseagreen,label=\"Output\\noutput_txt\"]\n  12 -> k335635b4a4de4980ad0268f0035daeaa\n  13[label=\"TB Variant Filter\"]\n  7 -> 13 [label=\"snpvcf\"]\n  14[label=\"Flatten collection\"]\n  9 -> 14 [label=\"raw_data\"]\n  15[label=\"Text reformatting\"]\n  10 -> 15 [label=\"output_quantized_bed\"]\n  16[label=\"Text transformation\"]\n  11 -> 16 [label=\"output1\"]\n  k007df8c2bd13495f8904abf31d4594d0[color=lightseagreen,label=\"Output\\nFinal annotated VCF\"]\n  16 -> k007df8c2bd13495f8904abf31d4594d0\n  17[label=\"MultiQC\"]\n  5 -> 17 [label=\"report_json\"]\n  14 -> 17 [label=\"output\"]\n  k5952823575254ef9881036f1ed0f01f6[color=lightseagreen,label=\"Output\\nhtml_report\"]\n  17 -> k5952823575254ef9881036f1ed0f01f6\n  18[label=\"bcftools consensus\"]\n  13 -> 18 [label=\"output1\"]\n  6 -> 18 [label=\"out_file1\"]\n  15 -> 18 [label=\"outfile\"]\n  kc71b135d35f944d0a20ef25528e518af[color=lightseagreen,label=\"Output\\nconsensus_genome\"]\n  18 -> kc71b135d35f944d0a20ef25528e518af\n  19[label=\"TB Variant Report\"]\n  16 -> 19 [label=\"output\"]\n  12 -> 19 [label=\"results_json\"]\n  k959528d2f8f2444099cf44fddd6c5069[color=lightseagreen,label=\"Output\\ndrug_resistance_report_html\"]\n  19 -> k959528d2f8f2444099cf44fddd6c5069\n  k4d9636eb075b4fd2a1e41a7c37a17fc0[color=lightseagreen,label=\"Output\\nvariants_report_html\"]\n  19 -> k4d9636eb075b4fd2a1e41a7c37a17fc0\n}","workflow_tools":["__FLATTEN__","toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/9.3+galaxy1","toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sed_tool/9.3+galaxy1","toolshed.g2.bx.psu.edu/repos/devteam/emboss_5/EMBOSS: seqret84/5.0.0","toolshed.g2.bx.psu.edu/repos/iuc/bcftools_consensus/bcftools_consensus/1.15.1+galaxy3","toolshed.g2.bx.psu.edu/repos/iuc/fastp/fastp/0.23.4+galaxy0","toolshed.g2.bx.psu.edu/repos/iuc/kraken2/kraken2/2.1.1+galaxy1","toolshed.g2.bx.psu.edu/repos/iuc/mosdepth/mosdepth/0.3.8+galaxy0","toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.11+galaxy1","toolshed.g2.bx.psu.edu/repos/iuc/qualimap_bamqc/qualimap_bamqc/2.2.2c+galaxy1","toolshed.g2.bx.psu.edu/repos/iuc/snippy/snippy/4.6.0+galaxy0","toolshed.g2.bx.psu.edu/repos/iuc/tb_variant_filter/tb_variant_filter/0.4.0+galaxy0","toolshed.g2.bx.psu.edu/repos/iuc/tbprofiler/tb_profiler_profile/6.2.1+galaxy0","toolshed.g2.bx.psu.edu/repos/iuc/tbvcfreport/tbvcfreport/1.0.0+galaxy0"],"inputs":[{"annotation":"List of paired Illumina reads (set format to fastqsanger or fastqsanger.gz as appropriate)","content_id":null,"errors":null,"id":0,"input_connections":{},"inputs":[{"description":"List of paired Illumina reads (set format to fastqsanger or fastqsanger.gz as appropriate)","name":"Reads"}],"label":"Reads","name":"Input dataset collection","outputs":[],"position":{"left":0,"top":197.65334499942068},"tool_id":null,"tool_state":"{\"optional\": false, \"tag\": null, \"collection_type\": \"list:paired\"}","tool_version":null,"type":"data_collection_input","uuid":"2bfdfb62-da85-4d2d-8609-8f5e6975b4b3","when":null,"workflow_outputs":[]},{"annotation":"M. tuberculosis reference genome (must be in H37Rv coordinates. The M. tuberculosis inferred ancestral genome is recommended)","content_id":null,"errors":null,"id":1,"input_connections":{},"inputs":[{"description":"M. tuberculosis reference genome (must be in H37Rv coordinates. The M. tuberculosis inferred ancestral genome is recommended)","name":"Reference Genome"}],"label":"Reference Genome","name":"Input dataset","outputs":[],"position":{"left":1.2375059369900399,"top":468.60335731890825},"tool_id":null,"tool_state":"{\"optional\": false, \"format\": [\"genbank\"], \"tag\": null}","tool_version":null,"type":"data_input","uuid":"023233a0-8cb1-4558-8861-cd246ab58bac","when":null,"workflow_outputs":[]},{"annotation":"Minimum depth of coverage for a position on the genome","content_id":null,"errors":null,"id":2,"input_connections":{},"inputs":[{"description":"Minimum depth of coverage for a position on the genome","name":"Minimum depth of coverage"}],"label":"Minimum depth of coverage","name":"Input parameter","outputs":[],"position":{"left":1.8793911063654463,"top":625.941216238093},"tool_id":null,"tool_state":"{\"default\": 10, \"parameter_type\": \"integer\", \"optional\": true}","tool_version":null,"type":"parameter_input","uuid":"e31bf396-08b6-43ce-872a-545a5e4580c6","when":null,"workflow_outputs":[]},{"annotation":"Minimum proportion of reads that must support a variant for it to be called","content_id":null,"errors":null,"id":3,"input_connections":{},"inputs":[{"description":"Minimum proportion of reads that must support a variant for it to be called","name":"Minimum variant allele frequency"}],"label":"Minimum variant allele frequency","name":"Input parameter","outputs":[],"position":{"left":1.358958473709409,"top":769.7667492120408},"tool_id":null,"tool_state":"{\"default\": 0.9, \"parameter_type\": \"float\", \"optional\": true}","tool_version":null,"type":"parameter_input","uuid":"d1814962-a30d-463a-a081-857a5141385b","when":null,"workflow_outputs":[]},{"annotation":"Increasing the minimum seed length (-k) parameter can help eliminate matches from contaminants. If used this should be set to 2/3rds of the read length, i.e. the string \"-k 100\" should be used for 150 base pair reads","content_id":null,"errors":null,"id":4,"input_connections":{},"inputs":[{"description":"Increasing the minimum seed length (-k) parameter can help eliminate matches from contaminants. If used this should be set to 2/3rds of the read length, i.e. the string \"-k 100\" should be used for 150 base pair reads","name":"Additional BWA-MEM options"}],"label":"Additional BWA-MEM options","name":"Input parameter","outputs":[],"position":{"left":7.8094297093662135,"top":931.4341211532},"tool_id":null,"tool_state":"{\"parameter_type\": \"text\", \"optional\": true}","tool_version":null,"type":"parameter_input","uuid":"40d47253-c7c5-471b-871c-9a19fbe60bfe","when":null,"workflow_outputs":[]}],"outputs":[{"annotation":"","content_id":"toolshed.g2.bx.psu.edu/repos/iuc/kraken2/kraken2/2.1.1+galaxy1","errors":null,"id":8,"input_connections":{"single_paired|input_pair":{"id":5,"output_name":"output_paired_coll"}},"inputs":[{"description":"runtime parameter for tool Kraken2","name":"single_paired"}],"label":null,"name":"Kraken2","outputs":[{"name":"report_output","type":"tabular"},{"name":"output","type":"tabular"}],"position":{"left":1605.1346167188794,"top":0},"post_job_actions":{"HideDatasetActionoutput":{"action_arguments":{},"action_type":"HideDatasetAction","output_name":"output"},"TagDatasetActionreport_output":{"action_arguments":{"tags":"kraken_report"},"action_type":"TagDatasetAction","output_name":"report_output"}},"tool_id":"toolshed.g2.bx.psu.edu/repos/iuc/kraken2/kraken2/2.1.1+galaxy1","tool_shed_repository":{"changeset_revision":"20e2f64aa1fe","name":"kraken2","owner":"iuc","tool_shed":"toolshed.g2.bx.psu.edu"},"tool_state":"{\"confidence\": \"0.0\", \"kraken2_database\": \"pluspf2021-05\", \"min_base_quality\": \"0\", \"minimum_hit_groups\": \"2\", \"quick\": false, \"report\": {\"create_report\": true, \"use_mpa_style\": false, \"report_zero_counts\": false, \"report_minimizer_data\": false}, \"single_paired\": {\"single_paired_selector\": \"collection\", \"__current_case__\": 0, \"input_pair\": {\"__class__\": \"ConnectedValue\"}}, \"split_reads\": false, \"use_names\": true, \"__page__\": null, \"__rerun_remap_job_id__\": null}","tool_version":"2.1.1+galaxy1","type":"tool","uuid":"60b17d56-0ef9-4829-829e-923f66de5e2f","when":null,"workflow_outputs":[{"label":"report_output","output_name":"report_output","uuid":"c7abf2bf-ed4c-433e-a695-9eca61282bb5"},{"label":"output","output_name":"output","uuid":"083a0e51-7780-4c91-a071-dc0e4641d060"}]},{"annotation":"","content_id":"toolshed.g2.bx.psu.edu/repos/iuc/tbprofiler/tb_profiler_profile/6.2.1+galaxy0","errors":null,"id":12,"input_connections":{"fastq_or_bam|bam_input":{"id":7,"output_name":"snpsbam"}},"inputs":[{"description":"runtime parameter for tool TB-Profiler Profile","name":"fastq_or_bam"}],"label":null,"name":"TB-Profiler Profile","outputs":[{"name":"results_json","type":"json"},{"name":"output_vcf","type":"vcf"},{"name":"output_txt","type":"txt"}],"position":{"left":1132.7778271896836,"top":615.3961147101202},"post_job_actions":{"HideDatasetActionoutput_vcf":{"action_arguments":{},"action_type":"HideDatasetAction","output_name":"output_vcf"},"HideDatasetActionresults_json":{"action_arguments":{},"action_type":"HideDatasetAction","output_name":"results_json"},"TagDatasetActionoutput_txt":{"action_arguments":{"tags":"drug_resistance_report"},"action_type":"TagDatasetAction","output_name":"output_txt"}},"tool_id":"toolshed.g2.bx.psu.edu/repos/iuc/tbprofiler/tb_profiler_profile/6.2.1+galaxy0","tool_shed_repository":{"changeset_revision":"4839e590cb26","name":"tbprofiler","owner":"iuc","tool_shed":"toolshed.g2.bx.psu.edu"},"tool_state":"{\"advanced\": {\"options\": \"no\", \"__current_case__\": 0}, \"fastq_or_bam\": {\"input_select\": \"bam\", \"__current_case__\": 3, \"bam_input\": {\"__class__\": \"ConnectedValue\"}}, \"output_format\": \"txt\", \"platform\": \"illumina\", \"spoligotype\": false, \"__page__\": null, \"__rerun_remap_job_id__\": null}","tool_version":"6.2.1+galaxy0","type":"tool","uuid":"22d89589-70a3-4e6e-8b95-68604a287052","when":null,"workflow_outputs":[{"label":"output_txt","output_name":"output_txt","uuid":"335635b4-a4de-4980-ad02-68f0035daeaa"}]},{"annotation":"","content_id":"toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sed_tool/9.3+galaxy1","errors":null,"id":16,"input_connections":{"infile":{"id":11,"output_name":"output1"}},"inputs":[],"label":null,"name":"Text transformation","outputs":[{"name":"output","type":"input"}],"position":{"left":1379.287563641826,"top":248.44083584414724},"post_job_actions":{"TagDatasetActionoutput":{"action_arguments":{"tags":"annotated_vcf"},"action_type":"TagDatasetAction","output_name":"output"}},"tool_id":"toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sed_tool/9.3+galaxy1","tool_shed_repository":{"changeset_revision":"fbf99087e067","name":"text_processing","owner":"bgruening","tool_shed":"toolshed.g2.bx.psu.edu"},"tool_state":"{\"adv_opts\": {\"adv_opts_selector\": \"basic\", \"__current_case__\": 0}, \"code\": \"s/GENE_//g\", \"infile\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}","tool_version":"9.3+galaxy1","type":"tool","uuid":"c45f6679-0d38-4663-a783-775b0f522bcc","when":null,"workflow_outputs":[{"label":"Final annotated VCF","output_name":"output","uuid":"007df8c2-bd13-495f-8904-abf31d4594d0"}]},{"annotation":"","content_id":"toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.11+galaxy1","errors":null,"id":17,"input_connections":{"results_0|software_cond|input":{"id":5,"output_name":"report_json"},"results_1|software_cond|input":{"id":14,"output_name":"output"}},"inputs":[],"label":null,"name":"MultiQC","outputs":[{"name":"stats","type":"input"},{"name":"html_report","type":"html"}],"position":{"left":1604.2880860884582,"top":202.3882167631859},"post_job_actions":{"HideDatasetActionstats":{"action_arguments":{},"action_type":"HideDatasetAction","output_name":"stats"},"TagDatasetActionhtml_report":{"action_arguments":{"tags":"qc_report"},"action_type":"TagDatasetAction","output_name":"html_report"}},"tool_id":"toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.11+galaxy1","tool_shed_repository":{"changeset_revision":"abfd8a6544d7","name":"multiqc","owner":"iuc","tool_shed":"toolshed.g2.bx.psu.edu"},"tool_state":"{\"comment\": \"\", \"export\": false, \"flat\": false, \"results\": [{\"__index__\": 0, \"software_cond\": {\"software\": \"fastp\", \"__current_case__\": 7, \"input\": {\"__class__\": \"ConnectedValue\"}}}, {\"__index__\": 1, \"software_cond\": {\"software\": \"qualimap\", \"__current_case__\": 20, \"input\": {\"__class__\": \"ConnectedValue\"}}}], \"saveLog\": false, \"title\": \"\", \"__page__\": null, \"__rerun_remap_job_id__\": null}","tool_version":"1.11+galaxy1","type":"tool","uuid":"6367e2a7-c3b0-4dc4-bbc2-e861e66eaeae","when":null,"workflow_outputs":[{"label":"html_report","output_name":"html_report","uuid":"59528235-7525-4ef9-8810-36f1ed0f01f6"}]},{"annotation":"Compute consensus genome with single nucleotide variants inserted, suitable for use in building a phylogeny","content_id":"toolshed.g2.bx.psu.edu/repos/iuc/bcftools_consensus/bcftools_consensus/1.15.1+galaxy3","errors":null,"id":18,"input_connections":{"input_file":{"id":13,"output_name":"output1"},"reference_source|fasta_ref":{"id":6,"output_name":"out_file1"},"sec_default|mask":{"id":15,"output_name":"outfile"}},"inputs":[{"description":"runtime parameter for tool bcftools consensus","name":"reference_source"},{"description":"runtime parameter for tool bcftools consensus","name":"sec_default"}],"label":null,"name":"bcftools consensus","outputs":[{"name":"output_file","type":"fasta"}],"position":{"left":1601.1886936133394,"top":1003.2778990479657},"post_job_actions":{"TagDatasetActionoutput_file":{"action_arguments":{"tags":"consensus_genome"},"action_type":"TagDatasetAction","output_name":"output_file"}},"tool_id":"toolshed.g2.bx.psu.edu/repos/iuc/bcftools_consensus/bcftools_consensus/1.15.1+galaxy3","tool_shed_repository":{"changeset_revision":"147de996e34f","name":"bcftools_consensus","owner":"iuc","tool_shed":"toolshed.g2.bx.psu.edu"},"tool_state":"{\"absent\": \"\", \"chain\": false, \"input_file\": {\"__class__\": \"ConnectedValue\"}, \"reference_source\": {\"reference_source_selector\": \"history\", \"__current_case__\": 1, \"fasta_ref\": {\"__class__\": \"ConnectedValue\"}}, \"rename\": false, \"sec_default\": {\"mask\": {\"__class__\": \"ConnectedValue\"}, \"iupac_codes\": false, \"sample\": null, \"select_haplotype\": null, \"mark_del\": \"\", \"mark_ins\": null, \"mark_snv\": null, \"conditional_mask\": {\"selector\": \"disabled\", \"__current_case__\": 0}}, \"sec_restrict\": {\"include\": null, \"exclude\": null}, \"__page__\": null, \"__rerun_remap_job_id__\": null}","tool_version":"1.15.1+galaxy3","type":"tool","uuid":"2b226e0c-8e59-472d-8bcd-6d8d84dfddab","when":null,"workflow_outputs":[{"label":"consensus_genome","output_name":"output_file","uuid":"c71b135d-35f9-44d0-a20e-f25528e518af"}]},{"annotation":"","content_id":"toolshed.g2.bx.psu.edu/repos/iuc/tbvcfreport/tbvcfreport/1.0.0+galaxy0","errors":null,"id":19,"input_connections":{"input_vcf":{"id":16,"output_name":"output"},"tbprofiler_json":{"id":12,"output_name":"results_json"}},"inputs":[],"label":null,"name":"TB Variant Report","outputs":[{"name":"variants_report_html","type":"html"},{"name":"variants_report_txt","type":"txt"},{"name":"drug_resistance_report_html","type":"html"},{"name":"drug_resistance_report_txt","type":"txt"}],"position":{"left":1591.762535768669,"top":427.7783435581315},"post_job_actions":{"HideDatasetActiondrug_resistance_report_txt":{"action_arguments":{},"action_type":"HideDatasetAction","output_name":"drug_resistance_report_txt"},"HideDatasetActionvariants_report_txt":{"action_arguments":{},"action_type":"HideDatasetAction","output_name":"variants_report_txt"},"TagDatasetActiondrug_resistance_report_html":{"action_arguments":{"tags":"variant_report"},"action_type":"TagDatasetAction","output_name":"drug_resistance_report_html"},"TagDatasetActionvariants_report_html":{"action_arguments":{"tags":"variant_report"},"action_type":"TagDatasetAction","output_name":"variants_report_html"}},"tool_id":"toolshed.g2.bx.psu.edu/repos/iuc/tbvcfreport/tbvcfreport/1.0.0+galaxy0","tool_shed_repository":{"changeset_revision":"42818629ec4c","name":"tbvcfreport","owner":"iuc","tool_shed":"toolshed.g2.bx.psu.edu"},"tool_state":"{\"adv\": {\"database_uri\": \"neodb.sanbi.ac.za\"}, \"filter_udi\": true, \"input_vcf\": {\"__class__\": \"ConnectedValue\"}, \"tbprofiler_json\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}","tool_version":"1.0.0+galaxy0","type":"tool","uuid":"183d84e7-91ea-4e8f-950b-f65629b60b1b","when":null,"workflow_outputs":[{"label":"drug_resistance_report_html","output_name":"drug_resistance_report_html","uuid":"959528d2-f8f2-4440-99cf-44fddd6c5069"},{"label":"variants_report_html","output_name":"variants_report_html","uuid":"4d9636eb-075b-4fd2-a1e4-1a7c37a17fc0"}]}]}],"api":"https://training.galaxyproject.org/training-material/api/topics/variant-analysis/tutorials/tb-variant-analysis/tutorial.json","tools":["__FLATTEN__","toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/9.3+galaxy1","toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sed_tool/1.1.1","toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sed_tool/9.3+galaxy1","toolshed.g2.bx.psu.edu/repos/devteam/emboss_5/EMBOSS: seqret84/5.0.0","toolshed.g2.bx.psu.edu/repos/devteam/emboss_5/EMBOSS:%20seqret84/5.0.0","toolshed.g2.bx.psu.edu/repos/devteam/fastqc/fastqc/0.73+galaxy0","toolshed.g2.bx.psu.edu/repos/devteam/fastqc/fastqc/0.74+galaxy0","toolshed.g2.bx.psu.edu/repos/devteam/samtools_stats/samtools_stats/2.0.5","toolshed.g2.bx.psu.edu/repos/iuc/bcftools_consensus/bcftools_consensus/1.15.1+galaxy3","toolshed.g2.bx.psu.edu/repos/iuc/fastp/fastp/0.23.4+galaxy0","toolshed.g2.bx.psu.edu/repos/iuc/jbrowse/jbrowse/1.16.11+galaxy1","toolshed.g2.bx.psu.edu/repos/iuc/jvarkit_wgscoverageplotter/jvarkit_wgscoverageplotter/20201223+galaxy0","toolshed.g2.bx.psu.edu/repos/iuc/kraken2/kraken2/2.1.1+galaxy1","toolshed.g2.bx.psu.edu/repos/iuc/mosdepth/mosdepth/0.3.8+galaxy0","toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.11+galaxy1","toolshed.g2.bx.psu.edu/repos/iuc/qualimap_bamqc/qualimap_bamqc/2.2.2c+galaxy1","toolshed.g2.bx.psu.edu/repos/iuc/snippy/snippy/4.6.0+galaxy0","toolshed.g2.bx.psu.edu/repos/iuc/tb_variant_filter/tb_variant_filter/0.4.0+galaxy0","toolshed.g2.bx.psu.edu/repos/iuc/tbprofiler/tb_profiler_profile/6.2.1+galaxy0","toolshed.g2.bx.psu.edu/repos/iuc/tbvcfreport/tbvcfreport/1.0.0+galaxy0","toolshed.g2.bx.psu.edu/repos/iuc/tbvcfreport/tbvcfreport/1.0.1+galaxy0","upload1"],"supported_servers":{"exact":[],"inexact":[]},"topic_name_human":"Variant Analysis","admin_install":{"install_tool_dependencies":true,"install_repository_dependencies":true,"install_resolver_dependencies":true,"tools":[{"name":"text_processing","owner":"bgruening","revisions":"86755160afbf","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"text_processing","owner":"bgruening","revisions":"d698c222f354","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"text_processing","owner":"bgruening","revisions":"86755160afbf","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"emboss_5","owner":"devteam","revisions":"63dd26468588","tool_panel_section_label":"EMBOSS","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"fastqc","owner":"devteam","revisions":"3d0c7bdf12f5","tool_panel_section_label":"FASTA/FASTQ","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"fastqc","owner":"devteam","revisions":"5ec9f6bceaee","tool_panel_section_label":"FASTA/FASTQ","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"samtools_stats","owner":"devteam","revisions":"541082d03bef","tool_panel_section_label":"SAM/BAM","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"bcftools_consensus","owner":"iuc","revisions":"da0bf365652d","tool_panel_section_label":"Variant Calling","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"fastp","owner":"iuc","revisions":"c59d48774d03","tool_panel_section_label":"FASTA/FASTQ","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"jbrowse","owner":"iuc","revisions":"a6e57ff585c0","tool_panel_section_label":"Graph/Display Data","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"jvarkit_wgscoverageplotter","owner":"iuc","revisions":"ac048a34cac3","tool_panel_section_label":"Graph/Display Data","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"kraken2","owner":"iuc","revisions":"20e2f64aa1fe","tool_panel_section_label":"Metagenomic Analysis","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"mosdepth","owner":"iuc","revisions":"5854d0da92b4","tool_panel_section_label":"SAM/BAM","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"multiqc","owner":"iuc","revisions":"abfd8a6544d7","tool_panel_section_label":"Quality Control","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"qualimap_bamqc","owner":"iuc","revisions":"4a89c6f84425","tool_panel_section_label":"SAM/BAM","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"snippy","owner":"iuc","revisions":"d220115f882b","tool_panel_section_label":"Variant Calling","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"tb_variant_filter","owner":"iuc","revisions":"32f14a2723ec","tool_panel_section_label":"Annotation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"tbprofiler","owner":"iuc","revisions":"4839e590cb26","tool_panel_section_label":"Annotation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"tbvcfreport","owner":"iuc","revisions":"42818629ec4c","tool_panel_section_label":"Annotation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"tbvcfreport","owner":"iuc","revisions":"9793bc5d741b","tool_panel_section_label":"Annotation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"}]},"admin_install_yaml":"---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools:\n- name: text_processing\n  owner: bgruening\n  revisions: 86755160afbf\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: text_processing\n  owner: bgruening\n  revisions: d698c222f354\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: text_processing\n  owner: bgruening\n  revisions: 86755160afbf\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: emboss_5\n  owner: devteam\n  revisions: 63dd26468588\n  tool_panel_section_label: EMBOSS\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: fastqc\n  owner: devteam\n  revisions: 3d0c7bdf12f5\n  tool_panel_section_label: FASTA/FASTQ\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: fastqc\n  owner: devteam\n  revisions: 5ec9f6bceaee\n  tool_panel_section_label: FASTA/FASTQ\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: samtools_stats\n  owner: devteam\n  revisions: 541082d03bef\n  tool_panel_section_label: SAM/BAM\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: bcftools_consensus\n  owner: iuc\n  revisions: da0bf365652d\n  tool_panel_section_label: Variant Calling\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: fastp\n  owner: iuc\n  revisions: c59d48774d03\n  tool_panel_section_label: FASTA/FASTQ\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: jbrowse\n  owner: iuc\n  revisions: a6e57ff585c0\n  tool_panel_section_label: Graph/Display Data\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: jvarkit_wgscoverageplotter\n  owner: iuc\n  revisions: ac048a34cac3\n  tool_panel_section_label: Graph/Display Data\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: kraken2\n  owner: iuc\n  revisions: 20e2f64aa1fe\n  tool_panel_section_label: Metagenomic Analysis\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: mosdepth\n  owner: iuc\n  revisions: 5854d0da92b4\n  tool_panel_section_label: SAM/BAM\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: multiqc\n  owner: iuc\n  revisions: abfd8a6544d7\n  tool_panel_section_label: Quality Control\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: qualimap_bamqc\n  owner: iuc\n  revisions: 4a89c6f84425\n  tool_panel_section_label: SAM/BAM\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: snippy\n  owner: iuc\n  revisions: d220115f882b\n  tool_panel_section_label: Variant Calling\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: tb_variant_filter\n  owner: iuc\n  revisions: 32f14a2723ec\n  tool_panel_section_label: Annotation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: tbprofiler\n  owner: iuc\n  revisions: 4839e590cb26\n  tool_panel_section_label: Annotation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: tbvcfreport\n  owner: iuc\n  revisions: 42818629ec4c\n  tool_panel_section_label: Annotation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: tbvcfreport\n  owner: iuc\n  revisions: 9793bc5d741b\n  tool_panel_section_label: Annotation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n","tours":false,"video":false,"slides_recordings":false,"translations":{"tutorial":[],"slides":[],"video":false},"license":"CC-BY-4.0","type":"tutorial"}