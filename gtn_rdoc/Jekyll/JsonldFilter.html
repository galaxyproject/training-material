<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module Jekyll::JsonldFilter - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/navigation.js" defer></script>
<script src="../js/search.js" defer></script>
<script src="../js/search_index.js" defer></script>
<script src="../js/searcher.js" defer></script>
<script src="../js/darkfish.js" defer></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    
    
    
<!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    <li ><a href="#method-i-generate_dublin_core">#generate_dublin_core</a>
    <li ><a href="#method-i-generate_news_jsonld">#generate_news_jsonld</a>
    <li ><a href="#method-i-generate_org_jsonld">#generate_org_jsonld</a>
    <li ><a href="#method-i-generate_person_jsonld">#generate_person_jsonld</a>
    <li ><a href="#method-i-get_authors">#get_authors</a>
    <li ><a href="#method-i-to_jsonld">#to_jsonld</a>
    <li ><a href="#method-i-to_person_jsonld">#to_person_jsonld</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-Jekyll::JsonldFilter">
  <h1 id="module-Jekyll::JsonldFilter" class="module">
    module Jekyll::JsonldFilter
  </h1>

  <section class="description">
    
<p>Generate JSON-LD metadata for the <a href="JsonldFilter.html#GTN"><code>GTN</code></a>.</p>

  </section>

  <section id="5Buntitled-5D" class="documentation-section">


    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
        <dt id="A11Y">A11Y
        <dd>
        <dt id="GTN">GTN
        <dd>
      </dl>
    </section>



     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-generate_dublin_core" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">generate_dublin_core</span><span
            class="method-args">(material, site)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Generate the Dublin Core metadata for a material. Parmaeters:</p>
<dl class="rdoc-list note-list"><dt><code>material</code>
<dd>
<p>The material to generate the metadata for.</p>
</dd><dt><code>site</code>
<dd>
<p>The site object.</p>
</dd></dl>

<p>Returns: A string containing the metadata.</p>

<p>Example:</p>

<pre>{{ material | generate_dublin_core: site }}
=&gt; &lt;meta name=&quot;DC.identifier&quot; content=&quot;...&quot; /&gt;</pre>

          <div class="method-source-code" id="generate_dublin_core-source">
            <pre><span class="ruby-comment"># File _plugins/jekyll-jsonld.rb, line 39</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">generate_dublin_core</span>(<span class="ruby-identifier">material</span>, <span class="ruby-identifier">site</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;data&#39;</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;data&#39;</span>].<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;type&#39;</span>, <span class="ruby-string">&#39;none&#39;</span>) <span class="ruby-operator">!=</span> <span class="ruby-string">&#39;tutorial_hands_on&#39;</span>

  <span class="ruby-identifier">attributes</span> = [
    [<span class="ruby-string">&#39;DC.identifier&#39;</span>, <span class="ruby-identifier">site</span>[<span class="ruby-string">&#39;github_repository&#39;</span>]],
    [<span class="ruby-string">&#39;DC.type&#39;</span>, <span class="ruby-string">&#39;text&#39;</span>],
    [<span class="ruby-string">&#39;DC.title&#39;</span>, <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;title&#39;</span>]],
    [<span class="ruby-string">&#39;DC.publisher&#39;</span>, <span class="ruby-string">&#39;Galaxy Training Network&#39;</span>],
    [<span class="ruby-string">&#39;DC.date&#39;</span>, <span class="ruby-constant">Gtn</span><span class="ruby-operator">::</span><span class="ruby-constant">ModificationTimes</span>.<span class="ruby-identifier">obtain_time</span>(<span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;path&#39;</span>])]
  ]

  <span class="ruby-identifier">attributes</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">get_authors</span>(<span class="ruby-identifier">material</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">user</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">site</span>[<span class="ruby-string">&#39;data&#39;</span>][<span class="ruby-string">&#39;contributors&#39;</span>].<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">user</span>)
      [<span class="ruby-string">&#39;DC.creator&#39;</span>, <span class="ruby-identifier">site</span>[<span class="ruby-string">&#39;data&#39;</span>][<span class="ruby-string">&#39;contributors&#39;</span>][<span class="ruby-identifier">user</span>].<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;name&#39;</span>, <span class="ruby-identifier">user</span>)]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;[GTN/Meta] #{user} not found in CONTRIBUTORS.yaml&quot;</span>
      [<span class="ruby-string">&#39;DC.creator&#39;</span>, <span class="ruby-identifier">user</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;&lt;meta name=\&quot;#{a}\&quot; content=\&quot;#{b}\&quot;&gt;&quot;</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-generate_news_jsonld" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">generate_news_jsonld</span><span
            class="method-args">(page, site)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Generate the JSON-LD metadata for a news article (blog) Parameters:</p>
<dl class="rdoc-list note-list"><dt><code>page</code>
<dd>
<p>The page object.</p>
</dd><dt><code>site</code>
<dd>
<p>The <code>Jekyll::Site</code> site object.</p>
</dd></dl>

<p>Returns:</p>
<dl class="rdoc-list note-list"><dt><code>Hash</code>
<dd>
<p>The JSON-LD metadata.</p>
</dd></dl>

          <div class="method-source-code" id="generate_news_jsonld-source">
            <pre><span class="ruby-comment"># File _plugins/jekyll-jsonld.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">generate_news_jsonld</span>(<span class="ruby-identifier">page</span>, <span class="ruby-identifier">site</span>)
  <span class="ruby-identifier">authors</span> = <span class="ruby-identifier">get_authors</span>(<span class="ruby-identifier">page</span>.<span class="ruby-identifier">to_h</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">generate_person_jsonld</span>(<span class="ruby-identifier">x</span>, <span class="ruby-identifier">site</span>[<span class="ruby-string">&#39;data&#39;</span>][<span class="ruby-string">&#39;contributors&#39;</span>][<span class="ruby-identifier">x</span>], <span class="ruby-identifier">site</span>) }

  <span class="ruby-identifier">data</span> = {
    <span class="ruby-value">&#39;@context&#39;:</span> <span class="ruby-string">&#39;https://schema.org&#39;</span>,
    <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;BlogPosting&#39;</span>,
    <span class="ruby-value">url:</span> <span class="ruby-node">&quot;#{site[&#39;url&#39;]}#{site[&#39;baseurl&#39;]}#{page[&#39;url&#39;]}&quot;</span>,
    <span class="ruby-value">name:</span> <span class="ruby-identifier">page</span>[<span class="ruby-string">&#39;title&#39;</span>],
    <span class="ruby-value">headline:</span> <span class="ruby-identifier">page</span>.<span class="ruby-identifier">excerpt</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">100</span>].<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\n/</span>, <span class="ruby-string">&#39; &#39;</span>), <span class="ruby-comment"># TODO: remove html tags.</span>
    <span class="ruby-value">keywords:</span> <span class="ruby-identifier">page</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;tags&#39;</span>, []),
    <span class="ruby-value">description:</span> <span class="ruby-identifier">page</span>.<span class="ruby-identifier">excerpt</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">100</span>].<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\n/</span>, <span class="ruby-string">&#39; &#39;</span>), <span class="ruby-comment"># TODO: remove html tags</span>
    <span class="ruby-value">articleBody:</span> <span class="ruby-identifier">page</span>.<span class="ruby-identifier">content</span>, <span class="ruby-comment"># TODO: remove html tags</span>
    <span class="ruby-value">datePublished:</span> <span class="ruby-identifier">page</span>.<span class="ruby-identifier">date</span>,
    <span class="ruby-value">dateModified:</span> <span class="ruby-constant">Gtn</span><span class="ruby-operator">::</span><span class="ruby-constant">ModificationTimes</span>.<span class="ruby-identifier">obtain_time</span>(<span class="ruby-identifier">page</span>.<span class="ruby-identifier">path</span>),
    <span class="ruby-value">author:</span> <span class="ruby-identifier">authors</span>,
    <span class="ruby-value">publisher:</span> <span class="ruby-constant">GTN</span>,
    <span class="ruby-value">mainEntityOfPage:</span> {
      <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;WebPage&#39;</span>,
      <span class="ruby-value">&#39;@id&#39;:</span> <span class="ruby-node">&quot;#{site[&#39;url&#39;]}#{page[&#39;url&#39;]}&quot;</span>
    },
    <span class="ruby-value">image:</span> {
      <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;ImageObject&#39;</span>,
      <span class="ruby-value">width:</span> <span class="ruby-value">60</span>,
      <span class="ruby-value">height:</span> <span class="ruby-value">60</span>,
      <span class="ruby-value">url:</span> <span class="ruby-node">&quot;#{site[&#39;baseurl&#39;]}/assets/images/GTN-60px.png&quot;</span>
    }
  }
  <span class="ruby-identifier">data</span>.<span class="ruby-identifier">update</span>(<span class="ruby-constant">A11Y</span>)

  <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">pretty_generate</span>(<span class="ruby-identifier">data</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-generate_org_jsonld" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">generate_org_jsonld</span><span
            class="method-args">(id, contributor, _site)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="generate_org_jsonld-source">
            <pre><span class="ruby-comment"># File _plugins/jekyll-jsonld.rb, line 139</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">generate_org_jsonld</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">contributor</span>, <span class="ruby-identifier">_site</span>)
  <span class="ruby-identifier">organization</span> = {
    <span class="ruby-value">&#39;@context&#39;:</span> <span class="ruby-string">&#39;https://schema.org&#39;</span>,
    <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;Organization&#39;</span>,
    <span class="ruby-value">&#39;http://purl.org/dc/terms/conformsTo&#39;:</span> {
      <span class="ruby-value">&#39;@id&#39;:</span> <span class="ruby-string">&#39;https://bioschemas.org/profiles/Organization/0.3-DRAFT&#39;</span>,
      <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;CreativeWork&#39;</span>
    },
    <span class="ruby-value">name:</span> <span class="ruby-identifier">contributor</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;name&#39;</span>, <span class="ruby-identifier">id</span>),
    <span class="ruby-value">description:</span> <span class="ruby-identifier">contributor</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;funding_statement&#39;</span>, <span class="ruby-string">&#39;An organization supporting the Galaxy Training Network&#39;</span>),
  }

  <span class="ruby-identifier">organization</span>[<span class="ruby-string">&#39;url&#39;</span>] = <span class="ruby-identifier">contributor</span>[<span class="ruby-string">&#39;url&#39;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">contributor</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;url&#39;</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">contributor</span>[<span class="ruby-string">&#39;url&#39;</span>]

  <span class="ruby-identifier">organization</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-generate_person_jsonld" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">generate_person_jsonld</span><span
            class="method-args">(id, contributor, site)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Generate the JSON-LD metadata for a person Parameters:</p>
<dl class="rdoc-list note-list"><dt><code>id</code>
<dd>
<p>The id of the person.</p>
</dd><dt><code>contributor</code>
<dd>
<p>The contributor object from CONTRIBUTORS.yaml.</p>
</dd><dt><code>site</code>
<dd>
<p>The site object.</p>
</dd></dl>

<p>Returns:</p>
<dl class="rdoc-list note-list"><dt><code>Hash</code>
<dd>
<p>The JSON-LD metadata.</p>
</dd></dl>

<p>Example:</p>

<pre>generate_person_jsonld(&quot;hexylena&quot;, site[&#39;data&#39;][&#39;contributors&#39;][&#39;hexylena&#39;], site)
=&gt; {
  &quot;@context&quot;: &quot;https://schema.org&quot;,
  &quot;@type&quot;: &quot;Person&quot;,
  &quot;http://purl.org/dc/terms/conformsTo&quot;: {
    # Bioschemas profile
    &quot;@id&quot;: &quot;https://bioschemas.org/profiles/Person/0.2-DRAFT-2019_07_19&quot;,
    &quot;@type&quot;: &quot;Person&quot;
  },
  &quot;url&quot;: &quot;https://training.galaxyproject.org/hall-of-fame/hexylena/&quot;,
  &quot;mainEntityOfPage&quot;: &quot;https://training.galaxyproject.org/hall-of-fame/hexylena/&quot;,
  &quot;name&quot;: &quot;hexylena&quot;,
  &quot;image&quot;: &quot;https://avatars.githubusercontent.com/hexylena&quot;,
  &quot;description&quot;: &quot;A contributor to the GTN project.&quot;,
  &quot;memberOf&quot;: [...],
  &quot;identifier&quot;: &quot;https://orcid.org/0000-0002-6601-2165&quot;,
  &quot;orcid&quot;: &quot;https://orcid.org/0000-0002-6601-2165&quot;
}</pre>

          <div class="method-source-code" id="generate_person_jsonld-source">
            <pre><span class="ruby-comment"># File _plugins/jekyll-jsonld.rb, line 109</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">generate_person_jsonld</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">contributor</span>, <span class="ruby-identifier">site</span>)
  <span class="ruby-identifier">person</span> = {
    <span class="ruby-value">&#39;@context&#39;:</span> <span class="ruby-string">&#39;https://schema.org&#39;</span>,
    <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;Person&#39;</span>,
    <span class="ruby-value">&#39;http://purl.org/dc/terms/conformsTo&#39;:</span> {
      <span class="ruby-value">&#39;@id&#39;:</span> <span class="ruby-string">&#39;https://bioschemas.org/profiles/Person/0.3-DRAFT&#39;</span>,
      <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;CreativeWork&#39;</span>
    },
    <span class="ruby-comment"># I guess these are identical?</span>
    <span class="ruby-value">url:</span> <span class="ruby-node">&quot;#{site[&#39;url&#39;]}#{site[&#39;baseurl&#39;]}/hall-of-fame/#{id}/&quot;</span>,
    <span class="ruby-value">mainEntityOfPage:</span> <span class="ruby-node">&quot;#{site[&#39;url&#39;]}#{site[&#39;baseurl&#39;]}/hall-of-fame/#{id}/&quot;</span>,
    <span class="ruby-value">name:</span> <span class="ruby-identifier">contributor</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">id</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">contributor</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;name&#39;</span>, <span class="ruby-identifier">id</span>),
    <span class="ruby-value">image:</span> <span class="ruby-node">&quot;https://avatars.githubusercontent.com/#{id}&quot;</span>,
    <span class="ruby-comment"># No clue what to put here it&#39;s a person.</span>
    <span class="ruby-value">description:</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">contributor</span>.<span class="ruby-identifier">nil?</span>
                   <span class="ruby-string">&#39;A contributor to the GTN project.&#39;</span>
                 <span class="ruby-keyword">else</span>
                   <span class="ruby-identifier">contributor</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;bio&#39;</span>,
                                     <span class="ruby-string">&#39;A contributor to the GTN project.&#39;</span>)
                 <span class="ruby-keyword">end</span>,
    <span class="ruby-value">memberOf:</span> [<span class="ruby-constant">GTN</span>],
  }
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">contributor</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">contributor</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;orcid&#39;</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">contributor</span>[<span class="ruby-string">&#39;orcid&#39;</span>]
    <span class="ruby-identifier">person</span>[<span class="ruby-string">&#39;identifier&#39;</span>] = <span class="ruby-node">&quot;https://orcid.org/#{contributor[&#39;orcid&#39;]}&quot;</span>
    <span class="ruby-identifier">person</span>[<span class="ruby-string">&#39;orcid&#39;</span>] = <span class="ruby-node">&quot;https://orcid.org/#{contributor[&#39;orcid&#39;]}&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">person</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-get_authors" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">get_authors</span><span
            class="method-args">(material)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Get the authors of a material. Time number 4 i&#39;ve seen this TODO(hexylena): make this a function in gtn.rb Parmeters:</p>
<dl class="rdoc-list note-list"><dt><code>material</code>
<dd>
<p>The material to get the authors for.</p>
</dd></dl>

<p>Returns: An array of authors.</p>

          <div class="method-source-code" id="get_authors-source">
            <pre><span class="ruby-comment"># File _plugins/jekyll-jsonld.rb, line 70</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_authors</span>(<span class="ruby-identifier">material</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;contributors&#39;</span>)
    <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;contributors&#39;</span>]
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;contributions&#39;</span>)
    <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;contributions&#39;</span>][<span class="ruby-string">&#39;authorship&#39;</span>]
  <span class="ruby-keyword">else</span>
    []
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-to_jsonld" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">to_jsonld</span><span
            class="method-args">(material, topic, site)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Convert a material to JSON-LD. Parameters:</p>
<dl class="rdoc-list note-list"><dt><code>material</code>
<dd>
<p>The material object.</p>
</dd><dt><code>topic</code>
<dd>
<p>The topic object.</p>
</dd><dt><code>site</code>
<dd>
<p>The <code>Jekyll::Site</code> site object.</p>
</dd></dl>

<p>Returns:</p>
<dl class="rdoc-list note-list"><dt><code>String</code>
<dd>
<p>The JSON-LD metadata.</p>
</dd></dl>

          <div class="method-source-code" id="to_jsonld-source">
            <pre><span class="ruby-comment"># File _plugins/jekyll-jsonld.rb, line 220</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">to_jsonld</span>(<span class="ruby-identifier">material</span>, <span class="ruby-identifier">topic</span>, <span class="ruby-identifier">site</span>)
  <span class="ruby-identifier">langCodeMap</span> = {
    <span class="ruby-value">en:</span> <span class="ruby-string">&#39;English&#39;</span>,
    <span class="ruby-value">es:</span> <span class="ruby-string">&#39;Espa√±ol&#39;</span>,
  }

  <span class="ruby-identifier">eduLevel</span> = {
    <span class="ruby-string">&#39;Introductory&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;Beginner&#39;</span>,
    <span class="ruby-string">&#39;Intermediate&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;Intermediate&#39;</span>,
    <span class="ruby-string">&#39;Advanced&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;Advanced&#39;</span>
  }
  <span class="ruby-keyword">return</span> <span class="ruby-string">&#39;{}&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>

  <span class="ruby-identifier">topic_desc</span> = {
    <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;CreativeWork&#39;</span>,
    <span class="ruby-value">name:</span> (<span class="ruby-identifier">topic</span>[<span class="ruby-string">&#39;title&#39;</span>]).<span class="ruby-identifier">to_s</span>,
    <span class="ruby-value">description:</span> (<span class="ruby-identifier">topic</span>[<span class="ruby-string">&#39;summary&#39;</span>]).<span class="ruby-identifier">to_s</span>,
    <span class="ruby-value">url:</span> <span class="ruby-node">&quot;#{site[&#39;url&#39;]}#{site[&#39;baseurl&#39;]}/topics/#{topic[&#39;name&#39;]}/&quot;</span>
  }

  <span class="ruby-comment"># aggregate everything</span>
  <span class="ruby-identifier">data</span> = {
    <span class="ruby-comment"># Properties from Course</span>
    <span class="ruby-value">&#39;@context&#39;:</span> <span class="ruby-string">&#39;http://schema.org&#39;</span>,
    <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;LearningResource&#39;</span>,

    <span class="ruby-comment"># Required for BioSchemas</span>
    <span class="ruby-value">&#39;http://purl.org/dc/terms/conformsTo&#39;:</span> {
      <span class="ruby-value">&#39;@id&#39;:</span> <span class="ruby-string">&#39;https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE&#39;</span>,
      <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;CreativeWork&#39;</span>
    },

    <span class="ruby-comment"># Properties from CreativeWork</span>
    <span class="ruby-comment"># &quot;about&quot; described below</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># &quot;accountablePerson&quot;:,</span>
    <span class="ruby-comment"># &quot;aggregateRating&quot;:,</span>
    <span class="ruby-comment"># &quot;alternativeHeadline&quot;:,</span>
    <span class="ruby-comment"># &quot;associatedMedia&quot;:,</span>
    <span class="ruby-value">audience:</span> {
      <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;EducationalAudience&#39;</span>,
      <span class="ruby-value">educationalRole:</span> <span class="ruby-string">&#39;Students&#39;</span>
    },
    <span class="ruby-comment"># &quot;audio&quot;:,</span>
    <span class="ruby-comment"># &quot;award&quot;:,</span>
    <span class="ruby-comment"># &quot;author&quot; described below</span>
    <span class="ruby-comment"># &quot;character&quot;:,</span>
    <span class="ruby-value">citation:</span> {
      <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;CreativeWork&#39;</span>,
      <span class="ruby-value">name:</span> <span class="ruby-string">&#39;Community-Driven Data Analysis Training for Biology&#39;</span>,
      <span class="ruby-value">url:</span> <span class="ruby-string">&#39;https://doi.org/10.1016/j.cels.2018.05.012&#39;</span>
    },
    <span class="ruby-comment"># &quot;comment&quot;:,</span>
    <span class="ruby-comment"># &quot;commentCount&quot;:,</span>
    <span class="ruby-comment"># &quot;contentLocation&quot;:,</span>
    <span class="ruby-comment"># &quot;contentRating&quot;:,</span>
    <span class="ruby-comment"># &quot;contentReferenceTime&quot;:,</span>
    <span class="ruby-comment"># &quot;contributor&quot; described below</span>
    <span class="ruby-value">copyrightHolder:</span> <span class="ruby-constant">GTN</span>,
    <span class="ruby-comment"># &quot;copyrightYear&quot;:,</span>
    <span class="ruby-comment"># &quot;correction&quot;:,</span>
    <span class="ruby-comment"># &quot;creator&quot;:,</span>
    <span class="ruby-comment"># &quot;dateCreated&quot;:,</span>
    <span class="ruby-value">dateModified:</span> <span class="ruby-constant">Gtn</span><span class="ruby-operator">::</span><span class="ruby-constant">ModificationTimes</span>.<span class="ruby-identifier">obtain_time</span>(<span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;path&#39;</span>]),
    <span class="ruby-comment"># &quot;datePublished&quot;:,</span>
    <span class="ruby-value">discussionUrl:</span> <span class="ruby-identifier">site</span>[<span class="ruby-string">&#39;gitter_url&#39;</span>],
    <span class="ruby-comment"># &quot;editor&quot;:,</span>
    <span class="ruby-comment"># &quot;educationalAlignment&quot;:,</span>
    <span class="ruby-comment"># &quot;educationalUse&quot;:,</span>
    <span class="ruby-comment"># &quot;encoding&quot;:,</span>
    <span class="ruby-comment"># &quot;encodingFormat&quot;:,</span>
    <span class="ruby-comment"># &quot;exampleOfWork&quot;:,</span>
    <span class="ruby-comment"># &quot;expires&quot;:,</span>
    <span class="ruby-comment"># &quot;funder&quot;:,</span>
    <span class="ruby-comment"># &quot;genre&quot;:,</span>
    <span class="ruby-comment"># &quot;hasPart&quot; described below</span>
    <span class="ruby-value">headline:</span> (<span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;title&#39;</span>]).<span class="ruby-identifier">to_s</span>,
    <span class="ruby-comment"># &quot;interactionStatistic&quot;:,</span>
    <span class="ruby-value">interactivityType:</span> <span class="ruby-string">&#39;mixed&#39;</span>,
    <span class="ruby-value">isAccessibleForFree:</span> <span class="ruby-keyword">true</span>,
    <span class="ruby-comment"># &quot;isBasedOn&quot;:,</span>
    <span class="ruby-value">isFamilyFriendly:</span> <span class="ruby-keyword">true</span>,
    <span class="ruby-comment"># &quot;isPartOf&quot; described below</span>
    <span class="ruby-comment"># &quot;keywords&quot;: described below</span>
    <span class="ruby-comment"># &quot;learningResourceType&quot; described below</span>
    <span class="ruby-value">license:</span> <span class="ruby-string">&#39;https://spdx.org/licenses/CC-BY-4.0.html&#39;</span>,
    <span class="ruby-comment"># &quot;locationCreated&quot;:,</span>
    <span class="ruby-comment"># &quot;mainEntity&quot;:,</span>
    <span class="ruby-comment"># &quot;material&quot;:,</span>
    <span class="ruby-comment"># &quot;mentions&quot; described below</span>
    <span class="ruby-comment"># &quot;offers&quot;:,</span>
    <span class="ruby-comment"># &quot;position&quot;:,</span>
    <span class="ruby-value">producer:</span> <span class="ruby-constant">GTN</span>,
    <span class="ruby-value">provider:</span> <span class="ruby-constant">GTN</span>,
    <span class="ruby-comment"># &quot;publication&quot;:,</span>
    <span class="ruby-comment"># &quot;publisher&quot;:,</span>
    <span class="ruby-comment"># &quot;publisherImprint&quot;:,</span>
    <span class="ruby-comment"># &quot;publishingPrinciples&quot;:,</span>
    <span class="ruby-comment"># &quot;recordedAt&quot;:,</span>
    <span class="ruby-comment"># &quot;releasedEvent&quot;:,</span>
    <span class="ruby-comment"># &quot;review&quot;:,</span>
    <span class="ruby-comment"># &quot;schemaVersion&quot;:,</span>
    <span class="ruby-comment"># &quot;sdDatePublished&quot;:,</span>
    <span class="ruby-comment"># &quot;sdLicense&quot;:,</span>
    <span class="ruby-comment"># &quot;sdPublisher&quot;:,</span>
    <span class="ruby-value">sourceOrganization:</span> <span class="ruby-constant">GTN</span>,
    <span class="ruby-comment"># &quot;spatialCoverage&quot;:,</span>
    <span class="ruby-comment"># &quot;sponsor&quot;:,</span>
    <span class="ruby-comment"># &quot;temporalCoverage&quot;:,</span>
    <span class="ruby-comment"># &quot;text&quot;:,</span>
    <span class="ruby-comment"># &quot;thumbnailUrl&quot;:,</span>
    <span class="ruby-comment"># &quot;timeRequired&quot; described below</span>
    <span class="ruby-comment"># &quot;translationOfWork&quot;:,</span>
    <span class="ruby-comment"># &quot;translator&quot;: Google Translate???,</span>
    <span class="ruby-comment"># &quot;typicalAgeRange&quot;:,</span>
    <span class="ruby-comment"># &quot;version&quot;:,</span>
    <span class="ruby-comment"># &quot;video&quot;:,</span>
    <span class="ruby-comment"># &quot;workExample&quot;:,</span>
    <span class="ruby-comment"># &quot;workTranslation&quot;:,</span>

    <span class="ruby-comment"># Properties from Thing</span>
    <span class="ruby-comment"># &quot;additionalType&quot;:,</span>
    <span class="ruby-comment"># &quot;alternateName&quot;:,</span>
    <span class="ruby-comment"># &quot;description&quot; described below</span>
    <span class="ruby-comment"># &quot;disambiguatingDescription&quot;:,</span>
    <span class="ruby-value">identifier:</span> <span class="ruby-identifier">site</span>[<span class="ruby-string">&#39;github_repository&#39;</span>],
    <span class="ruby-comment"># &quot;image&quot;:,</span>
    <span class="ruby-comment"># &quot;mainEntityOfPage&quot;:,</span>
    <span class="ruby-comment"># &quot;name&quot; described below</span>
    <span class="ruby-comment"># &quot;potentialAction&quot;:,</span>
    <span class="ruby-comment"># &quot;sameAs&quot;:,</span>
    <span class="ruby-comment"># &quot;subjectOf&quot;:,</span>
    <span class="ruby-comment"># &quot;url&quot; described below</span>
    <span class="ruby-value">workTranslation:</span> [],
    <span class="ruby-value">creativeWorkStatus:</span> <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;draft&#39;</span>] <span class="ruby-operator">?</span> <span class="ruby-string">&#39;Under development&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;Active&#39;</span>,
  }
  <span class="ruby-identifier">data</span>.<span class="ruby-identifier">update</span>(<span class="ruby-constant">A11Y</span>)

  <span class="ruby-comment"># info depending if tutorial, hands-on or slide level</span>
  <span class="ruby-comment"># parts = []</span>
  <span class="ruby-comment"># data[&#39;hasPart&#39;] = parts</span>

  <span class="ruby-identifier">mentions</span> = []
  <span class="ruby-identifier">description</span> = []

  <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;isPartOf&#39;</span>] = <span class="ruby-identifier">topic_desc</span>

  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;name&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;tutorial.md&#39;</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;name&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;slides.html&#39;</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;name&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;tutorial.md&#39;</span>
      <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;learningResourceType&#39;</span>] = <span class="ruby-string">&#39;hands-on tutorial&#39;</span>
      <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;name&#39;</span>] = <span class="ruby-node">&quot;Hands-on for &#39;#{material[&#39;title&#39;]}&#39; tutorial&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;learningResourceType&#39;</span>] = <span class="ruby-string">&#39;slides&#39;</span>
      <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;name&#39;</span>] = <span class="ruby-node">&quot;Slides for &#39;#{material[&#39;title&#39;]}&#39; tutorial&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;url&#39;</span>] = <span class="ruby-node">&quot;#{site[&#39;url&#39;]}#{site[&#39;baseurl&#39;]}#{material[&#39;url&#39;]}&quot;</span>

    <span class="ruby-comment"># Time required</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;time_estimation&#39;</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;time_estimation&#39;</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;timeRequired&#39;</span>] = <span class="ruby-node">&quot;PT#{material[&#39;time_estimation&#39;].upcase}&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Description with questions, objectives and keypoints</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;questions&#39;</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;questions&#39;</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;questions&#39;</span>].<span class="ruby-identifier">length</span>.<span class="ruby-identifier">positive?</span>
      <span class="ruby-identifier">questions</span> = <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;questions&#39;</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n - &quot;</span>)
      <span class="ruby-identifier">description</span>.<span class="ruby-identifier">push</span>(<span class="ruby-node">&quot;The questions this #{material[&#39;type&#39;]} addresses are:\n - #{questions}\n\n&quot;</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;objectives&#39;</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;objectives&#39;</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;objectives&#39;</span>].<span class="ruby-identifier">length</span>.<span class="ruby-identifier">positive?</span>
      <span class="ruby-identifier">objectives</span> = <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;objectives&#39;</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n - &quot;</span>)
      <span class="ruby-identifier">description</span>.<span class="ruby-identifier">push</span>(<span class="ruby-node">&quot;The objectives are:\n - #{objectives}\n\n&quot;</span>)
      <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;teaches&#39;</span>] = <span class="ruby-identifier">objectives</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;keypoints&#39;</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;keypoints&#39;</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;keypoints&#39;</span>].<span class="ruby-identifier">length</span>.<span class="ruby-identifier">positive?</span>
      <span class="ruby-identifier">keypoints</span> = <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;keypoints&#39;</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n - &quot;</span>)
      <span class="ruby-identifier">description</span>.<span class="ruby-identifier">push</span>(<span class="ruby-node">&quot;The keypoints are:\n - #{keypoints}\n\n&quot;</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Keywords</span>
    <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;keywords&#39;</span>] = [<span class="ruby-identifier">topic</span>[<span class="ruby-string">&#39;name&#39;</span>]] <span class="ruby-operator">+</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;tags&#39;</span>, [])
    <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;keywords&#39;</span>] = <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;keywords&#39;</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;, &#39;</span>)
    <span class="ruby-comment"># Zenodo links</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;zenodo_link&#39;</span>)
      <span class="ruby-identifier">mentions</span>.<span class="ruby-identifier">push</span>({
                      <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;Thing&#39;</span>,
                      <span class="ruby-value">url:</span> (<span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;zenodo_link&#39;</span>]).<span class="ruby-identifier">to_s</span>,
                      <span class="ruby-value">name:</span> <span class="ruby-node">&quot;Training data for #{material[&#39;title&#39;]} tutorial&quot;</span>
                    })
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;description&#39;</span>] = <span class="ruby-identifier">description</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)

  <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;inLanguage&#39;</span>] = <span class="ruby-keyword">if</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;lang&#39;</span>)
                         {
                           <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;Language&#39;</span>,
                           <span class="ruby-value">name:</span> <span class="ruby-identifier">langCodeMap</span>[<span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;lang&#39;</span>]],
                           <span class="ruby-value">alternateName:</span> <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;lang&#39;</span>]
                         }
                       <span class="ruby-keyword">else</span>
                         {
                           <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;Language&#39;</span>,
                           <span class="ruby-value">name:</span> <span class="ruby-string">&#39;English&#39;</span>,
                           <span class="ruby-value">alternateName:</span> <span class="ruby-string">&#39;en&#39;</span>
                         }
                       <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Course requirements (material + topic)</span>
  <span class="ruby-identifier">reqs</span> = []
  <span class="ruby-identifier">reqs</span>.<span class="ruby-identifier">push</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">topic</span>[<span class="ruby-string">&#39;requirements&#39;</span>]) <span class="ruby-keyword">if</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;requirements&#39;</span>)
  <span class="ruby-identifier">reqs</span>.<span class="ruby-identifier">push</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;requirements&#39;</span>]) <span class="ruby-keyword">if</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;requirements&#39;</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">reqs</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">coursePrerequisites</span> = []
    <span class="ruby-identifier">reqs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">req</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">req</span>[<span class="ruby-string">&#39;type&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;internal&#39;</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">req</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;tutorials&#39;</span>)
          (<span class="ruby-identifier">req</span>[<span class="ruby-string">&#39;tutorials&#39;</span>]).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tuto</span><span class="ruby-operator">|</span>
            (<span class="ruby-identifier">site</span>[<span class="ruby-string">&#39;pages&#39;</span>]).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
              <span class="ruby-keyword">if</span> ((<span class="ruby-identifier">page</span>[<span class="ruby-string">&#39;name&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;tutorial.md&#39;</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">page</span>[<span class="ruby-string">&#39;name&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;slides.html&#39;</span>)) <span class="ruby-operator">&amp;&amp;</span>
                 ((<span class="ruby-identifier">page</span>[<span class="ruby-string">&#39;topic_name&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">req</span>[<span class="ruby-string">&#39;topic_name&#39;</span>]) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">page</span>[<span class="ruby-string">&#39;tutorial_name&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">tuto</span>))
                <span class="ruby-comment"># slides</span>
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">page</span>[<span class="ruby-string">&#39;name&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;slides.html&#39;</span>
                  <span class="ruby-identifier">coursePrerequisites</span>.<span class="ruby-identifier">push</span>(
                    {
                      <span class="ruby-value">&#39;@context&#39;:</span> <span class="ruby-string">&#39;http://schema.org&#39;</span>,
                      <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;LearningResource&#39;</span>,
                      <span class="ruby-value">url:</span> <span class="ruby-node">&quot;#{site[&#39;url&#39;]}#{site[&#39;baseurl&#39;]}/topics/#{req[&#39;topic_name&#39;]}/&quot;</span> \
                           <span class="ruby-node">&quot;tutorials/#{tuto}/slides.html&quot;</span>,
                      <span class="ruby-value">name:</span> (<span class="ruby-identifier">page</span>[<span class="ruby-string">&#39;title&#39;</span>]).<span class="ruby-identifier">to_s</span>,
                      <span class="ruby-value">description:</span> <span class="ruby-node">&quot;Slides for &#39;#{page[&#39;title&#39;]}&#39; tutorial&quot;</span>,
                      <span class="ruby-value">learningResourceType:</span> <span class="ruby-string">&#39;slides&#39;</span>,
                      <span class="ruby-value">interactivityType:</span> <span class="ruby-string">&#39;expositive&#39;</span>,
                      <span class="ruby-value">provider:</span> <span class="ruby-constant">GTN</span>
                    }
                  )
                  <span class="ruby-keyword">if</span> <span class="ruby-identifier">page</span>[<span class="ruby-string">&#39;hands_on_url&#39;</span>]
                    <span class="ruby-identifier">coursePrerequisites</span>.<span class="ruby-identifier">push</span>(
                      {
                        <span class="ruby-value">&#39;@context&#39;:</span> <span class="ruby-string">&#39;http://schema.org&#39;</span>,
                        <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;LearningResource&#39;</span>,
                        <span class="ruby-value">url:</span> (<span class="ruby-identifier">page</span>[<span class="ruby-string">&#39;hands_on_url&#39;</span>]).<span class="ruby-identifier">to_s</span>,
                        <span class="ruby-value">learningResourceType:</span> <span class="ruby-string">&#39;hands-on tutorial&#39;</span>,
                        <span class="ruby-value">interactivityType:</span> <span class="ruby-string">&#39;expositive&#39;</span>,
                      }
                    )
                  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
                <span class="ruby-comment"># hands-on</span>
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">page</span>[<span class="ruby-string">&#39;name&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;tutorial.md&#39;</span>
                  <span class="ruby-identifier">coursePrerequisites</span>.<span class="ruby-identifier">push</span>(
                    {
                      <span class="ruby-value">&#39;@context&#39;:</span> <span class="ruby-string">&#39;http://schema.org&#39;</span>,
                      <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;LearningResource&#39;</span>,
                      <span class="ruby-value">url:</span> <span class="ruby-node">&quot;#{site[&#39;url&#39;]}#{site[&#39;baseurl&#39;]}/topics/#{req[&#39;topic_name&#39;]}/tutorials&quot;</span> \
                           <span class="ruby-node">&quot;/#{tuto}/tutorial.html&quot;</span>,
                      <span class="ruby-value">name:</span> (<span class="ruby-identifier">page</span>[<span class="ruby-string">&#39;title&#39;</span>]).<span class="ruby-identifier">to_s</span>,
                      <span class="ruby-value">description:</span> <span class="ruby-node">&quot;Hands-on for &#39;#{page[&#39;title&#39;]}&#39; tutorial&quot;</span>,
                      <span class="ruby-value">learningResourceType:</span> <span class="ruby-string">&#39;hands-on tutorial&#39;</span>,
                      <span class="ruby-value">interactivityType:</span> <span class="ruby-string">&#39;expositive&#39;</span>,
                      <span class="ruby-value">provider:</span> <span class="ruby-constant">GTN</span>
                    }
                  )
                <span class="ruby-keyword">end</span>
              <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">coursePrerequisites</span>.<span class="ruby-identifier">push</span>(
            {
              <span class="ruby-value">&#39;@context&#39;:</span> <span class="ruby-string">&#39;http://schema.org&#39;</span>,
              <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;LearningResource&#39;</span>,
              <span class="ruby-value">url:</span> <span class="ruby-node">&quot;#{site[&#39;url&#39;]}#{site[&#39;baseurl&#39;]}/topics/#{req[&#39;topic_name&#39;]}/&quot;</span>,
              <span class="ruby-value">name:</span> (<span class="ruby-identifier">site</span>[<span class="ruby-string">&#39;data&#39;</span>][<span class="ruby-identifier">req</span>[<span class="ruby-string">&#39;topic_name&#39;</span>]][<span class="ruby-string">&#39;title&#39;</span>]).<span class="ruby-identifier">to_s</span>,
              <span class="ruby-value">description:</span> (<span class="ruby-identifier">site</span>[<span class="ruby-string">&#39;data&#39;</span>][<span class="ruby-identifier">req</span>[<span class="ruby-string">&#39;topic_name&#39;</span>]][<span class="ruby-string">&#39;title&#39;</span>]).<span class="ruby-identifier">to_s</span>,
              <span class="ruby-value">provider:</span> <span class="ruby-constant">GTN</span>
            }
          )
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">req</span>[<span class="ruby-string">&#39;type&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;external&#39;</span>
        <span class="ruby-identifier">coursePrerequisites</span>.<span class="ruby-identifier">push</span>({
                                   <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;CreativeWork&#39;</span>,
                                   <span class="ruby-value">url:</span> (<span class="ruby-identifier">req</span>[<span class="ruby-string">&#39;link&#39;</span>]).<span class="ruby-identifier">to_s</span>,
                                   <span class="ruby-value">name:</span> (<span class="ruby-identifier">req</span>[<span class="ruby-string">&#39;title&#39;</span>]).<span class="ruby-identifier">to_s</span>
                                 })
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">coursePrerequisites</span>.<span class="ruby-identifier">push</span>((<span class="ruby-identifier">req</span>[<span class="ruby-string">&#39;title&#39;</span>]).<span class="ruby-identifier">to_s</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;competencyRequired&#39;</span>] = <span class="ruby-identifier">coursePrerequisites</span>.<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Add contributors/authors</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;contributors&#39;</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;contributions&#39;</span>)
    <span class="ruby-identifier">authors</span> = <span class="ruby-identifier">get_authors</span>(<span class="ruby-identifier">material</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">generate_person_jsonld</span>(<span class="ruby-identifier">x</span>, <span class="ruby-identifier">site</span>[<span class="ruby-string">&#39;data&#39;</span>][<span class="ruby-string">&#39;contributors&#39;</span>][<span class="ruby-identifier">x</span>], <span class="ruby-identifier">site</span>) }

    <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;author&#39;</span>] = <span class="ruby-identifier">authors</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">about</span> = []
  <span class="ruby-identifier">about</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">topic_desc</span>)
  <span class="ruby-identifier">edam_terms</span> = <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;edam_ontology&#39;</span>, []) <span class="ruby-operator">|</span> <span class="ruby-identifier">material</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;edam_ontology&#39;</span>, [])

  <span class="ruby-identifier">about</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">edam_terms</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">term</span><span class="ruby-operator">|</span>
    {
      <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;DefinedTerm&#39;</span>,
      <span class="ruby-value">&#39;@id&#39;:</span> <span class="ruby-node">&quot;http://edamontology.org/#{term}&quot;</span>,
      <span class="ruby-value">inDefinedTermSet:</span> <span class="ruby-string">&#39;http://edamontology.org&#39;</span>,
      <span class="ruby-value">termCode:</span> <span class="ruby-identifier">term</span>,
      <span class="ruby-comment"># &quot;name&quot;: ,</span>
      <span class="ruby-value">url:</span> <span class="ruby-string">&#39;https://bioportal.bioontology.org/ontologies/EDAM/?p=classes&amp;conceptid=&#39;</span> \
           <span class="ruby-node">&quot;http%3A%2F%2Fedamontology.org%2F#{term}&quot;</span>
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;about&#39;</span>] = <span class="ruby-identifier">about</span>

  <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;educationalLevel&#39;</span>] = <span class="ruby-identifier">material</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;level&#39;</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">eduLevel</span>[<span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;level&#39;</span>]] <span class="ruby-operator">:</span> <span class="ruby-string">&#39;Introductory&#39;</span>
  <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;mentions&#39;</span>] = <span class="ruby-identifier">material</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;tags&#39;</span>, []).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> { <span class="ruby-value">&#39;@type&#39;:</span> <span class="ruby-string">&#39;Thing&#39;</span>, <span class="ruby-value">name:</span> <span class="ruby-identifier">x</span> } }
  <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;abstract&#39;</span>] = <span class="ruby-identifier">material</span>[<span class="ruby-string">&#39;content&#39;</span>].<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>).<span class="ruby-identifier">first</span>

  <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">pretty_generate</span>(<span class="ruby-identifier">data</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-to_person_jsonld" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">to_person_jsonld</span><span
            class="method-args">(id, contributor, site)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Generate the JSON-LD metadata for a person as JSON. Parameters:</p>
<dl class="rdoc-list note-list"><dt><code>id</code>
<dd>
<p>The id of the person.</p>
</dd><dt><code>contributor</code>
<dd>
<p>The contributor object from CONTRIBUTORS.yaml.</p>
</dd><dt><code>site</code>
<dd>
<p>The site object.</p>
</dd></dl>

<p>Returns:</p>
<dl class="rdoc-list note-list"><dt><code>String</code>
<dd>
<p>The JSON-LD metadata.</p>
</dd></dl>

          <div class="method-source-code" id="to_person_jsonld-source">
            <pre><span class="ruby-comment"># File _plugins/jekyll-jsonld.rb, line 164</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">to_person_jsonld</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">contributor</span>, <span class="ruby-identifier">site</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">contributor</span>.<span class="ruby-identifier">key?</span> <span class="ruby-string">&#39;funder&#39;</span>
    <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">pretty_generate</span>(<span class="ruby-identifier">generate_org_jsonld</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">contributor</span>, <span class="ruby-identifier">site</span>))
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">pretty_generate</span>(<span class="ruby-identifier">generate_person_jsonld</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">contributor</span>, <span class="ruby-identifier">site</span>))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.3.3.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

